# Plans for Issue #650

**Title**: [Phase 5] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°æ”¹å–„ - å®Ÿè£…

**URL**: https://github.com/customer-cloud/miyabi-private/issues/650

---

## ğŸ“‹ Summary

- **Total Tasks**: 4
- **Estimated Duration**: 60 minutes
- **Execution Levels**: 4
- **Has Cycles**: âœ… No

## ğŸ“ Task Breakdown

### 1. Analyze requirements for #650

- **ID**: `task-650-analysis`
- **Type**: Docs
- **Assigned Agent**: IssueAgent
- **Priority**: 0
- **Estimated Duration**: 5 min

**Description**: Analyze issue requirements and create detailed specification

### 2. Implement solution for #650

- **ID**: `task-650-impl`
- **Type**: Feature
- **Assigned Agent**: CodeGenAgent
- **Priority**: 1
- **Estimated Duration**: 30 min
- **Dependencies**: task-650-analysis

**Description**: ## ğŸ“‹ ã‚¿ã‚¹ã‚¯æ¦‚è¦

ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨ã‚¨ãƒ©ãƒ¼ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’å®Ÿè£…ã™ã‚‹ã€‚

## ğŸ¯ ç›®çš„

ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ™‚ã«æ˜ç¢ºãªåŸå› ã¨è§£æ±ºæ–¹æ³•ã‚’æç¤ºã™ã‚‹ã€‚

## ğŸ“ å®Ÿè£…å†…å®¹

### ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å®šç¾©

```typescript
// src/lib/error-messages.ts
interface ErrorInfo {
  title: string;
  message: string;
  actions: string[];
  severity: 'error' | 'warning' | 'info';
}

export const ERROR_MESSAGES: Record<string, ErrorInfo> = {
  "github_token_invalid": {
    title: "GitHub Token ãŒç„¡åŠ¹ã§ã™",
    message: "å…¥åŠ›ã•ã‚ŒãŸGitHub Personal Access TokenãŒç„¡åŠ¹ã€ã¾ãŸã¯æœŸé™åˆ‡ã‚Œã®å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚",
    actions: [
      "Settings â†’ GitHub Tokenã‚’ç¢ºèªã—ã¦ãã ã•ã„",
      "æ–°ã—ã„Tokenã‚’ç”Ÿæˆã—ã¦ãã ã•ã„: https://github.com/settings/tokens",
      "å¿…è¦ãªæ¨©é™ (repo, workflow) ãŒä»˜ä¸ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªã—ã¦ãã ã•ã„",
    ],
    severity: "error",
  },
  "github_api_rate_limit": {
    title: "GitHub API ãƒ¬ãƒ¼ãƒˆåˆ¶é™",
    message: "GitHub APIã®åˆ©ç”¨ä¸Šé™ã«é”ã—ã¾ã—ãŸã€‚1æ™‚é–“å¾Œã«å†è©¦è¡Œã—ã¦ãã ã•ã„ã€‚",
    actions: [
      "1æ™‚é–“å¾…æ©Ÿã—ã¦ãã ã•ã„",
      "Personal Access Tokenã‚’ä½¿ç”¨ã™ã‚‹ã¨åˆ¶é™ãŒç·©å’Œã•ã‚Œã¾ã™",
    ],
    severity: "warning",
  },
  "agent_execution_failed": {
    title: "ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè¡Œå¤±æ•—",
    message: "ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®å®Ÿè¡Œä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚",
    actions: [
      "ãƒ­ã‚°ã‚’ç¢ºèªã—ã¦ãã ã•ã„",
      "Issueç•ªå·ãŒæ­£ã—ã„ã‹ç¢ºèªã—ã¦ãã ã•ã„",
      "ãƒªãƒã‚¸ãƒˆãƒªã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ã‚’ç¢ºèªã—ã¦ãã ã•ã„",
    ],
    severity: "error",
  },
  // ... 10+ ã‚¨ãƒ©ãƒ¼ã‚¿ã‚¤ãƒ—
};
```

### ã‚¨ãƒ©ãƒ¼ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

```tsx
interface ErrorModalProps {
  error: ErrorInfo;
  onClose: () => void;
  onRetry?: () => void;
}

const ErrorModal = ({ error, onClose, onRetry }: ErrorModalProps) => {
  const severityColors = {
    error: "bg-red-50 border-red-200",
    warning: "bg-yellow-50 border-yellow-200",
    info: "bg-blue-50 border-blue-200",
  };

  const severityIcons = {
    error: <AlertCircle className="w-6 h-6 text-red-600" />,
    warning: <AlertTriangle className="w-6 h-6 text-yellow-600" />,
    info: <Info className="w-6 h-6 text-blue-600" />,
  };

  return (
    <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
      <div className="bg-white rounded-lg max-w-md w-full p-6 shadow-2xl">
        <div className="flex items-start gap-4 mb-4">
          {severityIcons[error.severity]}
          <div className="flex-1">
            <h2 className="text-xl font-bold mb-2">{error.title}</h2>
            <p className="text-gray-600">{error.message}</p>
          </div>
        </div>

        <div className={`p-4 rounded-lg border ${severityColors[error.severity]}`}>
          <h3 className="font-medium mb-2">è§£æ±ºæ–¹æ³•:</h3>
          <ul className="space-y-1 text-sm">
            {error.actions.map((action, idx) => (
              <li key={idx} className="flex gap-2">
                <span>â†’</span>
                <span>{action}</span>
              </li>
            ))}
          </ul>
        </div>

        <div className="flex gap-2 mt-6">
          {onRetry && (
            <button
              onClick={onRetry}
              className="flex-1 py-2 bg-black text-white rounded-lg hover:bg-gray-800"
            >
              Retry
            </button>
          )}
          <button
            onClick={onClose}
            className="flex-1 py-2 border border-gray-300 rounded-lg hover:bg-gray-50"
          >
            Close
          </button>
        </div>
      </div>
    </div>
  );
};
```

### ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°çµ±åˆ

```typescript
const handleExecuteAgent = async () => {
  try {
    await executeAgent(selectedAgent.type, selectedIssue?.number);
  } catch (error) {
    const errorCode = extractErrorCode(error);
    const errorInfo = ERROR_MESSAGES[errorCode] || ERROR_MESSAGES["unknown_error"];
    setShowErrorModal(errorInfo);
  }
};
```

## âœ… æˆåŠŸåŸºæº–

- [ ] 10ç¨®é¡ä»¥ä¸Šã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹
- [ ] ã‚¨ãƒ©ãƒ¼ãƒ¢ãƒ¼ãƒ€ãƒ«ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã‚‹
- [ ] å…¨ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè¡Œæ™‚ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- [ ] Retryæ©Ÿèƒ½ãŒå‹•ä½œã™ã‚‹

## ğŸ“Š æˆæœç‰©

- `error-messages.ts`
- `ErrorModal.tsx`
- çµ±åˆã•ã‚ŒãŸã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

## ğŸ”— é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- å®Ÿè£…è¨ˆç”»: `docs/IMPLEMENTATION_PLAN.md` (Phase 5)

## â±ï¸ è¦‹ç©ã‚‚ã‚Šæ™‚é–“

**2æ—¥**

---

ğŸ¤– Generated with Claude Code

### 3. Add tests for #650

- **ID**: `task-650-test`
- **Type**: Test
- **Assigned Agent**: CodeGenAgent
- **Priority**: 2
- **Estimated Duration**: 15 min
- **Dependencies**: task-650-impl

**Description**: Create comprehensive test coverage

### 4. Review code quality for #650

- **ID**: `task-650-review`
- **Type**: Refactor
- **Assigned Agent**: ReviewAgent
- **Priority**: 3
- **Estimated Duration**: 10 min
- **Dependencies**: task-650-test

**Description**: Run quality checks and code review

## ğŸ”„ Execution Plan (DAG Levels)

Tasks can be executed in parallel within each level:

### Level 0 (Parallel Execution)

- `task-650-analysis` - Analyze requirements for #650

### Level 1 (Parallel Execution)

- `task-650-impl` - Implement solution for #650

### Level 2 (Parallel Execution)

- `task-650-test` - Add tests for #650

### Level 3 (Parallel Execution)

- `task-650-review` - Review code quality for #650

## ğŸ“Š Dependency Graph

```mermaid
graph TD
    task_650_analysis["Analyze requirements for #650"]
    task_650_impl["Implement solution for #650"]
    task_650_test["Add tests for #650"]
    task_650_review["Review code quality for #650"]
    task_650_analysis --> task_650_impl
    task_650_impl --> task_650_test
    task_650_test --> task_650_review
```

## â±ï¸ Timeline Estimation

- **Sequential Execution**: 60 minutes (1.0 hours)
- **Parallel Execution (Critical Path)**: 10 minutes (0.2 hours)
- **Estimated Speedup**: 6.0x

---

*Generated by CoordinatorAgent on 2025-11-01 11:25:34 UTC*

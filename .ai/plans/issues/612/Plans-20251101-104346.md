# Plans for Issue #612

**Title**: Epic: KAMUI 4Dè¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³çµ±åˆ - Worktreeå¯è¦–åŒ–ã¨Agentç®¡ç†ã®å¼·åŒ–

**URL**: https://github.com/customer-cloud/miyabi-private/issues/612

---

## ğŸ“‹ Summary

- **Total Tasks**: 4
- **Estimated Duration**: 60 minutes
- **Execution Levels**: 4
- **Has Cycles**: âœ… No

## ğŸ“ Task Breakdown

### 1. Analyze requirements for #612

- **ID**: `task-612-analysis`
- **Type**: Docs
- **Assigned Agent**: IssueAgent
- **Priority**: 0
- **Estimated Duration**: 5 min

**Description**: Analyze issue requirements and create detailed specification

### 2. Implement solution for #612

- **ID**: `task-612-impl`
- **Type**: Feature
- **Assigned Agent**: CodeGenAgent
- **Priority**: 1
- **Estimated Duration**: 30 min
- **Dependencies**: task-612-analysis

**Description**: # Epic: KAMUI 4Dè¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³çµ±åˆ

## ğŸ“‹ æ¦‚è¦

KAMUI 4Dã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å„ªã‚ŒãŸè¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’Miyabiã«çµ±åˆã—ã€Git Worktreeå¯è¦–åŒ–ã€Agentç®¡ç†ã€ã‚¿ã‚¹ã‚¯ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ç®¡ç†ã‚’å¼·åŒ–ã™ã‚‹ã€‚

**å‚è€ƒãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ**: KAMUI 4D v1.5.13 (Electronè£½4æ¬¡å…ƒã‚¿ã‚¹ã‚¯ç®¡ç†ã‚¢ãƒ—ãƒª)
**åˆ†ææ—¥**: 2025-10-29
**é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: KAMUI 4D vs Miyabi æ¯”è¼ƒåˆ†æãƒ¬ãƒãƒ¼ãƒˆ

## ğŸ¯ ç›®æ¨™

1. **Git Worktreeçµ±åˆè¡¨ç¤º**: è¤‡æ•°Worktreeã®çŠ¶æ…‹ã‚’è¦–è¦šçš„ã«ç®¡ç†
2. **Agentè¨­å®šç®¡ç†**: 21å€‹ã®Agentã‚’çµ±ä¸€çš„ã«ç®¡ç†ã™ã‚‹ä»•çµ„ã¿
3. **ã‚¿ã‚¹ã‚¯ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–**: å®Ÿè¡Œå±¥æ­´ã€æˆåŠŸ/å¤±æ•—ã€å®Ÿè¡Œæ™‚é–“ã®è¨˜éŒ²
4. **å¯è¦–åŒ–**: TUIç‰ˆã‹ã‚‰Web Dashboard 3Dã¾ã§æ®µéšçš„ã«å®Ÿè£…

## ğŸ“Š Phaseåˆ¥å®Ÿè£…è¨ˆç”»

### Phase 1: åŸºç›¤æ•´å‚™ (å„ªå…ˆåº¦: â­â­â­â­â­)
**æœŸé–“**: 1-2é€±é–“

- [ ] #TBD ã‚¿ã‚¹ã‚¯ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–ã‚·ã‚¹ãƒ†ãƒ ã®å®Ÿè£…
- [ ] #TBD Agentè¨­å®šç®¡ç†CLIã®å®Ÿè£…  
- [ ] #TBD WorktreeçŠ¶æ…‹ç®¡ç†ã®å¼·åŒ–

**ç›®æ¨™æˆæœç‰©**:
- `.miyabi/tasks/*.json` ã§ã‚¿ã‚¹ã‚¯ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–
- `miyabi agent list/config/edit` ã‚³ãƒãƒ³ãƒ‰å®Ÿè£…
- WorktreeçŠ¶æ…‹è¿½è·¡ã®å¼·åŒ–

### Phase 2: å¯è¦–åŒ– (å„ªå…ˆåº¦: â­â­â­â­)
**æœŸé–“**: 2-3é€±é–“

- [ ] #TBD TUIç‰ˆWorktreeçŠ¶æ…‹è¡¨ç¤ºã®å®Ÿè£…
- [ ] #TBD Gitå±¥æ­´ã‚°ãƒ©ãƒ•æç”»æ©Ÿèƒ½
- [ ] #TBD Agentå®Ÿè¡ŒçŠ¶æ…‹ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¡¨ç¤º

**ç›®æ¨™æˆæœç‰©**:
- `miyabi status --tui` ã§ãƒªãƒƒãƒãªWorktreeè¡¨ç¤º
- Gitå±¥æ­´ã‚°ãƒ©ãƒ•ï¼ˆratatuiä½¿ç”¨ï¼‰
- Agentå®Ÿè¡Œä¸­ã®ãƒ©ã‚¤ãƒ–ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°

### Phase 3: KAMUI 4Dçµ±åˆ (å„ªå…ˆåº¦: â­â­â­)
**æœŸé–“**: 3-4é€±é–“

- [ ] #TBD miyabi-kamui-bridge crateã®ä½œæˆ
- [ ] #TBD KAMUI 4D APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆæ‹¡å¼µ
- [ ] #TBD Web Dashboard 3Då¯è¦–åŒ–

**ç›®æ¨™æˆæœç‰©**:
- Miyabiã¨KAMUI 4Dã®åŒæ–¹å‘é€£æº
- Miyabiå®Ÿè¡ŒçŠ¶æ³ã®KAMUI 4Dã§ã®3Då¯è¦–åŒ–
- Web Dashboard (`miyabi-dashboard/`) ã§ã®3Dè¡¨ç¤º

## ğŸ”— å‚è€ƒãƒªã‚½ãƒ¼ã‚¹

### KAMUI 4Dã‹ã‚‰å­¦ã¶ã¹ãè¨­è¨ˆ

1. **Git Worktreeçµ±åˆè¨­è¨ˆ** (â­â­â­â­â­)
   - `docs/git-worktree-task-system-design.md` (32KB)
   - ã‚¿ã‚¹ã‚¯ã‚«ãƒ¼ãƒ‰ã¨Worktreeã®1:1å¯¾å¿œ
   - `.worktrees/task-{id}/` é…ç½®ãƒ‘ã‚¿ãƒ¼ãƒ³

2. **Agentè¨­å®šç®¡ç†** (â­â­â­â­â­)
   - `src/main/agent-config-service.js`
   - ç’°å¢ƒå¤‰æ•°ãƒ»ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ»è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®è‡ªå‹•æ¤œå‡º
   - è¤‡æ•°AIãƒ„ãƒ¼ãƒ«ã®çµ±ä¸€ç®¡ç†

3. **ã‚¿ã‚¹ã‚¯ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿** (â­â­â­â­â­)
   - ã‚¿ã‚¹ã‚¯IDã€Worktree pathã€ãƒ–ãƒ©ãƒ³ãƒåã€å®Ÿè¡ŒçŠ¶æ…‹
   - `data/tasks-state.json` ã§ã®æ°¸ç¶šåŒ–

4. **3Då¯è¦–åŒ–** (â­â­â­â­)
   - Three.js + 3D Force Graph
   - è¤‡æ•°ã®æç”»ãƒ¢ãƒ¼ãƒ‰ï¼ˆé€šå¸¸/ãƒ¡ãƒ‡ã‚£ã‚¢/ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ï¼‰

### Miyabiæ—¢å­˜ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

- `.claude/context/worktree.md` - Worktreeãƒ—ãƒ­ãƒˆã‚³ãƒ«
- `.claude/context/agents.md` - Agentä»•æ§˜
- `crates/miyabi-worktree/` - Worktreeå®Ÿè£…
- `crates/miyabi-agents/` - Agentå®Ÿè£…

## ğŸ“ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¯”è¼ƒ

| é …ç›® | KAMUI 4D | Miyabi (ç¾çŠ¶) | Miyabi (ç›®æ¨™) |
|-----|----------|--------------|--------------|
| **Worktreeç®¡ç†** | âœ… ã‚¿ã‚¹ã‚¯ã‚«ãƒ¼ãƒ‰é€£å‹• | âœ… Issueé€£å‹• | âœ… + å¯è¦–åŒ– |
| **Agentç®¡ç†** | âœ… 4ç¨®é¡çµ±ä¸€ç®¡ç† | âš ï¸ 21ç¨®é¡åˆ†æ•£ | âœ… çµ±ä¸€CLI |
| **å¯è¦–åŒ–** | âœ… 3D Force Graph | âŒ ãªã— | âœ… TUI + Web |
| **ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿** | âœ… JSONæ°¸ç¶šåŒ– | âš ï¸ ä¸€æ™‚çš„ | âœ… æ°¸ç¶šåŒ– |

## ğŸ¯ æˆåŠŸæ¡ä»¶

### Phase 1å®Œäº†æ¡ä»¶
- [ ] `.miyabi/tasks/*.json` ã§ã‚¿ã‚¹ã‚¯å±¥æ­´ãŒè¨˜éŒ²ã•ã‚Œã‚‹
- [ ] `miyabi agent list` ã§å…¨21å€‹ã®AgentãŒä¸€è¦§è¡¨ç¤ºã•ã‚Œã‚‹
- [ ] `miyabi agent config <name>` ã§è¨­å®šãŒç¢ºèªã§ãã‚‹
- [ ] WorktreeçŠ¶æ…‹ãŒæ­£ç¢ºã«è¿½è·¡ã•ã‚Œã‚‹

### Phase 2å®Œäº†æ¡ä»¶
- [ ] `miyabi status --tui` ã§WorktreeçŠ¶æ…‹ãŒè¦–è¦šçš„ã«è¡¨ç¤ºã•ã‚Œã‚‹
- [ ] Gitå±¥æ­´ã‚°ãƒ©ãƒ•ã§è¤‡æ•°ãƒ–ãƒ©ãƒ³ãƒãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] Agentå®Ÿè¡Œä¸­ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ãŒå‹•ä½œã™ã‚‹

### Phase 3å®Œäº†æ¡ä»¶
- [ ] KAMUI 4Dã¨é€£æºã—ã¦Miyabiã‚¿ã‚¹ã‚¯ãŒ3Dè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] Web Dashboardã§3Då¯è¦–åŒ–ãŒå‹•ä½œã™ã‚‹
- [ ] åŒæ–¹å‘ãƒ‡ãƒ¼ã‚¿åŒæœŸãŒæ­£å¸¸ã«æ©Ÿèƒ½ã™ã‚‹

## ğŸ“Š æœŸå¾…ã•ã‚Œã‚‹åŠ¹æœ

1. **é–‹ç™ºåŠ¹ç‡å‘ä¸Š**: WorktreeçŠ¶æ…‹ã®å¯è¦–åŒ–ã«ã‚ˆã‚Šä¸¦åˆ—ä½œæ¥­ãŒå®¹æ˜“ã«
2. **Agentç®¡ç†ã®åŠ¹ç‡åŒ–**: 21å€‹ã®Agentã‚’çµ±ä¸€çš„ã«ç®¡ç†
3. **å®Ÿè¡Œå±¥æ­´ã®è¿½è·¡**: ã‚¿ã‚¹ã‚¯ã®æˆåŠŸ/å¤±æ•—ã€å®Ÿè¡Œæ™‚é–“ã®è¨˜éŒ²
4. **ãƒãƒ¼ãƒ å”åƒã®æº–å‚™**: KAMUI 4Dé€£æºã§ãƒãƒ¼ãƒ ä½œæ¥­ã®åŸºç›¤

## ğŸ”„ Dependencies

ã“ã®Epicã¯ä»¥ä¸‹ã®æ—¢å­˜Issueã¨é–¢é€£ã—ã¾ã™ï¼š

- Worktreeç®¡ç†ã®æ—¢å­˜å®Ÿè£…
- Agentå®Ÿè£…ï¼ˆ21å€‹ï¼‰
- `.ai/logs/` ãƒ­ã‚®ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ 

## ğŸ“ Notes

- **æ®µéšçš„å®Ÿè£…**: Phase 1 â†’ Phase 2 â†’ Phase 3 ã®é †ã§å®Ÿè£…
- **å¾Œæ–¹äº’æ›æ€§**: æ—¢å­˜ã®CLIæ©Ÿèƒ½ã¯ç¶­æŒ
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: TUIè¡¨ç¤ºã§ã‚‚ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’é‡è¦–
- **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: å„Phaseå®Œäº†æ™‚ã«ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°

---

ğŸ¤– Generated with [Claude Code](https://claude.com/claude-code)

### 3. Add tests for #612

- **ID**: `task-612-test`
- **Type**: Test
- **Assigned Agent**: CodeGenAgent
- **Priority**: 2
- **Estimated Duration**: 15 min
- **Dependencies**: task-612-impl

**Description**: Create comprehensive test coverage

### 4. Review code quality for #612

- **ID**: `task-612-review`
- **Type**: Refactor
- **Assigned Agent**: ReviewAgent
- **Priority**: 3
- **Estimated Duration**: 10 min
- **Dependencies**: task-612-test

**Description**: Run quality checks and code review

## ğŸ”„ Execution Plan (DAG Levels)

Tasks can be executed in parallel within each level:

### Level 0 (Parallel Execution)

- `task-612-analysis` - Analyze requirements for #612

### Level 1 (Parallel Execution)

- `task-612-impl` - Implement solution for #612

### Level 2 (Parallel Execution)

- `task-612-test` - Add tests for #612

### Level 3 (Parallel Execution)

- `task-612-review` - Review code quality for #612

## ğŸ“Š Dependency Graph

```mermaid
graph TD
    task_612_analysis["Analyze requirements for #612"]
    task_612_impl["Implement solution for #612"]
    task_612_test["Add tests for #612"]
    task_612_review["Review code quality for #612"]
    task_612_analysis --> task_612_impl
    task_612_impl --> task_612_test
    task_612_test --> task_612_review
```

## â±ï¸ Timeline Estimation

- **Sequential Execution**: 60 minutes (1.0 hours)
- **Parallel Execution (Critical Path)**: 10 minutes (0.2 hours)
- **Estimated Speedup**: 6.0x

---

*Generated by CoordinatorAgent on 2025-11-01 10:43:46 UTC*

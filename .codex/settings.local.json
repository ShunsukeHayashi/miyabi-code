{
  "hooks": {
    "PostToolUse": [
      {
        "hooks": [
          {
            "type": "command",
            "command": ".codex/hooks/tool-use.sh",
            "timeout": 5
          }
        ]
      }
    ],
    "SessionStart": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "tools/session_start_narration.sh",
            "timeout": 5
          },
          {
            "type": "command",
            "command": ".codex/hooks/session-start.sh",
            "timeout": 5
          }
        ]
      }
    ],
    "Notification": [
      {
        "hooks": [
          {
            "type": "command",
            "command": ".codex/hooks/notification.sh",
            "timeout": 10
          }
        ]
      }
    ]
  },
  "env": {
    "VOICEVOX_NARRATION_ENABLED": "true",
    "VOICEVOX_SPEAKER": "3",
    "VOICEVOX_SPEED": "1.2",
    "VOICEVOX_ENQUEUE": "tools/voicevox_enqueue.sh"
  },
  "permissions": {
    "allow": [
      "Read(//Users/shunsuke/.miyabi/**)",
      "Bash(cat:*)",
      "Read(//Users/shunsuke/Library/Logs/**)",
      "Read(//Users/shunsuke/Library/**)",
      "Bash(cargo --version:*)",
      "Bash(rustc:*)",
      "Bash(system_profiler:*)",
      "Bash(cargo build:*)",
      "Bash(kill:*)",
      "Bash(gh issue list:*)",
      "Bash(gh issue view:*)",
      "Bash(cargo clippy:*)",
      "Bash(cargo test:*)",
      "Bash(git add:*)",
      "Bash(git commit -m \"$(cat <<''EOF''\nfix(miyabi-core): eliminate memory leak in logger.rs using OnceCell\n\nReplace `mem::forget` with proper WorkerGuard lifetime management.\n\n## Changes\n- Add `once_cell = \"1.19\"` dependency to miyabi-core\n- Introduce `LOGGER_GUARD: OnceCell<WorkerGuard>` global static\n- Replace 3x `std::mem::forget(_guard)` with `LOGGER_GUARD.set(guard)`\n- Update comments to explain lifetime management\n\n## Impact\n- âœ… Eliminates clippy::mem_forget warnings\n- âœ… Proper WorkerGuard lifecycle management\n- âœ… All tests pass (10/10 logger tests)\n- âœ… No breaking API changes\n\n## Testing\n```\ncargo clippy --package miyabi-core -- -W clippy::mem_forget  # âœ… Pass\ncargo test --package miyabi-core --lib logger                # âœ… 10/10 Pass\n```\n\nFixes #355\n\nðŸ¤– Generated with [Codex](https://claude.com/claude-code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(gh issue close:*)",
      "Bash(git rm:*)",
      "Bash(git commit:*)",
      "Bash(git reset:*)",
      "Bash(gh api:*)",
      "Bash(cargo fix:*)",
      "Bash(gh issue create:*)",
      "Bash(gh label list:*)",
      "Bash(gh issue comment 360 --body \"$(cat <<''EOF''\n## ðŸ”— å…¬é–‹ãƒªãƒã‚¸ãƒˆãƒªåŒæœŸ\n\nã“ã®Issueã¯å…¬é–‹ãƒªãƒã‚¸ãƒˆãƒªã«åŒæœŸã•ã‚Œã¾ã—ãŸï¼š\n**Public Issue**: https://github.com/ShunsukeHayashi/Miyabi/issues/164\n\nå…¬é–‹Issue #164ã§ã¯ã€ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‹ã‚‰ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã¨å”åŠ›ã‚’å—ã‘ä»˜ã‘ã¦ã„ã¾ã™ã€‚\nå®Ÿè£…ã®è©³ç´°ã¯ã“ã®ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆIssue #360ã§ç®¡ç†ã—ã¾ã™ã€‚\n\n---\n\n## âœ… æ—¢å­˜CI/CDç¢ºèªçµæžœ\n\n`.github/workflows/rust.yml`ã‚’ç¢ºèªã—ãŸçµæžœã€**Windows CI/CDã¯æ—¢ã«å®Ÿè£…æ¸ˆã¿**ã§ã—ãŸï¼š\n\n### å®Ÿè£…æ¸ˆã¿å†…å®¹\n1. **Test job (L109)**: `windows-latest`ã§ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ\n   ```yaml\n   matrix:\n     os: [ubuntu-latest, macos-latest, windows-latest]\n     rust: [stable, beta]\n   ```\n\n2. **Build job (L239)**: Windowså‘ã‘ãƒªãƒªãƒ¼ã‚¹ãƒã‚¤ãƒŠãƒªç”Ÿæˆ\n   ```yaml\n   matrix:\n     include:\n       - os: windows-latest\n         target: x86_64-pc-windows-msvc\n   ```\n\n3. **Artifact upload (L270)**: `miyabi.exe`ã®è‡ªå‹•ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰\n\n### æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—\nWindows CI/CDã¯æ—¢ã«å‹•ä½œã—ã¦ã„ã‚‹ãŸã‚ã€æ¬¡ã®ãƒ•ã‚§ãƒ¼ã‚ºã«é€²ã‚ã¾ã™ï¼š\n- [ ] Phase 2: Path Handlingï¼ˆPathBufå®Œå…¨ç§»è¡Œï¼‰\n- [ ] Phase 3: Environment Variablesï¼ˆdirs crateçµ±åˆï¼‰\n- [ ] Phase 4: å®Ÿç’°å¢ƒãƒ†ã‚¹ãƒˆ\n\nðŸ¤– Generated with [Codex](https://claude.com/claude-code)\nEOF\n)\")",
      "Bash(gh issue comment:*)",
      "Bash(gh issue edit:*)",
      "Bash(find:*)",
      "Bash(tree:*)",
      "Bash(git push:*)",
      "Bash(git pull:*)",
      "Bash(git rebase:*)",
      "Bash(git diff:*)",
      "Bash(git checkout:*)",
      "Skill(agent-execution)",
      "Bash(git stash:*)",
      "Bash(git stash pop:*)"
    ],
    "deny": [],
    "ask": []
  }
}

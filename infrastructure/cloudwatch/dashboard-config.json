{
  "DashboardName": "Miyabi-API-Dashboard",
  "DashboardBody": {
    "widgets": [
      {
        "type": "metric",
        "x": 0,
        "y": 0,
        "width": 12,
        "height": 6,
        "properties": {
          "title": "API Response Time (P95)",
          "metrics": [
            ["Miyabi/API", "ResponseTime", "Endpoint", "health", {"stat": "p95"}],
            ["...", "dashboard", {"stat": "p95"}],
            ["...", "agents", {"stat": "p95"}],
            ["...", "tasks", {"stat": "p95"}],
            ["...", "organizations", {"stat": "p95"}]
          ],
          "view": "timeSeries",
          "stacked": false,
          "region": "ap-northeast-1",
          "period": 60
        }
      },
      {
        "type": "metric",
        "x": 12,
        "y": 0,
        "width": 12,
        "height": 6,
        "properties": {
          "title": "Request Count",
          "metrics": [
            ["Miyabi/API", "RequestCount", {"stat": "Sum"}]
          ],
          "view": "timeSeries",
          "stacked": false,
          "region": "ap-northeast-1",
          "period": 60
        }
      },
      {
        "type": "metric",
        "x": 0,
        "y": 6,
        "width": 12,
        "height": 6,
        "properties": {
          "title": "Error Rate",
          "metrics": [
            ["Miyabi/API", "ErrorRate", {"stat": "Average"}],
            ["...", "5xxErrors", {"stat": "Sum"}],
            ["...", "4xxErrors", {"stat": "Sum"}]
          ],
          "view": "timeSeries",
          "stacked": false,
          "region": "ap-northeast-1",
          "period": 60
        }
      },
      {
        "type": "metric",
        "x": 12,
        "y": 6,
        "width": 12,
        "height": 6,
        "properties": {
          "title": "Database Connections",
          "metrics": [
            ["Miyabi/Database", "ActiveConnections", {"stat": "Average"}],
            ["...", "IdleConnections", {"stat": "Average"}],
            ["...", "MaxConnections", {"stat": "Maximum"}]
          ],
          "view": "timeSeries",
          "stacked": false,
          "region": "ap-northeast-1",
          "period": 60
        }
      },
      {
        "type": "metric",
        "x": 0,
        "y": 12,
        "width": 8,
        "height": 6,
        "properties": {
          "title": "Lambda Invocations",
          "metrics": [
            ["AWS/Lambda", "Invocations", "FunctionName", "miyabi-api-production", {"stat": "Sum"}],
            ["...", "miyabi-api-staging", {"stat": "Sum"}]
          ],
          "view": "timeSeries",
          "stacked": false,
          "region": "ap-northeast-1",
          "period": 60
        }
      },
      {
        "type": "metric",
        "x": 8,
        "y": 12,
        "width": 8,
        "height": 6,
        "properties": {
          "title": "Lambda Duration",
          "metrics": [
            ["AWS/Lambda", "Duration", "FunctionName", "miyabi-api-production", {"stat": "p95"}],
            ["...", "miyabi-api-staging", {"stat": "p95"}]
          ],
          "view": "timeSeries",
          "stacked": false,
          "region": "ap-northeast-1",
          "period": 60
        }
      },
      {
        "type": "metric",
        "x": 16,
        "y": 12,
        "width": 8,
        "height": 6,
        "properties": {
          "title": "Lambda Errors",
          "metrics": [
            ["AWS/Lambda", "Errors", "FunctionName", "miyabi-api-production", {"stat": "Sum"}],
            ["...", "miyabi-api-staging", {"stat": "Sum"}]
          ],
          "view": "timeSeries",
          "stacked": false,
          "region": "ap-northeast-1",
          "period": 60
        }
      },
      {
        "type": "metric",
        "x": 0,
        "y": 18,
        "width": 12,
        "height": 6,
        "properties": {
          "title": "RDS Performance",
          "metrics": [
            ["AWS/RDS", "CPUUtilization", "DBInstanceIdentifier", "miyabi-db", {"stat": "Average"}],
            ["...", "FreeableMemory", {"stat": "Average"}],
            ["...", "DatabaseConnections", {"stat": "Average"}]
          ],
          "view": "timeSeries",
          "stacked": false,
          "region": "ap-northeast-1",
          "period": 60
        }
      },
      {
        "type": "metric",
        "x": 12,
        "y": 18,
        "width": 12,
        "height": 6,
        "properties": {
          "title": "API Gateway Metrics",
          "metrics": [
            ["AWS/ApiGateway", "Count", "ApiName", "miyabi-api", {"stat": "Sum"}],
            ["...", "4XXError", {"stat": "Sum"}],
            ["...", "5XXError", {"stat": "Sum"}],
            ["...", "Latency", {"stat": "p95"}]
          ],
          "view": "timeSeries",
          "stacked": false,
          "region": "ap-northeast-1",
          "period": 60
        }
      }
    ]
  }
}

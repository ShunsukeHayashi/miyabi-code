{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.224.0"},"children":{"MiyabiLineBotStack":{"id":"MiyabiLineBotStack","path":"MiyabiLineBotStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.224.0"},"children":{"ConversationHistory":{"id":"ConversationHistory","path":"MiyabiLineBotStack/ConversationHistory","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.224.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MiyabiLineBotStack/ConversationHistory/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"userId","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"userId","keyType":"HASH"}],"tableName":"miyabi-line-conversations","timeToLiveSpecification":{"attributeName":"ttl","enabled":true}}}},"ScalingRole":{"id":"ScalingRole","path":"MiyabiLineBotStack/ConversationHistory/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.224.0","metadata":[]}}}},"LineUsers":{"id":"LineUsers","path":"MiyabiLineBotStack/LineUsers","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.224.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MiyabiLineBotStack/LineUsers/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"userId","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"userId","keyType":"HASH"}],"tableName":"miyabi-line-users","timeToLiveSpecification":{"attributeName":"ttl","enabled":true}}}},"ScalingRole":{"id":"ScalingRole","path":"MiyabiLineBotStack/LineUsers/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.224.0","metadata":[]}}}},"LineBotFunction":{"id":"LineBotFunction","path":"MiyabiLineBotStack/LineBotFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.224.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"MiyabiLineBotStack/LineBotFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.224.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"MiyabiLineBotStack/LineBotFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.224.0","metadata":[]}},"Resource":{"id":"Resource","path":"MiyabiLineBotStack/LineBotFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"MiyabiLineBotStack/LineBotFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.224.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MiyabiLineBotStack/LineBotFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ConversationHistoryD9612A4F","Arn"]},{"Ref":"AWS::NoValue"}]},{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["LineUsers9A7E8EC6","Arn"]},{"Ref":"AWS::NoValue"}]}],"Version":"2012-10-17"},"policyName":"LineBotFunctionServiceRoleDefaultPolicyEAD3FB79","roles":[{"Ref":"LineBotFunctionServiceRoleC25576F8"}]}}}}}}},"Code":{"id":"Code","path":"MiyabiLineBotStack/LineBotFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.224.0"},"children":{"Stage":{"id":"Stage","path":"MiyabiLineBotStack/LineBotFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.224.0"}},"AssetBucket":{"id":"AssetBucket","path":"MiyabiLineBotStack/LineBotFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.224.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"MiyabiLineBotStack/LineBotFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"architectures":["arm64"],"code":{"s3Bucket":"cdk-hnb659fds-assets-112530848482-us-west-2","s3Key":"ca63c5559080a52c032f20e60c431a0c29e7f837f2d0c3acd05bd901425840b9.zip"},"environment":{"variables":{"LINE_CHANNEL_ACCESS_TOKEN":"","ANTHROPIC_API_KEY":"","DYNAMODB_TABLE_NAME":{"Ref":"ConversationHistoryD9612A4F"},"RUST_LOG":"info","LINE_CHANNEL_ID":"","LINE_CHANNEL_SECRET":"","LINE_CALLBACK_URL":"https://l7qte1iuk7.execute-api.us-west-2.amazonaws.com/prod/auth/callback","JWT_SECRET":"CHANGE_ME_b93ro0z221j","APP_REDIRECT_URL":"https://miyabi.customercloud.ai/","USERS_TABLE_NAME":{"Ref":"LineUsers9A7E8EC6"}}},"functionName":"miyabi-line-bot","handler":"bootstrap","memorySize":256,"role":{"Fn::GetAtt":["LineBotFunctionServiceRoleC25576F8","Arn"]},"runtime":"provided.al2023","timeout":30}}},"LogRetention":{"id":"LogRetention","path":"MiyabiLineBotStack/LineBotFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.224.0"},"children":{"Resource":{"id":"Resource","path":"MiyabiLineBotStack/LineBotFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.224.0"}}}},"LogGroup":{"id":"LogGroup","path":"MiyabiLineBotStack/LineBotFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.224.0","metadata":[]}}}},"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a":{"id":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a","path":"MiyabiLineBotStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Code":{"id":"Code","path":"MiyabiLineBotStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.224.0"},"children":{"Stage":{"id":"Stage","path":"MiyabiLineBotStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.224.0"}},"AssetBucket":{"id":"AssetBucket","path":"MiyabiLineBotStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.224.0","metadata":[]}}}},"ServiceRole":{"id":"ServiceRole","path":"MiyabiLineBotStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.224.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"MiyabiLineBotStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.224.0","metadata":[]}},"Resource":{"id":"Resource","path":"MiyabiLineBotStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"MiyabiLineBotStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.224.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MiyabiLineBotStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:PutRetentionPolicy","logs:DeleteRetentionPolicy"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB","roles":[{"Ref":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB"}]}}}}}}},"Resource":{"id":"Resource","path":"MiyabiLineBotStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.224.0"}}}},"LineBotApi":{"id":"LineBotApi","path":"MiyabiLineBotStack/LineBotApi","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.RestApi","version":"2.224.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MiyabiLineBotStack/LineBotApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnRestApi","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::RestApi","aws:cdk:cloudformation:props":{"description":"API Gateway for MIYABI LINE Bot webhook and LINE Login","name":"miyabi-line-bot-api"}}},"CloudWatchRole":{"id":"CloudWatchRole","path":"MiyabiLineBotStack/LineBotApi/CloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.224.0","metadata":[]},"children":{"ImportCloudWatchRole":{"id":"ImportCloudWatchRole","path":"MiyabiLineBotStack/LineBotApi/CloudWatchRole/ImportCloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.224.0","metadata":[]}},"Resource":{"id":"Resource","path":"MiyabiLineBotStack/LineBotApi/CloudWatchRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"apigateway.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs"]]}]}}}}},"Account":{"id":"Account","path":"MiyabiLineBotStack/LineBotApi/Account","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnAccount","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Account","aws:cdk:cloudformation:props":{"cloudWatchRoleArn":{"Fn::GetAtt":["LineBotApiCloudWatchRoleA9E0EA1C","Arn"]}}}},"Deployment":{"id":"Deployment","path":"MiyabiLineBotStack/LineBotApi/Deployment","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Deployment","version":"2.224.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MiyabiLineBotStack/LineBotApi/Deployment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnDeployment","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Deployment","aws:cdk:cloudformation:props":{"description":"API Gateway for MIYABI LINE Bot webhook and LINE Login","restApiId":{"Ref":"LineBotApi541032A3"}}}}}},"DeploymentStage.prod":{"id":"DeploymentStage.prod","path":"MiyabiLineBotStack/LineBotApi/DeploymentStage.prod","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Stage","version":"2.224.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MiyabiLineBotStack/LineBotApi/DeploymentStage.prod/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnStage","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Stage","aws:cdk:cloudformation:props":{"deploymentId":{"Ref":"LineBotApiDeployment23FEF956ce0ed0b2062dbae88485a955496bbac0"},"methodSettings":[{"httpMethod":"*","resourcePath":"/*","dataTraceEnabled":false,"throttlingBurstLimit":20,"throttlingRateLimit":10}],"restApiId":{"Ref":"LineBotApi541032A3"},"stageName":"prod"}}}}},"Endpoint":{"id":"Endpoint","path":"MiyabiLineBotStack/LineBotApi/Endpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.224.0"}},"Default":{"id":"Default","path":"MiyabiLineBotStack/LineBotApi/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.ResourceBase","version":"2.224.0","metadata":[]},"children":{"webhook":{"id":"webhook","path":"MiyabiLineBotStack/LineBotApi/Default/webhook","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.224.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MiyabiLineBotStack/LineBotApi/Default/webhook/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["LineBotApi541032A3","RootResourceId"]},"pathPart":"webhook","restApiId":{"Ref":"LineBotApi541032A3"}}}},"POST":{"id":"POST","path":"MiyabiLineBotStack/LineBotApi/Default/webhook/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.224.0","metadata":[]},"children":{"ApiPermission.MiyabiLineBotStackLineBotApi8558BE7F.POST..webhook":{"id":"ApiPermission.MiyabiLineBotStackLineBotApi8558BE7F.POST..webhook","path":"MiyabiLineBotStack/LineBotApi/Default/webhook/POST/ApiPermission.MiyabiLineBotStackLineBotApi8558BE7F.POST..webhook","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LineBotFunction6287B7FE","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-west-2:112530848482:",{"Ref":"LineBotApi541032A3"},"/",{"Ref":"LineBotApiDeploymentStageprod510D3E32"},"/POST/webhook"]]}}}},"ApiPermission.Test.MiyabiLineBotStackLineBotApi8558BE7F.POST..webhook":{"id":"ApiPermission.Test.MiyabiLineBotStackLineBotApi8558BE7F.POST..webhook","path":"MiyabiLineBotStack/LineBotApi/Default/webhook/POST/ApiPermission.Test.MiyabiLineBotStackLineBotApi8558BE7F.POST..webhook","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LineBotFunction6287B7FE","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-west-2:112530848482:",{"Ref":"LineBotApi541032A3"},"/test-invoke-stage/POST/webhook"]]}}}},"Resource":{"id":"Resource","path":"MiyabiLineBotStack/LineBotApi/Default/webhook/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:us-west-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["LineBotFunction6287B7FE","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"LineBotApiwebhookE1D7CE30"},"restApiId":{"Ref":"LineBotApi541032A3"}}}}}}}},"auth":{"id":"auth","path":"MiyabiLineBotStack/LineBotApi/Default/auth","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.224.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MiyabiLineBotStack/LineBotApi/Default/auth/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["LineBotApi541032A3","RootResourceId"]},"pathPart":"auth","restApiId":{"Ref":"LineBotApi541032A3"}}}},"line":{"id":"line","path":"MiyabiLineBotStack/LineBotApi/Default/auth/line","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.224.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MiyabiLineBotStack/LineBotApi/Default/auth/line/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"LineBotApiauth578F5BA0"},"pathPart":"line","restApiId":{"Ref":"LineBotApi541032A3"}}}},"GET":{"id":"GET","path":"MiyabiLineBotStack/LineBotApi/Default/auth/line/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.224.0","metadata":[]},"children":{"ApiPermission.MiyabiLineBotStackLineBotApi8558BE7F.GET..auth.line":{"id":"ApiPermission.MiyabiLineBotStackLineBotApi8558BE7F.GET..auth.line","path":"MiyabiLineBotStack/LineBotApi/Default/auth/line/GET/ApiPermission.MiyabiLineBotStackLineBotApi8558BE7F.GET..auth.line","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LineBotFunction6287B7FE","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-west-2:112530848482:",{"Ref":"LineBotApi541032A3"},"/",{"Ref":"LineBotApiDeploymentStageprod510D3E32"},"/GET/auth/line"]]}}}},"ApiPermission.Test.MiyabiLineBotStackLineBotApi8558BE7F.GET..auth.line":{"id":"ApiPermission.Test.MiyabiLineBotStackLineBotApi8558BE7F.GET..auth.line","path":"MiyabiLineBotStack/LineBotApi/Default/auth/line/GET/ApiPermission.Test.MiyabiLineBotStackLineBotApi8558BE7F.GET..auth.line","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LineBotFunction6287B7FE","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-west-2:112530848482:",{"Ref":"LineBotApi541032A3"},"/test-invoke-stage/GET/auth/line"]]}}}},"Resource":{"id":"Resource","path":"MiyabiLineBotStack/LineBotApi/Default/auth/line/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:us-west-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["LineBotFunction6287B7FE","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"LineBotApiauthline5D071A20"},"restApiId":{"Ref":"LineBotApi541032A3"}}}}}}}},"callback":{"id":"callback","path":"MiyabiLineBotStack/LineBotApi/Default/auth/callback","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.224.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MiyabiLineBotStack/LineBotApi/Default/auth/callback/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"LineBotApiauth578F5BA0"},"pathPart":"callback","restApiId":{"Ref":"LineBotApi541032A3"}}}},"GET":{"id":"GET","path":"MiyabiLineBotStack/LineBotApi/Default/auth/callback/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.224.0","metadata":[]},"children":{"ApiPermission.MiyabiLineBotStackLineBotApi8558BE7F.GET..auth.callback":{"id":"ApiPermission.MiyabiLineBotStackLineBotApi8558BE7F.GET..auth.callback","path":"MiyabiLineBotStack/LineBotApi/Default/auth/callback/GET/ApiPermission.MiyabiLineBotStackLineBotApi8558BE7F.GET..auth.callback","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LineBotFunction6287B7FE","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-west-2:112530848482:",{"Ref":"LineBotApi541032A3"},"/",{"Ref":"LineBotApiDeploymentStageprod510D3E32"},"/GET/auth/callback"]]}}}},"ApiPermission.Test.MiyabiLineBotStackLineBotApi8558BE7F.GET..auth.callback":{"id":"ApiPermission.Test.MiyabiLineBotStackLineBotApi8558BE7F.GET..auth.callback","path":"MiyabiLineBotStack/LineBotApi/Default/auth/callback/GET/ApiPermission.Test.MiyabiLineBotStackLineBotApi8558BE7F.GET..auth.callback","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LineBotFunction6287B7FE","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-west-2:112530848482:",{"Ref":"LineBotApi541032A3"},"/test-invoke-stage/GET/auth/callback"]]}}}},"Resource":{"id":"Resource","path":"MiyabiLineBotStack/LineBotApi/Default/auth/callback/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:us-west-2:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["LineBotFunction6287B7FE","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"LineBotApiauthcallback70F61B06"},"restApiId":{"Ref":"LineBotApi541032A3"}}}}}}}}}}}}}},"ApiUrl":{"id":"ApiUrl","path":"MiyabiLineBotStack/ApiUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.224.0"}},"WebhookUrl":{"id":"WebhookUrl","path":"MiyabiLineBotStack/WebhookUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.224.0"}},"LineLoginUrl":{"id":"LineLoginUrl","path":"MiyabiLineBotStack/LineLoginUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.224.0"}},"LineCallbackUrl":{"id":"LineCallbackUrl","path":"MiyabiLineBotStack/LineCallbackUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.224.0"}},"LambdaFunctionName":{"id":"LambdaFunctionName","path":"MiyabiLineBotStack/LambdaFunctionName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.224.0"}},"ConversationsTableName":{"id":"ConversationsTableName","path":"MiyabiLineBotStack/ConversationsTableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.224.0"}},"UsersTableName":{"id":"UsersTableName","path":"MiyabiLineBotStack/UsersTableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.224.0"}},"JwtSecret":{"id":"JwtSecret","path":"MiyabiLineBotStack/JwtSecret","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.224.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"MiyabiLineBotStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"MiyabiLineBotStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.224.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"MiyabiLineBotStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.224.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"MiyabiLineBotStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.224.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"}}}}}
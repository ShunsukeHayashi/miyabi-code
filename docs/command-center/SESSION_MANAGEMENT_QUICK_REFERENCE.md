# 🎛️ Session Management Quick Reference
# Guardian用クイックコマンド集

**For**: Guardian (Shunsuke)  
**Purpose**: 日常的なセッション管理コマンド  
**Last Updated**: 2025-11-18

---

## 🚀 よく使うコマンド

### 📊 状態確認

```bash
# 全体状況の確認
"システム状態を確認"
"朝の状態確認"
"健全性チェックを実行"

# 特定セッション確認
"miyabiセッションの状態を確認"
"miyabi-orchestraの詳細を表示"
"socaiセッションのペイン一覧"

# CommHub確認
"CommHubの状態を確認"
"メッセージ集約状況を表示"
```

### 💬 メッセージ送信

```bash
# 特定ペインへ送信
"ペイン%50に「タスク開始」と送信"
"miyabi-orchestraのペイン%11に「レビュー完了」と送信"

# 全セッションへブロードキャスト
"全セッションに「緊急メンテナンス開始」とブロードキャスト"
"miyabi系セッションに「デプロイ準備完了」を通知"
```

### 🔍 ルール・検証

```bash
# ルール確認
"全てのMiyabiルールを表示"
"P0ルールのみ確認"

# タスク検証
"cargo buildを実行 をルール検証"
"本番デプロイを実行 をルール検証"

# コンテキスト取得
"agentsコンテキストを取得"
"worktreeドキュメントを表示"
```

### 🎯 タスク実行

```bash
# Agent実行
"カエデでIssue #123を実装"
"サクラでコードレビューを実行"
"みつけるんでIssueトリアージ"

# 複数タスク
"Issue #456, #457, #458を並列実行"
"全Agentの状態を確認してアイドルなAgentにタスク割り当て"
```

### 🚨 緊急対応

```bash
# 緊急停止
"全セッションの作業を一時停止"
"miyabi-orchestraを停止"

# 問題調査
"ペイン%45の問題を調査"
"応答ないセッションを特定"
"リソース使用状況を確認"

# 再起動
"miyabi-reconstructionセッションを再起動"
"CodeGenAgentを再起動"
```

---

## 📋 セッション別コマンド

### miyabi（開発・コーディング）

```bash
# 状態確認
"miyabiセッションの状態"
"miyabiの全ペインを表示"

# タスク実行
"miyabiでIssue #XXXを実装"
"miyabiのWorktree一覧"

# 問題対応
"miyabiのエラーログを確認"
"miyabiのメモリ使用量を確認"
```

### miyabi-orchestra（Agent orchestration）

```bash
# Agent状態確認
"オーケストラの全Agent状態"
"稼働中のAgent一覧"
"アイドルなAgentを特定"

# Agent操作
"カエデにタスクを割り当て"
"サクラのレビュー状態を確認"
"みつけるんを起動"

# 調整
"Agent間のメッセージフローを確認"
"タスクキューを表示"
```

### miyabi-reconstruction（リファクタリング）

```bash
# 状態確認
"リファクタリングセッションの進捗"
"現在のリファクタリングタスク"

# タスク実行
"モジュールXをリファクタリング"
"コード品質チェックを実行"
```

### miyabi-apex-deploy（デプロイメント）

```bash
# デプロイ状況
"デプロイセッションの状態"
"デプロイ待ちのブランチ一覧"

# デプロイ実行（要承認）
"staging環境にデプロイ"
"本番環境にデプロイ（承認後）"

# ロールバック
"前回のデプロイをロールバック"
```

### socai（ソーシャル/ビジネス）

```bash
# 状態確認
"socaiセッションの状態"
"socaiのタスク一覧"

# タスク実行
"socaiでマーケティングコンテンツ作成"
"socaiでSNS投稿を生成"

# 連携
"miyabiからsocaiに成果物を同期"
"socaiの最新状態をmiyabiに反映"
```

---

## 🎯 シナリオ別コマンド

### 朝のルーティン

```bash
1. "おはよう。システム状態を確認"
2. "未完了タスクを表示"
3. "今日の推奨タスクを提示"
4. "優先度の高いIssueを確認"
```

### 新規タスク開始

```bash
1. "Issue #XXXの実装準備"
2. "ルール検証を実行"
3. "必要なAgentの状態を確認"
4. "カエデでIssue #XXXを開始"
5. "進捗を定期報告"
```

### コードレビュー

```bash
1. "レビュー待ちのPR一覧"
2. "サクラでPR #XXをレビュー"
3. "レビュー結果を確認"
4. "問題があればカエデに差し戻し"
```

### デプロイ

```bash
1. "デプロイ準備完了を確認"
2. "staging環境にデプロイ（テスト）"
3. "テスト結果を確認"
4. "本番環境にデプロイ（承認後）"
5. "デプロイ完了を全セッションに通知"
```

### 問題発生時

```bash
1. "エラーの詳細を確認"
2. "影響範囲を特定"
3. "原因を調査"
4. "解決策を提示"
5. "承認後、修正を実行"
6. "再発防止策を記録"
```

### 夕方のまとめ

```bash
1. "今日の完了タスク一覧"
2. "未完了タスクの状態"
3. "明日の推奨タスク"
4. "システム健全性チェック"
5. "問題があれば明日の対応計画"
```

---

## 🔄 連携コマンド

### miyabi ↔ socai 連携

```bash
# miyabi → socai
"miyabiの実装成果物をsocaiに反映"
"開発完了をsocaiに通知"

# socai → miyabi
"socaiのビジネス要件をmiyabiに伝達"
"顧客フィードバックをmiyabiに反映"

# 双方向同期
"miyabiとsocaiの状態を同期"
"両セッション間でコンテキスト共有"
```

### CommHub経由の集約

```bash
# メッセージ集約
"CommHubで全セッションのメッセージを集約"
"過去1時間のメッセージを表示"

# イベントログ
"CommHubのイベントログを確認"
"重要イベントのみフィルタ"
```

---

## 📊 レポート・分析

### 日次レポート

```bash
"今日の日次レポートを作成"
"完了タスク数と残タスク数"
"Agent稼働時間"
"問題発生回数と解決状況"
```

### 週次レポート

```bash
"週次レポートを作成"
"今週の完了Issue一覧"
"Agent別生産性"
"セッション稼働率"
"改善提案"
```

### カスタム分析

```bash
"過去1週間のエラー傾向を分析"
"カエデの実装速度を計測"
"デプロイ成功率を算出"
```

---

## 🛠️ メンテナンス

### 定期メンテナンス

```bash
# 日次
"日次メンテナンスを実行"
"ログローテーション"
"一時ファイル削除"

# 週次
"週次メンテナンスを実行"
"セッション最適化"
"Worktreeクリーンアップ"
```

### バックアップ・リストア

```bash
# バックアップ
"現在の状態をバックアップ"
"重要セッションのみバックアップ"

# リストア
"最新バックアップからリストア"
"特定セッションのみリストア"
```

---

## 🎨 カスタマイズ

### 独自コマンド定義

Guardian独自のコマンドを定義できます：

```bash
# 例: 朝のルーティン
"モーニングチェック" → 
  システム状態確認 + 
  未完了タスク表示 + 
  推奨タスク提示

# 例: 実装フロー
"実装開始 #XXX" →
  ルール検証 + 
  Agent確認 + 
  Worktree準備 + 
  タスク割り当て

# 例: デプロイフロー
"フルデプロイ" →
  テスト実行 + 
  staging確認 + 
  本番デプロイ + 
  通知送信
```

Operatorに「このコマンドを定義して」と指示すれば、カスタムコマンドとして記憶されます。

---

## 💡 ヒント

### 効率的な指示方法

✅ **良い例**:
- "miyabiセッションの状態を確認"（具体的）
- "カエデでIssue #123を実装"（明確）
- "全セッションに緊急停止を通知"（目的が明瞭）

❌ **避けるべき例**:
- "何かやって"（不明確）
- "いい感じにして"（曖昧）
- "あれを確認"（指示語のみ）

### 承認が必要な操作

以下は必ず明示的に承認：

- 🔴 本番デプロイ
- 🔴 データ削除
- 🔴 セッション削除
- 🔴 外部公開
- 🔴 大量リソース消費

Operatorが「承認してよろしいですか？」と聞いてきたら、必ず確認してから承認してください。

### トラブル時の対応

```bash
1. "何が起きている？" → 状況確認
2. "原因は？" → 原因調査
3. "どうすればいい？" → 解決策提示
4. "実行して" → 承認後実行
5. "結果は？" → 結果確認
```

---

## 📞 Lark通知連携（オプション）

外部通知が必要な場合：

```bash
# Larkにメッセージ送信
"Larkで「デプロイ完了」を通知"
"チームにIssue #XXX完了を報告"

# 緊急通知
"緊急: システムエラーをLarkで通知"
```

---

## 🔗 関連ドキュメント

- **統合プロトコル**: GUARDIAN_OPERATOR_INTEGRATION.md
- **カスタムインストラクション**: PROJECT_CUSTOM_INSTRUCTIONS.md
- **使い方ガイド**: 完全版使い方ガイド.md
- **CLAUDE.md**: Miyabi基本ルール

---

## ✅ まとめ

このクイックリファレンスを使って：

1. 📊 いつでも状態確認
2. 💬 効率的にメッセージ送信
3. 🎯 スムーズにタスク実行
4. 🚨 迅速に問題対応
5. 📋 定期的にレポート確認

**自然言語で指示するだけで、Operatorが適切に実行します。**

何か困ったら「これどうすればいい？」と聞いてください！

# Miyabi v1.1.0 Roadmap ğŸ—ºï¸

**Target Release Date**: 2025-11-30
**Status**: Planning Phase
**Priority**: High

---

## ğŸ¯ Executive Summary

Miyabi v1.1.0 is the first major feature release after the v1.0.0 production release. This version focuses on **expanding Business Agent capabilities**, **improving developer experience**, and **enhancing cross-platform support**.

### Key Goals

1. **Business Agents Implementation** - Complete 14 Business Agents for SaaS operations
2. **Enhanced Error Messages** - AI-powered error suggestions and recovery
3. **Cross-Platform Binaries** - Linux, Windows, macOS (Intel + ARM)
4. **Performance Profiling** - Built-in profiling tools and optimization
5. **VS Code Extension** - IDE integration for Miyabi CLI

---

## ğŸ“Š Feature Breakdown

### 1. Business Agents (14 Agents) ğŸ¯ **PRIORITY: CRITICAL**

**Goal**: Complete the Business Agent ecosystem to enable full SaaS business automation.

#### Strategy & Planning Agents (6 Agents)

| Agent | Status | Description | Estimated LOC |
|-------|--------|-------------|---------------|
| **AIEntrepreneurAgent** | ğŸ“ Spec Complete | 8-phase business plan generation | 800 |
| **ProductConceptAgent** | ğŸ“ Spec Complete | Product idea validation & concept design | 600 |
| **ProductDesignAgent** | ğŸ“ Spec Complete | UI/UX design + wireframing | 700 |
| **FunnelDesignAgent** | ğŸ“ Spec Complete | Marketing funnel optimization | 650 |
| **PersonaAgent** | ğŸ“ Spec Complete | Customer persona generation | 550 |
| **SelfAnalysisAgent** | ğŸ“ Spec Complete | Strength/weakness analysis | 500 |

**Total**: ~3,800 lines

#### Marketing Agents (5 Agents)

| Agent | Status | Description | Estimated LOC |
|-------|--------|-------------|---------------|
| **MarketResearchAgent** | ğŸ“ Spec Complete | Market analysis & competitor research | 750 |
| **MarketingAgent** | ğŸ“ Spec Complete | Marketing strategy generation | 700 |
| **ContentCreationAgent** | ğŸ“ Spec Complete | Blog/SNS content generation | 650 |
| **SNSStrategyAgent** | ğŸ“ Spec Complete | Social media campaign planning | 600 |
| **YouTubeAgent** | ğŸ“ Spec Complete | Video content planning & scripting | 550 |

**Total**: ~3,250 lines

#### Sales & Analytics Agents (3 Agents)

| Agent | Status | Description | Estimated LOC |
|-------|--------|-------------|---------------|
| **SalesAgent** | ğŸ“ Spec Complete | Sales strategy & lead generation | 700 |
| **CRMAgent** | ğŸ“ Spec Complete | Customer relationship management | 650 |
| **AnalyticsAgent** | ğŸ“ Spec Complete | Business metrics & KPI tracking | 600 |

**Total**: ~1,950 lines

#### Implementation Plan

**Phase 1: Foundation** (Week 1-2)
- âœ… Create `crates/miyabi-business-agents/` crate
- âœ… Define `BusinessAgent` trait (extends `BaseAgent`)
- âœ… Implement common utilities (Claude API client, data models)

**Phase 2: Strategy Agents** (Week 3-4)
- âœ… Implement 6 Strategy & Planning Agents
- âœ… Unit tests (80% coverage target)
- âœ… Integration tests with GitHub Issues

**Phase 3: Marketing Agents** (Week 5-6)
- âœ… Implement 5 Marketing Agents
- âœ… Unit tests + integration tests
- âœ… Claude Code slash commands

**Phase 4: Sales & Analytics** (Week 7-8)
- âœ… Implement 3 Sales & Analytics Agents
- âœ… E2E tests for full business workflow
- âœ… Documentation & examples

**Acceptance Criteria**:
- âœ… All 14 agents implemented and tested
- âœ… 80%+ test coverage
- âœ… Documentation for each agent
- âœ… At least 2 example business scenarios

---

### 2. Enhanced Error Messages with AI Suggestions ğŸ”§ **PRIORITY: HIGH**

**Goal**: Transform cryptic errors into actionable suggestions powered by AI.

#### Features

**2.1 Error Classification System**

```rust
pub enum ErrorSeverity {
    Info,        // FYI, no action needed
    Warning,     // Should fix, but not blocking
    Error,       // Blocks execution
    Critical,    // System-level failure
}

pub enum ErrorCategory {
    Configuration,    // .miyabi.yml issues
    Authentication,   // GitHub token problems
    Network,          // API unreachable
    Validation,       // Invalid input
    Runtime,          // Execution failures
}
```

**2.2 AI-Powered Suggestions**

```rust
pub struct EnhancedError {
    pub code: String,                    // E001, E002, etc.
    pub severity: ErrorSeverity,
    pub category: ErrorCategory,
    pub message: String,                 // Human-readable error
    pub context: HashMap<String, String>, // Additional context
    pub suggestion: Option<String>,      // AI-generated fix
    pub recovery_steps: Vec<String>,     // Step-by-step recovery
    pub related_docs: Vec<String>,       // Doc links
}
```

**2.3 Error Recovery System**

- Automatic retry with exponential backoff (already implemented in `miyabi-core`)
- Rollback mechanisms for failed deployments
- Safe mode for critical errors

#### Implementation Tasks

| Task | Estimated Time | Priority |
|------|----------------|----------|
| Design error taxonomy (100+ error codes) | 2 days | High |
| Implement `EnhancedError` type system | 3 days | High |
| Create AI suggestion generator (Claude API) | 4 days | High |
| Update all error sites with new system | 5 days | Medium |
| Add error telemetry (optional analytics) | 2 days | Low |
| Documentation & error catalog | 3 days | Medium |

**Total**: ~19 days (3.8 weeks)

**Acceptance Criteria**:
- âœ… 100+ categorized error codes
- âœ… AI suggestions for top 20 most common errors
- âœ… Error catalog documentation
- âœ… Telemetry opt-in system

---

### 3. Cross-Platform Binary Releases ğŸ“¦ **PRIORITY: HIGH**

**Goal**: Distribute pre-built binaries for all major platforms.

#### Target Platforms

| Platform | Architecture | Status | Binary Name |
|----------|-------------|--------|-------------|
| **Linux** | x86_64 | â³ TODO | `miyabi-linux-x86_64` |
| **Linux** | aarch64 | â³ TODO | `miyabi-linux-aarch64` |
| **macOS** | x86_64 (Intel) | â³ TODO | `miyabi-macos-x86_64` |
| **macOS** | aarch64 (Apple Silicon) | âœ… Current | `miyabi-macos-aarch64` |
| **Windows** | x86_64 | â³ TODO | `miyabi-windows-x86_64.exe` |
| **Android** | aarch64 (Termux) | âœ… Current | `miyabi-android-aarch64` |

#### GitHub Actions Workflow

```yaml
name: Release Binaries

on:
  release:
    types: [published]

jobs:
  build-matrix:
    strategy:
      matrix:
        include:
          - os: ubuntu-latest
            target: x86_64-unknown-linux-gnu
          - os: ubuntu-latest
            target: aarch64-unknown-linux-gnu
          - os: macos-latest
            target: x86_64-apple-darwin
          - os: macos-latest
            target: aarch64-apple-darwin
          - os: windows-latest
            target: x86_64-pc-windows-msvc
```

#### Implementation Tasks

| Task | Estimated Time | Priority |
|------|----------------|----------|
| Set up cross-compilation environment | 2 days | High |
| Create GitHub Actions release workflow | 3 days | High |
| Test binaries on all platforms | 3 days | Critical |
| Update installation docs | 1 day | Medium |
| Create auto-update mechanism (optional) | 4 days | Low |

**Total**: ~13 days (2.6 weeks)

**Acceptance Criteria**:
- âœ… Binaries for 6 platforms
- âœ… GitHub Actions auto-release
- âœ… Installation scripts for each platform
- âœ… Binary size < 15MB per platform

---

### 4. Performance Profiling & Optimization ğŸš€ **PRIORITY: MEDIUM**

**Goal**: Built-in profiling tools for identifying performance bottlenecks.

#### Features

**4.1 Built-in Profiler**

```bash
# Profile a command
miyabi profile agent coordinator --issue 270

# Output:
# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘  Performance Profile                 â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Total Time: 3.2s
# â”œâ”€ Issue fetch: 0.3s (9%)
# â”œâ”€ Task decomposition: 1.2s (38%)
# â”œâ”€ Code generation: 1.5s (47%)
# â””â”€ Quality review: 0.2s (6%)
```

**4.2 Flame Graph Generation**

- Export profiling data to `perf` format
- Generate SVG flame graphs
- Integrate with `cargo-flamegraph`

**4.3 Performance Benchmarks**

```bash
# Run benchmarks
miyabi bench

# Compare with baseline
miyabi bench --compare v1.0.0
```

#### Implementation Tasks

| Task | Estimated Time | Priority |
|------|----------------|----------|
| Integrate `tracing-flame` for flame graphs | 2 days | Medium |
| Create `miyabi profile` command | 3 days | Medium |
| Implement benchmark suite | 4 days | Medium |
| Create performance regression tests | 3 days | Low |
| Documentation & tutorials | 2 days | Medium |

**Total**: ~14 days (2.8 weeks)

**Acceptance Criteria**:
- âœ… `miyabi profile` command working
- âœ… Flame graph generation
- âœ… Benchmark suite with 10+ scenarios
- âœ… Performance documentation

---

### 5. VS Code Extension ğŸ–¥ï¸ **PRIORITY: LOW**

**Goal**: IDE integration for seamless Miyabi CLI usage within VS Code.

#### Features

**5.1 Core Features**

- **Command Palette**: Run Miyabi commands from VS Code
- **Status Bar**: Real-time Miyabi agent status
- **Issue Panel**: View and manage GitHub Issues
- **Terminal Integration**: Auto-spawn Miyabi terminal

**5.2 Extension Capabilities**

```json
{
  "contributes": {
    "commands": [
      "miyabi.init",
      "miyabi.status",
      "miyabi.runAgent",
      "miyabi.createPR"
    ],
    "views": {
      "miyabi-panel": [
        "miyabi.issuesView",
        "miyabi.agentsView",
        "miyabi.logsView"
      ]
    }
  }
}
```

#### Implementation Tasks

| Task | Estimated Time | Priority |
|------|----------------|----------|
| Set up VS Code extension project | 2 days | Low |
| Implement command palette integration | 3 days | Low |
| Create status bar widget | 2 days | Low |
| Build issue/agent panels | 5 days | Low |
| Publish to VS Code Marketplace | 1 day | Low |

**Total**: ~13 days (2.6 weeks)

**Acceptance Criteria**:
- âœ… Extension published to marketplace
- âœ… All core features working
- âœ… Extension documentation
- âœ… 100+ downloads in first month

---

## ğŸ“… Timeline & Milestones

### Milestone 1: Business Agents Complete (Week 8)
- âœ… All 14 Business Agents implemented
- âœ… 80%+ test coverage
- âœ… Documentation

### Milestone 2: Enhanced Errors & Cross-Platform (Week 14)
- âœ… AI-powered error suggestions
- âœ… 6 platform binaries released
- âœ… Installation scripts

### Milestone 3: Performance & VS Code (Week 18)
- âœ… Performance profiling tools
- âœ… VS Code extension beta
- âœ… Optimization complete

### Milestone 4: v1.1.0 Release (Week 20)
- âœ… All features complete
- âœ… Release notes finalized
- âœ… GitHub Release published

**Total Duration**: ~20 weeks (5 months)
**Target Release**: 2025-11-30

---

## ğŸ§ª Testing Strategy

### Unit Tests
- Target: 80%+ coverage for all new code
- Tools: `cargo test`, `insta` for snapshot testing

### Integration Tests
- Business Agent workflows
- Error recovery scenarios
- Cross-platform compatibility

### E2E Tests
- Complete business automation scenarios
- Multi-agent orchestration
- Performance benchmarks

### Manual Testing
- VS Code extension UX
- Binary installation on all platforms
- Error message clarity

---

## ğŸ“š Documentation Updates

### New Documentation

| Document | Description | Priority |
|----------|-------------|----------|
| `docs/BUSINESS_AGENTS_GUIDE.md` | Complete guide to 14 Business Agents | High |
| `docs/ERROR_CATALOG.md` | Comprehensive error code reference | High |
| `docs/INSTALLATION_GUIDE.md` | Platform-specific installation | High |
| `docs/PERFORMANCE_TUNING.md` | Profiling & optimization guide | Medium |
| `docs/VSCODE_EXTENSION.md` | VS Code extension user guide | Low |

### Updated Documentation

- `README.md` - Add v1.1.0 features
- `CHANGELOG.md` - Track all changes
- `CLAUDE.md` - Update agent count to 21
- `.claude/agents/README.md` - Add Business Agents

---

## ğŸ¯ Success Metrics

### Performance Metrics
- âœ… Business Agent execution < 30s
- âœ… Error suggestion generation < 1s
- âœ… Binary size < 15MB per platform

### Quality Metrics
- âœ… 80%+ test coverage
- âœ… 0 Clippy warnings
- âœ… 0 critical bugs in production

### Adoption Metrics
- âœ… 500+ downloads in first month
- âœ… VS Code extension 100+ installs
- âœ… 10+ GitHub stars

---

## ğŸš§ Known Risks & Mitigation

### Risk 1: Business Agents Complexity
**Risk**: 14 agents may take longer than estimated
**Mitigation**: Start with Strategy Agents (most critical), defer Sales Agents if needed

### Risk 2: Cross-Platform Testing
**Risk**: Limited access to all platforms for testing
**Mitigation**: Use GitHub Actions runners, community beta testers

### Risk 3: VS Code Extension Approval
**Risk**: VS Code Marketplace approval may be delayed
**Mitigation**: Start submission early, have fallback distribution (GitHub Releases)

---

## ğŸ’¡ Future Considerations (v1.2.0+)

**See [FUTURE_ROADMAP_v1.2.0+.md](FUTURE_ROADMAP_v1.2.0+.md) for detailed strategic planning.**

### Top Priority Features (v1.2.0)

1. **ğŸ”’ Security First** - WASI Sandbox + Safe Outputs (from Agentic Workflows/Shannon)
   - CodeGenAgent execution in isolated WASI sandbox
   - Permission-based outputs (create-PR only, no write access)
   - **ROI**: â­â­â­â­â­ Critical for enterprise adoption

2. **ğŸ’° Budget Control + Learning Router** (from Shannon)
   - Token budget per day/issue (85-95% cost reduction)
   - Automatic model selection (UCB algorithm)
   - **ROI**: â­â­â­â­â­ Immediate economic benefit

3. **ğŸ“ Natural Language to DAG Compiler** (from Agentic Workflows)
   - Markdown â†’ DAG JSON conversion
   - 50% reduction in setup time for beginners
   - **ROI**: â­â­â­â­ User experience transformation

4. **ğŸš€ MCP Server Integration** (from Klavis AI)
   - 600+ tools via Model Context Protocol
   - Strata bundles (Gmail/Slack/GitHub)
   - **ROI**: â­â­â­â­ 10x scalability

### Long-Term Vision (v1.3.0+)

- **Temporal Workflows** - Durable execution, time-travel debugging
- **OPA Policy Engine** - Team-based rules (DataScience team â†’ Claude only)
- **Dynamic SubAgents** - Prompt â†’ specialized agent (e.g., "Clippy fix expert")
- **Codebase Knowledge Graph** - AST analysis for test coverage suggestions
- **n8n Workflow Editor** - No-code visual DAG builder
- **A2A Communication** - Agent-to-Agent protocol for distributed systems
- **Crypto Integration** - Micropayments for economic governance (v2.0.0+)

### Strategic Priorities

| Feature | Version | Priority | ROI | Effort |
|---------|---------|----------|-----|--------|
| WASI Sandbox | v1.2.0 | â­â­â­â­â­ | Very High | 3 weeks |
| Safe Outputs | v1.2.0 | â­â­â­â­â­ | Very High | 2 weeks |
| Budget Control | v1.2.0 | â­â­â­â­â­ | Very High | 3 weeks |
| NL Compiler | v1.2.0 | â­â­â­â­ | High | 2 weeks |
| MCP Integration | v1.2.0 | â­â­â­â­ | High | 4 weeks |
| SubAgent Factory | v1.2.0 | â­â­â­â­ | High | 2 weeks |
| Temporal | v1.3.0 | â­â­â­â­ | High | 4 weeks |
| OPA Policy | v1.3.0 | â­â­â­ | Medium | 3 weeks |
| n8n Editor | v1.4.0 | â­â­â­ | Medium | 6 weeks |
| A2A Protocol | v1.5.0 | â­â­ | Low | 4 weeks |

**Total v1.2.0 Effort**: ~16 weeks (4 months) for critical features

**Inspiration Sources**:
- **Agentic Workflows** (Anthropic) - Safe Outputs, NL Compiler
- **Shannon** - Temporal, WASI, OPA, Budget Control
- **Klavis AI** - MCP, Strata bundles, 600+ tools
- **Potpie/Prompt-To-Agent** - SubAgent generation, Knowledge Graph
- **n8n + Shinkai** - No-code UI, A2A, Micropayments

---

**Document Version**: 1.0
**Last Updated**: 2025-10-16
**Status**: Planning Phase
**Owner**: Shunsuke Hayashi

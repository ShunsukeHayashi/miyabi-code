@startuml industry_staffing_給与計算
!theme cerulean-outline

title 人材派遣 - 給与計算部署 詳細業務フロー

|給与計算|
start

:月次締め日確認;

|給与計算|
:勤怠データ収集;

:スタッフ管理から受領;

fork
  :出勤日数;
fork again
  :労働時間;
fork again
  :残業時間;
fork again
  :深夜時間;
fork again
  :休日出勤;
end fork

:データ検証;

if (データ不備?) then (あり)
  :スタッフ管理へ確認;
  :クライアントへ確認;
  :データ修正;
else (なし)
  :データ確定;
endif

|給与計算|
:基本給計算;

:時給計算;
note right
  時給 × 労働時間
end note

:各種手当計算;

fork
  :交通費;
fork again
  :資格手当;
fork again
  :リーダー手当;
fork again
  :皆勤手当;
end fork

|給与計算|
:割増賃金計算;

:残業手当計算;
note right
  基本時給 × 1.25 × 残業時間
end note

:深夜手当計算;
note right
  基本時給 × 0.25 × 深夜時間
end note

:休日手当計算;
note right
  基本時給 × 1.35 × 休日出勤時間
end note

:割増賃金合計;

|給与計算|
:控除計算;

:社会保険料計算;

fork
  :健康保険料;
fork again
  :厚生年金保険料;
fork again
  :雇用保険料;
fork again
  :介護保険料(該当者);
end fork

:所得税計算;
:住民税控除;
:その他控除(前借等);

|給与計算|
:差引支給額算出;

:総支給額 - 控除額;
:支給額確定;

:給与明細作成;
note right
  - 勤怠情報
  - 支給内訳
  - 控除内訳
  - 差引支給額
end note

|給与計算|
:振込処理;

:振込データ作成;
:振込日確認;
:銀行送信;

if (振込エラー?) then (あり)
  :エラー内容確認;
  :口座情報修正;
  :再振込処理;
else (なし)
  :振込完了;
endif

:給与明細配信;

|給与計算|
:経理連携;

:給与仕訳データ作成;
:経理へ報告;

:クライアント別集計;
:請求データ作成支援;

|給与計算|
:年末調整;

:扶養控除申告書収集;
:保険料控除証明書収集;

:年末調整計算;

fork
  :扶養控除;
fork again
  :保険料控除;
fork again
  :住宅ローン控除;
fork again
  :基礎控除等;
end fork

:過不足税額計算;
:12月給与で調整;

:源泉徴収票作成;
:法定調書作成;

|給与計算|
:社会保険事務;

:算定基礎届作成;
:月額変更届作成;
:賞与支払届作成;

:年金事務所提出;
:健保組合提出;

|給与計算|
:問い合わせ対応;

:スタッフからの問い合わせ;

if (内容?) then (給与明細)
  :計算根拠説明;
else if (源泉徴収票) then
  :再発行対応;
else (控除内容)
  :社会保険説明;
endif

:月次報告作成;
note right
  - 支給総額
  - 控除総額
  - 人数
  - エラー件数
end note

stop

@enduml

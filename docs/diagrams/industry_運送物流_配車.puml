@startuml industry_運送物流_配車
!theme cerulean-outline

title 運送・物流 - 配車部門 業務フロー

|配車|
start

' 受注情報収集
|営業|
:受注情報受領;

|配車|
:配送依頼確認;
note right
  - 荷主
  - 届け先
  - 荷物情報(品名・数量・重量)
  - 希望日時
  - 特記事項
end note

' 配車計画作成
:配送可能キャパ確認;

|運行管理|
:利用可能車両確認;
:ドライバー出勤状況確認;

|配車|
if (キャパ十分?) then (はい)
  :自社配送計画;
else (いいえ)
  if (協力会社活用?) then (はい)
    :協力会社手配;
  else (いいえ)
    |営業|
    :顧客へ調整依頼;

    |配車|
  endif
endif

:ルート計画作成;
note right
  - 配送順序最適化
  - 時間指定考慮
  - 交通状況考慮
  - 積載効率考慮
end note

:車両選定;
note right
  - 車種(トン数)
  - 車両装備(リフト・冷蔵等)
  - 車両状態
end note

:ドライバー割当;

if (運行可能時間内?) then (はい)
  :配車確定;
else (いいえ)
  :ルート・割当見直し;
endif

:配車表作成;

|運行管理|
:配車計画送付;

|倉庫|
:出荷スケジュール送付;

|配車|
' 当日調整
:当日配送状況監視;

if (遅延・トラブル?) then (はい)
  :状況確認;

  if (リカバリ可能?) then (はい)
    :ルート変更指示;
  else (いいえ)
    |営業|
    :顧客へ連絡依頼;

    |配車|
    :代替手配;
  endif
else (いいえ)
endif

' 実績管理
|運行管理|
:運行実績受領;

|配車|
:配送実績登録;

:配送効率分析;
note right
  - 積載率
  - 走行距離
  - 時間遵守率
end note

:翌日以降の配車計画;

:業務終了;

stop

@enduml

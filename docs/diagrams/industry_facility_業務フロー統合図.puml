@startuml industry_facility_業務フロー統合図
!theme cerulean-outline

title 設備工事業 統合業務フロー\n案件開始から竣工・メンテナンスまで

skinparam swimlaneWidth 220
skinparam swimlaneHeight 60

== 営業フェーズ ==

swimlane 営業部 {
  start
  :顧客接触;
  -> 要件ヒアリング;
  -> 見積作成依頼;
}

swimlane 経理部 {
  :原価計算;
  -> 利益率決定;
  :見積金額確定;
}

swimlane 営業部（続き） {
  :顧客提案;
  if (受注?) then (はい)
    :契約締結;
  else (いいえ)
    end
  endif
}

== 設計フェーズ ==

swimlane 設計部 {
  :基本設計;
  -> CAD図面作成;
  -> 仕様書作成;
  -> 技術検討;
}

swimlane 技術部 {
  :仕様・規格確認;
  -> 法規適合性チェック;
  :承認;
}

swimlane 設計部（続き） {
  :詳細設計;
  -> 材料リスト作成;
  :設計完了;
}

== 施工フェーズ ==

swimlane 施工管理部 {
  :施工計画立案;
  -> 工程管理;
  -> 労務手配;
  -> 現場監理;
}

swimlane 安全管理部 {
  :安全計画立案;
  -> 現場巡回;
  -> インシデント管理;
  :安全確保;
}

swimlane 施工管理部（続き） {
  :品質検査;
  -> 試運転;
  if (合格?) then (はい)
    :竣工検査実施;
  else (いいえ)
    -> 修正工事;
  endif
}

swimlane 顧客 {
  :竣工検査立会い;
  if (承認?) then (はい)
    :竣工引渡し;
  else (いいえ)
    -> 修補依頼;
  endif
}

== 竣工・請求フェーズ ==

swimlane 施工管理部 {
  :施工完了報告;
}

swimlane 経理部 {
  :実績原価確定;
  -> 利益確認;
  -> 請求書作成;
  :請求;
}

swimlane 営業部 {
  :入金管理;
}

== メンテナンスフェーズ ==

swimlane メンテナンス部 {
  :保守契約開始;
  -> 定期点検;
  if (故障?) then (あり)
    :修理・交換工事;
  else (なし)
    -> 定期点検記録;
  endif
}

swimlane 総務部 {
  :保守契約書管理;
  -> 記録管理;
  :文書保管;
}

@enduml

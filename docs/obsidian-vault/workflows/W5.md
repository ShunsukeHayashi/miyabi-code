---
title: "Deployment & Monitoring (W5)"
created: 2025-11-18
updated: 2025-11-18
author: "Miyabi Auto-Generator"
category: "workflows"
tags: ["miyabi", "workflow", "W5"]
status: "published"
---


# Deployment & Monitoring

**ID**: W5
**Trigger**: PR approved and merged
**Duration**: ~10-30 minutes

## Description

DeploymentAgentがstaging/productionへデプロイし、ヘルスチェックを実行する

## Stages


### Stage 1: Pre-Deployment Check





**Actions**:

- All tests passed確認

- Quality score >= 80確認

- No critical vulnerabilities確認



### Stage 2: Staging Deployment

- **Entity**: [[E3_Agent]]
- **Agent**: DeploymentAgent


**Actions**:

- Firebase staging環境へデプロイ

- firebase deploy --only hosting,functions --project miyabi-staging

- デプロイURL取得



### Stage 3: Staging Health Check

- **Entity**: [[E9_Deployment]]



**Actions**:

- Health check endpoint呼び出し

- 200 OK確認

- Basic smoke test実行



### Stage 4: Staging Verification





**Actions**:



### Stage 5: Production Deployment

- **Entity**: [[E3_Agent]]
- **Agent**: DeploymentAgent


**Actions**:

- Guardian承認待ち

- Firebase production環境へデプロイ

- firebase deploy --only hosting,functions --project miyabi-production

- デプロイURL取得



### Stage 6: Production Health Check

- **Entity**: [[E9_Deployment]]



**Actions**:

- Health check endpoint呼び出し

- 200 OK確認

- Comprehensive smoke test実行



### Stage 7: Production Verification





**Actions**:



### Stage 8: Post-Deployment Monitoring





**Actions**:

- エラー率監視

- パフォーマンス監視

- ユーザーフィードバック収集



### Stage 9: Completion

- **Entity**: [[E1_Issue]]

- **State Label**: `state:done`

**Actions**:

- state:done ラベル付与

- Issueクローズ

- メトリクス更新

- Slack/Discord通知




## Related Documents

### Uses Entities

- [[../entities/E1|E1: Issue]]
- [[../entities/E3|E3: Agent]]
- [[../entities/E9|E9: Deployment]]

### Invokes Agents

- [[../agents/DeploymentAgent|DeploymentAgent]]

### Creates Relations

This workflow activates 23 relations:

- [[../relations/R1|R1: analyzed-by]] (E1 → E3)
- [[../relations/R13|R13: performs]] (E3 → E9)
- ... and 13 more

### Related Indexes

- [[INDEX|Workflows Index]] - All workflows
- [[../entities/INDEX|Entities Index]] - All entities
- [[../agents/INDEX|Agents Index]] - All agents
- [[../relations/INDEX|Relations Index]] - All relationships

## Search Tags

#workflow #W5

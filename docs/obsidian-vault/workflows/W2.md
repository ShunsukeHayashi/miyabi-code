---
title: "Task Decomposition & Planning (W2)"
created: 2025-11-18
updated: 2025-11-18
author: "Miyabi Auto-Generator"
category: "workflows"
tags: ["miyabi", "workflow", "W2"]
status: "published"
---


# Task Decomposition & Planning

**ID**: W2
**Trigger**: trigger:agent-execute label added OR manual /agent-run command
**Duration**: ~10-30 minutes

## Description

CoordinatorAgentがIssueをTask配列に分解し、DAGを構築する

## Stages


### Stage 1: Coordination Start

- **Entity**: [[E3_Agent]]
- **Agent**: CoordinatorAgent
- **State Label**: `state:analyzing`

**Actions**:

- agent:coordinator ラベル付与

- state:analyzing へ遷移

- Issue本文読み込み



### Stage 2: Task Extraction

- **Entity**: [[E2_Task]]



**Actions**:

- AIによる意図理解

- タスク抽出（チェックリスト または 自動推定）

- 各Taskに type/priority/severity 付与



### Stage 3: Dependency Analysis

- **Entity**: [[E11_DAG]]



**Actions**:

- 依存関係抽出（キーワード: after, requires, depends on）

- DAG構築（ノード = Task, エッジ = 依存関係）

- トポロジカルソート

- 循環依存チェック



### Stage 4: Agent Assignment

- **Entity**: [[E2_Task]]



**Actions**:

- 各TaskにAgentを割り当て

- CodeGenAgent → feature/bug/refactor

- DeploymentAgent → deployment

- ReviewAgent → レビュータスク



### Stage 5: Complexity Estimation





**Actions**:

- 推定時間算出（各Task）

- 全体推定時間算出

- 複雑度判定（小/中/大/特大）



### Stage 6: Plan Generation





**Actions**:

- GitHub commentに計画を投稿

- Guardian承認待ち（大規模タスクの場合）




## Related Documents

### Uses Entities

- [[../entities/E11|E11: DAG]]
- [[../entities/E2|E2: Task]]
- [[../entities/E3|E3: Agent]]

### Invokes Agents

- [[../agents/CoordinatorAgent|CoordinatorAgent]]

### Creates Relations

This workflow activates 21 relations:

- [[../relations/R5|R5: assigned-to]] (E2 → E3)
- [[../relations/R6|R6: depends-on]] (E2 → E2)
- [[../relations/R7|R7: part-of]] (E2 → E11)
- [[../relations/R9|R9: executes]] (E3 → E2)
- [[../relations/R25|R25: contains]] (E11 → E2)
- ... and 11 more

### Related Indexes

- [[INDEX|Workflows Index]] - All workflows
- [[../entities/INDEX|Entities Index]] - All entities
- [[../agents/INDEX|Agents Index]] - All agents
- [[../relations/INDEX|Relations Index]] - All relationships

## Search Tags

#workflow #W2

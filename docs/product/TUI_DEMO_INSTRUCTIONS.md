# Miyabi TUI - ãƒ‡ãƒ¢å®Ÿè¡Œæ‰‹é †

**ä½œæˆæ—¥**: 2025-10-26
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: Phase 1 - åŸºç¤å®Ÿè£…

---

## ğŸš€ å®Ÿè¡Œæ–¹æ³•

### æ–¹æ³•1: Cargoã‹ã‚‰ç›´æ¥å®Ÿè¡Œ

```bash
cd /Users/shunsuke/Dev/miyabi-private
cargo run --package miyabi-tui --bin miyabi-tui
```

### æ–¹æ³•2: ãƒ“ãƒ«ãƒ‰æ¸ˆã¿ãƒã‚¤ãƒŠãƒªã‚’å®Ÿè¡Œ

```bash
cd /Users/shunsuke/Dev/miyabi-private
./target/debug/miyabi-tui
```

---

## ğŸ¨ TUIç”»é¢ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Miyabi TUI - Codex Architecture                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Messages (Idle)                                     â”‚
â”‚                                                     â”‚
â”‚ System: Welcome to Miyabi TUI! Type a message...   â”‚
â”‚                                                     â”‚
â”‚ You: hello                                          â”‚
â”‚ Miyabi: Echo: hello                                â”‚
â”‚                                                     â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Input (Ctrl+C to quit, Enter to send)              â”‚
â”‚ _                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âŒ¨ï¸ ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰

| ã‚­ãƒ¼ | å‹•ä½œ |
|------|------|
| **Ctrl+C** | TUIã‚’çµ‚äº† |
| **Enter** | ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡ |
| **Backspace** | 1æ–‡å­—å‰Šé™¤ |
| **â†/â†’** | ã‚«ãƒ¼ã‚½ãƒ«ç§»å‹• |
| **Home** | è¡Œé ­ã¸ç§»å‹• |
| **End** | è¡Œæœ«ã¸ç§»å‹• |

---

## ğŸ¯ ç¾åœ¨ã®æ©Ÿèƒ½ (Phase 1)

### âœ… å®Ÿè£…æ¸ˆã¿

- **åŸºæœ¬ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ**: Header + Messages + Input
- **ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å±¥æ­´**: System, User, Assistant ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
- **ãƒ­ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ã‚«ãƒ©ãƒ¼ãƒªãƒ³ã‚°**:
  - User: ç·‘è‰²
  - Assistant: é’è‰²
  - System: é»„è‰²
  - ToolCall: ãƒã‚¼ãƒ³ã‚¿
  - ToolResult: ã‚·ã‚¢ãƒ³
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å…¥åŠ›**: ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†
- **çŠ¶æ…‹ç®¡ç†**: Idle, Processing, Streaming ç­‰
- **ã‚¨ã‚³ãƒ¼å¿œç­”**: å…¥åŠ›ã—ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚¨ã‚³ãƒ¼ãƒãƒƒã‚¯

### â³ æœªå®Ÿè£… (Phase 2ä»¥é™)

- Markdownãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
- ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ãƒã‚¤ãƒ©ã‚¤ãƒˆ
- LLMçµ±åˆ
- ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æ©Ÿèƒ½
- ãƒ•ã‚¡ã‚¤ãƒ«æ¤œç´¢
- Diffè¡¨ç¤º
- ãƒšãƒ¼ã‚¸ãƒ£ãƒ¼

---

## ğŸ› æ—¢çŸ¥ã®åˆ¶é™

### Phase 1ã®åˆ¶é™

1. **LLMçµ±åˆãªã—**: ç¾åœ¨ã¯ã‚¨ã‚³ãƒ¼å¿œç­”ã®ã¿
2. **ã‚¤ãƒ™ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ ç°¡ç•¥åŒ–**: event_rx ã‚’å‰Šé™¤
3. **ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æœªå®Ÿè£…**: é•·ã„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒªã‚¹ãƒˆã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ä¸å¯

### è­¦å‘Šï¼ˆéè‡´å‘½çš„ï¼‰

- `scroll_offset` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰æœªä½¿ç”¨ï¼ˆPhase 5ã§å®Ÿè£…äºˆå®šï¼‰
- `handle_app_event` ãƒ¡ã‚½ãƒƒãƒ‰æœªä½¿ç”¨ï¼ˆPhase 2ã§ä½¿ç”¨äºˆå®šï¼‰
- `UnboundedReceiver` æœªä½¿ç”¨ã‚¤ãƒ³ãƒãƒ¼ãƒˆ

---

## ğŸ“¸ ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆä¾‹

### èµ·å‹•ç›´å¾Œ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Miyabi TUI - Codex Architecture                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Messages (Idle)                                     â”‚
â”‚                                                     â”‚
â”‚ System: Welcome to Miyabi TUI! Type a message...   â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Input (Ctrl+C to quit, Enter to send)              â”‚
â”‚ _                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡å¾Œ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Miyabi TUI - Codex Architecture                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Messages (Idle)                                     â”‚
â”‚                                                     â”‚
â”‚ System: Welcome to Miyabi TUI! Type a message...   â”‚
â”‚ You: Hello, Miyabi!                                â”‚
â”‚ Miyabi: Echo: Hello, Miyabi!                       â”‚
â”‚ You: How are you?                                  â”‚
â”‚ Miyabi: Echo: How are you?                         â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Input (Ctrl+C to quit, Enter to send)              â”‚
â”‚ _                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### Q: TUIãŒèµ·å‹•ã—ãªã„

**ç¢ºèªäº‹é …**:
```bash
# ãƒ“ãƒ«ãƒ‰ãŒæˆåŠŸã—ã¦ã„ã‚‹ã‹ç¢ºèª
cargo check --package miyabi-tui

# ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ãŒUTF-8ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã‹ç¢ºèª
echo $LANG

# tokioãƒ©ãƒ³ã‚¿ã‚¤ãƒ ãŒæ­£ã—ãåˆæœŸåŒ–ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
RUST_LOG=debug cargo run --package miyabi-tui --bin miyabi-tui
```

### Q: ç”»é¢ãŒå´©ã‚Œã‚‹

**åŸå› **: ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚µã‚¤ã‚ºãŒå°ã•ã™ãã‚‹å¯èƒ½æ€§

**è§£æ±ºç­–**: ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’æ‹¡å¤§ï¼ˆæœ€å°: 80x24æ¨å¥¨ï¼‰

### Q: çµ‚äº†ã§ããªã„

**è§£æ±ºç­–**: `Ctrl+C` ã‚’æŠ¼ã™

---

## ğŸš€ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ— (Phase 2)

Phase 2ã§ã¯ä»¥ä¸‹ã‚’å®Ÿè£…äºˆå®šï¼š

1. **Markdownãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°**
   - `pulldown-cmark` çµ±åˆ
   - ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯è¡¨ç¤º

2. **ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ãƒã‚¤ãƒ©ã‚¤ãƒˆ**
   - `tree-sitter-highlight` çµ±åˆ
   - è¤‡æ•°è¨€èªã‚µãƒãƒ¼ãƒˆ

3. **Event systemå†å°å…¥**
   - `event_rx` å¾©æ´»
   - LLMçµ±åˆæº–å‚™

---

## ğŸ“š å‚è€ƒ

- **Codex TUI**: `/Users/shunsuke/Dev/codex_dev/codex/codex-rs/tui/`
- **Phase 1 Report**: `docs/PHASE1_COMPLETION_REPORT.md`
- **Roadmap**: `docs/MIYABI_CODEX_INTEGRATION_ROADMAP.md`

---

**ä½œæˆæ—¥**: 2025-10-26
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: âœ… Phase 1 å®Œäº†
**æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³**: å®Ÿéš›ã«TUIã‚’èµ·å‹•ã—ã¦ç¢ºèª

ğŸ¤– Generated with [Claude Code](https://claude.com/claude-code)

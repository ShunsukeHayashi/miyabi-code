# タスク優先順位付けガイド

## 概要

このドキュメントは、Miyabiプロジェクトにおけるタスク（Issue）の優先順位付け基準を定義します。

**適用範囲**: すべてのPhase（Phase 1-12）のサブタスク

---

## 優先順位レベル（4段階）

### 🔥 P0-Critical（最優先）

**定義**: プロジェクト進行に必須のタスク。これがないと次のフェーズに進めない。

**対象タスク**:
- **事前準備タスク**: Phase X.0（前Phaseの結果読み込み、テンプレート準備）
- **基盤設計タスク**: Phase X.1（全体設計、スケジュール策定、ファネル設計等）

**特徴**:
- クリティカルパス上のタスク
- 他のタスクの依存元（ブロッカー）
- 並列実行不可（順次実行必須）

**例**（Phase 6/7）:
- Phase 6.0: 事前準備（Phase 5/3結果読み込み）
- Phase 6.1: コンテンツ制作計画（全体スケジュール策定）
- Phase 7.0: 事前準備（Phase 3/5/6結果読み込み）
- Phase 7.1: ファネル全体設計（6ステージ設計）

---

### ⚠️ P1-High（高優先度）

**定義**: コアバリューを提供する重要タスク。プロダクトの品質に直結する。

**対象タスク**:
- **詳細設計タスク**: Phase X.2-X.4（詳細仕様、品質管理、システム設計）
- **コアコンテンツ作成**: 動画仕様、LP設計、メールシーケンス等

**特徴**:
- プロダクトの価値を決定する
- 部分的に並列実行可能
- 完成度が成果物の品質に影響

**例**（Phase 6/7）:
- Phase 6.2: コンテンツ制作詳細設計（動画/PDF仕様）
- Phase 6.3: 品質管理プロセス設計
- Phase 6.4: コンテンツ管理システム設計
- Phase 7.2: ランディングページ設計（11セクション）
- Phase 7.3: リードマグネット設計
- Phase 7.4: メールシーケンス設計

---

### 📊 P2-Medium（中優先度）

**定義**: プロジェクト完成に必要だが、P0/P1完了後に取り組めるタスク。

**対象タスク**:
- **管理・運用タスク**: ライブラリ作成、進捗管理
- **引き継ぎタスク**: 次Phaseへのドキュメント作成
- **ドキュメント出力**: 最終成果物の文書化

**特徴**:
- 並列実行可能
- 柔軟なスケジュール調整可能
- 依存関係が少ない

**例**（Phase 6/7）:
- Phase 6.5: コンテンツライブラリ作成（120個の管理表）
- Phase 6.6: 次フェーズへの引き継ぎ
- Phase 6.7: ドキュメント出力（content-plan.md等）
- Phase 7.5: アップセル/クロスセル設計
- Phase 7.6: 次フェーズへの引き継ぎ
- Phase 7.7: ドキュメント出力（4ファイル）

---

### 📝 P3-Low（低優先度）

**定義**: Nice-to-haveなタスク。時間があれば実施する。

**対象タスク**:
- オプション機能
- 追加ドキュメント
- 実験的な試み

**特徴**:
- スキップ可能
- リソースが余った場合に実施
- プロジェクトの必須条件ではない

**例**:
- 音声コンテンツ仕様（オプション）
- 追加のTestimonial収集
- A/Bテスト用の代替案作成

---

## 優先順位付けのルール

### 1. DAG（依存関係グラフ）ベース

**原則**: 依存元（上流）タスクほど高優先度

```
A（P0） → B（P1） → C（P2）
```

- Aが完了しないとBは開始不可 → AはP0
- Bが完了しないとCは開始不可 → BはP1
- Cは最後に実行可能 → CはP2

### 2. クリティカルパス優先

**クリティカルパス**: プロジェクト全体の所要時間を決定する最長経路

クリティカルパス上のタスク = P0またはP1

### 3. 並列実行可能性を考慮

**並列実行可能なタスク**:
- 依存関係がない
- 独立して作業可能
- リソースが許せば同時実行

→ P2以下に設定可能

### 4. 成果物への影響度

**高影響度**: プロダクトの価値・品質に直結 → P1
**中影響度**: 運用・管理の効率化 → P2
**低影響度**: Nice-to-have → P3

---

## Phase別の優先順位パターン

### 標準パターン

すべてのPhaseで共通の優先順位パターン：

| Phase X.Y | タスク種別 | 優先度 | 理由 |
|-----------|-----------|--------|------|
| X.0 | 事前準備 | 🔥 P0-Critical | 前Phase結果読み込みは必須 |
| X.1 | 全体設計 | 🔥 P0-Critical | 全体の基盤となる設計 |
| X.2-X.4 | 詳細設計・実装 | ⚠️ P1-High | コアバリュー提供 |
| X.5 | 管理・運用 | 📊 P2-Medium | 効率化・運用支援 |
| X.6 | 引き継ぎ | 📊 P2-Medium | 次Phase準備 |
| X.7 | ドキュメント出力 | 📊 P2-Medium | 成果物文書化 |

---

## 実例: Phase 6の優先順位

| Issue | タスク | 優先度 | 理由 |
|-------|--------|--------|------|
| #37 | Phase 6.0: 事前準備 | 🔥 P0-Critical | Phase 5/3結果読み込みは必須 |
| #38 | Phase 6.1: コンテンツ制作計画 | 🔥 P0-Critical | 全体スケジュール・外注先選定は基盤 |
| #39 | Phase 6.2: 詳細設計 | ⚠️ P1-High | 動画/PDF仕様はコアバリュー |
| #40 | Phase 6.3: 品質管理 | ⚠️ P1-High | 品質基準はプロダクト品質に直結 |
| #41 | Phase 6.4: 管理システム | ⚠️ P1-High | ファイル管理・配信は運用の要 |
| #42 | Phase 6.5: ライブラリ | 📊 P2-Medium | 管理表は運用支援（必須ではない） |
| #44 | Phase 6.6: 引き継ぎ | 📊 P2-Medium | Phase 7準備（後回し可能） |
| #45 | Phase 6.7: ドキュメント出力 | 📊 P2-Medium | 文書化は最後でOK |

---

## 実例: Phase 7の優先順位

| Issue | タスク | 優先度 | 理由 |
|-------|--------|--------|------|
| #88 | Phase 7.0: 事前準備 | 🔥 P0-Critical | Phase 3/5/6結果読み込みは必須 |
| #89 | Phase 7.1: ファネル設計 | 🔥 P0-Critical | 6ステージ設計は全体の基盤 |
| #90 | Phase 7.2: LP設計 | ⚠️ P1-High | LPはコンバージョンの要 |
| #91 | Phase 7.3: リードマグネット | ⚠️ P1-High | リード獲得の核心 |
| #92 | Phase 7.4: メールシーケンス | ⚠️ P1-High | ナーチャリングの要 |
| #93 | Phase 7.5: アップセル | 📊 P2-Medium | LTV向上（重要だが後回し可能） |
| #94 | Phase 7.6: 引き継ぎ | 📊 P2-Medium | Phase 8準備 |
| #95 | Phase 7.7: ドキュメント出力 | 📊 P2-Medium | 文書化は最後 |

---

## 優先順位の見直しタイミング

### 定期見直し

- **毎週**: 進捗状況に応じて優先度を調整
- **Phase完了時**: 次Phaseの優先度を再確認

### 緊急時の見直し

以下の場合、即座に優先度を見直す：

- **ブロッカー発生**: P0タスクが完了できない → 原因調査タスクをP0に昇格
- **スケジュール遅延**: 期限が迫っている → 該当タスクをP1に昇格
- **要件変更**: ユーザー要望で優先度が変わる → 柔軟に調整

---

## Agent割り当てとの連携

### P0-Criticalタスク

- **Agent**: CoordinatorAgent（優先的に割り当て）
- **並列度**: 1（単独実行）
- **リソース**: 最優先で確保

### P1-Highタスク

- **Agent**: Specialist Agents（CodeGen, Review等）
- **並列度**: 2-3（部分的並列実行）
- **リソース**: 高優先度で確保

### P2-Mediumタスク

- **Agent**: 任意のAgent
- **並列度**: 制限なし（リソース次第）
- **リソース**: P0/P1完了後に確保

---

## まとめ

### 優先順位の基本原則

1. **依存関係を尊重**: 上流タスクを優先
2. **クリティカルパスを意識**: プロジェクト全体の最短経路を最優先
3. **成果物への影響度を評価**: 価値・品質に直結するタスクを優先
4. **柔軟に調整**: 状況変化に応じて見直し

### ラベル使用ルール

- すべてのサブissueに優先度ラベルを付与
- メインIssueは自動的に最高優先度のサブissueの優先度を継承
- ラベルの色分け: P0（赤）、P1（黄）、P2（緑）、P3（グレー）

---

**作成日**: 2025-10-15
**対象Phase**: Phase 6, 7（将来的に全Phase適用）

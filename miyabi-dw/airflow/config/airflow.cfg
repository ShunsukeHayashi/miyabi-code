# Miyabi Data Warehouse - Airflow Configuration
# Version: 1.0.0
# This is a minimal configuration. For production, customize as needed.

[core]
# The home folder for airflow, default is ~/airflow
dags_folder = /opt/airflow/dags
base_log_folder = /opt/airflow/logs
# Executor to use (SequentialExecutor, LocalExecutor, CeleryExecutor, etc.)
executor = LocalExecutor
# The amount of parallelism as a setting to the executor
parallelism = 16
# The number of task instances allowed to run concurrently by the scheduler
max_active_tasks_per_dag = 8
# The maximum number of active DAG runs per DAG
max_active_runs_per_dag = 3
# Whether to load the DAG examples that ship with Airflow
load_examples = False
# Whether to enable pickling for xcom
enable_xcom_pickling = False
# Timezone
default_timezone = Asia/Tokyo

[database]
# The SqlAlchemy connection string to the metadata database.
sql_alchemy_conn = postgresql+psycopg2://airflow:airflow@postgres:5432/airflow

[webserver]
# The base url of your website as airflow cannot guess what domain or
# cname you are using. This is used in automated emails that
# airflow sends to point links to the right web server
base_url = http://localhost:8080
# The ip specified when starting the web server
web_server_host = 0.0.0.0
# The port on which to run the web server
web_server_port = 8080
# Secret key used to run your flask app
secret_key = miyabi_secret_key_change_in_production

[scheduler]
# Task instances listen for external kill signal (when you clear tasks
# from the CLI or the UI), this defines the frequency at which they should
# listen (in seconds).
job_heartbeat_sec = 5
# The scheduler constantly tries to trigger new tasks (look at the
# scheduler section in the docs for more information). This defines
# how often the scheduler should run (in seconds).
scheduler_heartbeat_sec = 5
# Number of seconds after which a DAG file is parsed
min_file_process_interval = 30
# How often (in seconds) to check for new DAGs in the DAG folder
dag_dir_list_interval = 300

[smtp]
# Configuration email alerts (configure for production)
smtp_host = localhost
smtp_starttls = True
smtp_ssl = False
smtp_port = 25
smtp_mail_from = airflow@miyabi.local

[operators]
# Default owner of DAGs
default_owner = miyabi-dw

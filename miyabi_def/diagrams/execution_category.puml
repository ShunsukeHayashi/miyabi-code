@startuml SWML - Execution Category Theory
!theme blueprint
skinparam backgroundColor #F8F9FA

title SWML - Category Theoretic Structure\nExecution Category ğ“” & Functors\nVersion 1.0.0

' === Category Definition ===

package "Â§6 Execution Category ğ“”" as category {

  object "Objects" as objects {
    **Spaces (8)**
    â€¢ â„ (Intent Space)
    â€¢ ğ’² (World Space)
    â€¢ ğ’® (Structure Space)
    â€¢ ğ’¯ (Task Space)
    â€¢ ğ’œ (Allocation Space)
    â€¢ â„› (Result Space)
    â€¢ ğ’Ÿ (Deliverable Space)
    â€¢ ğ’¦ (Knowledge Space)
  }

  object "Morphisms" as morphisms {
    **Phase Transitions (6)**
    â€¢ Î¸â‚: â„ Ã— ğ’² â†’ ğ’®
    â€¢ Î¸â‚‚: ğ’® Ã— ğ’² â†’ ğ’¯
    â€¢ Î¸â‚ƒ: ğ’¯ Ã— ğ’².r â†’ ğ’œ
    â€¢ Î¸â‚„: ğ’œ â†’ â„›
    â€¢ Î¸â‚…: â„› â†’ ğ’Ÿ
    â€¢ Î¸â‚†: ğ’Ÿ Ã— â„ Ã— ğ’² â†’ ğ’¦
  }

  object "Category Laws" as laws {
    **Identity Morphism**
    âˆ€ A: âˆƒ id_A : A â†’ A
    --
    **Composition**
    âˆ€ f: A â†’ B, g: B â†’ C:
      g âˆ˜ f : A â†’ C
    --
    **Associativity**
    h âˆ˜ (g âˆ˜ f) = (h âˆ˜ g) âˆ˜ f
    --
    **Identity Law**
    id_B âˆ˜ f = f = f âˆ˜ id_A
  }
}

' === Monoid Structure ===

package "Â§6.1 Monoid Structure (ğ”¼, âˆ˜, id)" as monoid {

  object "Composition âˆ˜" as comp {
    **Signature**
    âˆ˜: ğ”¼ Ã— ğ”¼ â†’ ğ”¼
    --
    **Associativity**
    (eâ‚ âˆ˜ eâ‚‚) âˆ˜ eâ‚ƒ = eâ‚ âˆ˜ (eâ‚‚ âˆ˜ eâ‚ƒ)
  }

  object "Identity id" as id {
    **Definition**
    id: A â†’ A
    --
    **Identity Law**
    id âˆ˜ e = e âˆ˜ id = e
  }
}

' === Functor ===

package "Â§6.2 World State Functor F_W" as functor {

  object "Functor Definition" as func_def {
    **Signature**
    F_W: ğ“” â†’ ğ“”
    --
    **On Objects**
    F_W(X) = X Ã— ğ’²
    --
    **On Morphisms**
    F_W(f) = f Ã— id_W
  }

  object "Functor Laws" as func_laws {
    **Preserve Identity**
    F_W(id_X) = id_{F_W(X)}
    --
    **Preserve Composition**
    F_W(g âˆ˜ f) = F_W(g) âˆ˜ F_W(f)
  }
}

' === Natural Transformation ===

package "Â§6.3 Natural Transformations" as nat_trans {

  object "Î·: Id â†’ F_W" as eta {
    **Component at X**
    Î·_X: X â†’ X Ã— ğ’²
    --
    **Naturality Square**
    For f: X â†’ Y:
      F_W(f) âˆ˜ Î·_X = Î·_Y âˆ˜ f
  }

  object "Îµ: F_W â†’ Id" as epsilon {
    **Component at X**
    Îµ_X: X Ã— ğ’² â†’ X
    --
    **Projection**
    Ï€â‚: X Ã— ğ’² â†’ X
  }
}

' === Commutative Diagrams ===

package "Â§6.4 Commutative Diagrams" as diagrams {

  note as omega_composition
    **Î© Decomposition Diagram**

    â„ Ã— ğ’² --Î¸â‚--> ğ’®
      |              |
      |              Î¸â‚‚
      |              â†“
      |              ğ’¯
      |              |
      |              Î¸â‚ƒ
      |              â†“
      |              ğ’œ
      |              |
      Î©              Î¸â‚„
      |              â†“
      |              â„›
      |              |
      |              Î¸â‚…
      |              â†“
      â†“              ğ’Ÿ
      â„›  <--Î¸â‚†--  ğ’¦

    Commutes: Î© = Î¸â‚† âˆ˜ Î¸â‚… âˆ˜ Î¸â‚„ âˆ˜ Î¸â‚ƒ âˆ˜ Î¸â‚‚ âˆ˜ Î¸â‚
  end note

  note as task_composition
    **Task Composition Diagram**

    Tâ‚ --âˆ˜--> Tâ‚‚
     \\        /
      \\      /
       \\    / âˆ˜
        \\  /
         \\/
      Tâ‚ âˆ˜ Tâ‚‚

    Associative: (Tâ‚ âˆ˜ Tâ‚‚) âˆ˜ Tâ‚ƒ = Tâ‚ âˆ˜ (Tâ‚‚ âˆ˜ Tâ‚ƒ)
  end note

  note as parallel_composition
    **Parallel Composition Diagram**

        Tâ‚
         |
    âŠ— ---|--- Tâ‚‚
         |
      Tâ‚ âŠ— Tâ‚‚

    Commutative: Tâ‚ âŠ— Tâ‚‚ = Tâ‚‚ âŠ— Tâ‚ (if independent)
  end note
}

' === Algebraic Structure ===

package "Â§6.5 Algebraic Properties" as algebra {

  object "Distributivity" as dist {
    **Law**
    Tâ‚ âˆ˜ (Tâ‚‚ âŠ— Tâ‚ƒ) = (Tâ‚ âˆ˜ Tâ‚‚) âŠ— (Tâ‚ âˆ˜ Tâ‚ƒ)
    --
    **Interpretation**
    Sequential after parallel
    = parallel of sequentials
  }

  object "Absorption" as abs {
    **Zero Element**
    fail: ğ’¯
    --
    **Law**
    fail âˆ˜ T = T âˆ˜ fail = fail
  }

  object "Idempotence" as idem {
    **For some tasks T**
    T âˆ˜ T = T
    --
    **Example**
    validate âˆ˜ validate = validate
  }
}

' === Implementation Mapping ===

package "Â§12 Implementation in Rust" as rust {

  object "Category in Code" as rust_cat {
    **trait Category**
    trait Morphism<A, B> {
      fn compose<C>(g: impl Morphism<B, C>)
        -> impl Morphism<A, C>;
      fn id() -> impl Morphism<A, A>;
    }
  }

  object "Functor in Code" as rust_func {
    **trait Functor**
    trait Functor<F> {
      fn fmap<A, B>(f: impl Fn(A) -> B)
        -> impl Fn(F<A>) -> F<B>;
    }
  }

  object "World State Functor" as rust_world {
    **struct WorldState<T>**
    struct WorldState<T> {
      value: T,
      world: World,
    }
    --
    **impl Functor**
    impl<T> Functor for WorldState<T>
  }
}

' === Theorems ===

package "Â§11 Category-Theoretic Theorems" as theorems {

  object "Composability Theorem" as comp_thm {
    **Statement**
    âˆ€ Tâ‚, Tâ‚‚ âˆˆ ğ’¯:
      valid(Tâ‚) âˆ§ valid(Tâ‚‚)
      âŸ¹ valid(Tâ‚ âˆ˜ Tâ‚‚)
    --
    **Proof**
    Type safety + constraint propagation
  }

  object "Functor Preservation" as func_pres {
    **Statement**
    F_W preserves all categorical structure
    --
    **Proof**
    By functor laws + naturality
  }

  object "Yoneda Lemma" as yoneda {
    **Statement**
    Nat(Hom(A, -), F) â‰… F(A)
    --
    **Application**
    Natural transformations correspond
    to elements of functor values
  }
}

' === Relations ===

objects --> morphisms : contains
morphisms --> laws : satisfies

comp --> id : uses

func_def --> func_laws : satisfies
func_def --> eta : via
func_def --> epsilon : via

rust_cat --> rust_func
rust_func --> rust_world

comp_thm --> func_pres
func_pres --> yoneda

note top of category
  **Execution Category ğ“”**
  Provides categorical semantics
  for the entire SWML system
end note

note bottom of functor
  **World State Functor F_W**
  Lifts every computation to
  include world state tracking
end note

legend right
  |= Symbol |= Meaning |
  | â„, ğ’², ğ’®, ğ’¯, ... | Category objects (spaces) |
  | Î¸â‚, Î¸â‚‚, ... | Morphisms (phase transitions) |
  | âˆ˜ | Morphism composition |
  | id | Identity morphism |
  | F_W | World state functor |
  | Î·, Îµ | Natural transformations |
endlegend

@enduml

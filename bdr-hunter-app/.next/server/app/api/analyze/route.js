"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/analyze/route";
exports.ids = ["app/api/analyze/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze%2Froute&page=%2Fapi%2Fanalyze%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze%2Froute.ts&appDir=%2FUsers%2Fshunsuke%2FDev%2F01-miyabi%2F_core%2Fmiyabi-private%2Fbdr-hunter-app%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fshunsuke%2FDev%2F01-miyabi%2F_core%2Fmiyabi-private%2Fbdr-hunter-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze%2Froute&page=%2Fapi%2Fanalyze%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze%2Froute.ts&appDir=%2FUsers%2Fshunsuke%2FDev%2F01-miyabi%2F_core%2Fmiyabi-private%2Fbdr-hunter-app%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fshunsuke%2FDev%2F01-miyabi%2F_core%2Fmiyabi-private%2Fbdr-hunter-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_shunsuke_Dev_01_miyabi_core_miyabi_private_bdr_hunter_app_app_api_analyze_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/analyze/route.ts */ \"(rsc)/./app/api/analyze/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/analyze/route\",\n        pathname: \"/api/analyze\",\n        filename: \"route\",\n        bundlePath: \"app/api/analyze/route\"\n    },\n    resolvedPagePath: \"/Users/shunsuke/Dev/01-miyabi/_core/miyabi-private/bdr-hunter-app/app/api/analyze/route.ts\",\n    nextConfigOutput,\n    userland: _Users_shunsuke_Dev_01_miyabi_core_miyabi_private_bdr_hunter_app_app_api_analyze_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/analyze/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhbmFseXplJTJGcm91dGUmcGFnZT0lMkZhcGklMkZhbmFseXplJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGYW5hbHl6ZSUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnNodW5zdWtlJTJGRGV2JTJGMDEtbWl5YWJpJTJGX2NvcmUlMkZtaXlhYmktcHJpdmF0ZSUyRmJkci1odW50ZXItYXBwJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRnNodW5zdWtlJTJGRGV2JTJGMDEtbWl5YWJpJTJGX2NvcmUlMkZtaXlhYmktcHJpdmF0ZSUyRmJkci1odW50ZXItYXBwJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUMwQztBQUN2SDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL2Jkci1odW50ZXItYXBwLz81YjBlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9zaHVuc3VrZS9EZXYvMDEtbWl5YWJpL19jb3JlL21peWFiaS1wcml2YXRlL2Jkci1odW50ZXItYXBwL2FwcC9hcGkvYW5hbHl6ZS9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYW5hbHl6ZS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2FuYWx5emVcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2FuYWx5emUvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvc2h1bnN1a2UvRGV2LzAxLW1peWFiaS9fY29yZS9taXlhYmktcHJpdmF0ZS9iZHItaHVudGVyLWFwcC9hcHAvYXBpL2FuYWx5emUvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2FuYWx5emUvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze%2Froute&page=%2Fapi%2Fanalyze%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze%2Froute.ts&appDir=%2FUsers%2Fshunsuke%2FDev%2F01-miyabi%2F_core%2Fmiyabi-private%2Fbdr-hunter-app%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fshunsuke%2FDev%2F01-miyabi%2F_core%2Fmiyabi-private%2Fbdr-hunter-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/analyze/route.ts":
/*!**********************************!*\
  !*** ./app/api/analyze/route.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_db_prisma__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db/prisma */ \"(rsc)/./lib/db/prisma.ts\");\n/* harmony import */ var _lib_services_gemini_enhanced__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/services/gemini-enhanced */ \"(rsc)/./lib/services/gemini-enhanced.ts\");\n/* harmony import */ var _lib_services_deep_research__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/services/deep-research */ \"(rsc)/./lib/services/deep-research.ts\");\n/**\n * POST /api/analyze - Create new analysis\n * GET /api/analyze - List all analyses\n */ \n\n\n\n// In-memory cache for active analyses (to support SSE updates)\n// In production, this would be replaced with Redis or similar\nconst analyses = new Map();\n/**\n * Create a new company analysis\n */ async function POST(request) {\n    try {\n        const body = await request.json();\n        // Validate request\n        if (!body.companyName) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"validation_error\",\n                message: \"Company name is required\"\n            }, {\n                status: 400\n            });\n        }\n        // Validate URL format if provided\n        if (body.companyUrl) {\n            try {\n                new URL(body.companyUrl);\n            } catch  {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"validation_error\",\n                    message: \"Invalid company URL format\"\n                }, {\n                    status: 400\n                });\n            }\n        }\n        // Create analysis record in database using Prisma\n        const analysis = await _lib_db_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.analysis.create({\n            data: {\n                companyName: body.companyName,\n                companyUrl: body.companyUrl || null,\n                status: \"pending\",\n                companyProfile: {\n                    name: body.companyName,\n                    url: body.companyUrl || \"\"\n                },\n                decisionMakers: [],\n                strategy: {\n                    approach: \"\",\n                    channels: [],\n                    messaging: {\n                        subject: \"\",\n                        body: \"\",\n                        callToAction: \"\"\n                    },\n                    timing: {\n                        bestDays: [],\n                        bestTimes: []\n                    },\n                    painPoints: [],\n                    valuePropositions: []\n                }\n            }\n        });\n        const analysisId = analysis.id;\n        // Add to in-memory cache for SSE updates\n        const analysisResult = {\n            id: analysisId,\n            status: \"pending\",\n            companyProfile: {\n                name: body.companyName,\n                url: body.companyUrl || \"\",\n                industry: \"\",\n                size: \"\",\n                description: \"\",\n                headquarters: \"\",\n                founded: \"\"\n            },\n            decisionMakers: [],\n            strategy: {\n                approach: \"\",\n                channels: [],\n                messaging: {\n                    subject: \"\",\n                    body: \"\",\n                    callToAction: \"\"\n                },\n                timing: {\n                    bestDays: [],\n                    bestTimes: []\n                },\n                painPoints: [],\n                valuePropositions: []\n            },\n            createdAt: analysis.createdAt.toISOString(),\n            updatedAt: analysis.updatedAt.toISOString()\n        };\n        analyses.set(analysisId, analysisResult);\n        // Trigger BDR Hunter Workflow with Gemini 3 Pro\n        executeWorkflowWithGemini(analysisId, body.companyName, body.companyUrl, body.targetRole, body.department);\n        const response = {\n            analysisId,\n            status: \"pending\",\n            estimatedCompletionTime: 180\n        };\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(response, {\n            status: 201\n        });\n    } catch (error) {\n        console.error(\"Error creating analysis:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"internal_error\",\n            message: \"Failed to create analysis\"\n        }, {\n            status: 500\n        });\n    }\n}\n/**\n * List all analyses with pagination\n */ async function GET(request) {\n    try {\n        const searchParams = request.nextUrl.searchParams;\n        const page = parseInt(searchParams.get(\"page\") || \"1\", 10);\n        const pageSize = parseInt(searchParams.get(\"pageSize\") || \"10\", 10);\n        // Calculate skip for pagination\n        const skip = (page - 1) * pageSize;\n        // Get total count\n        const total = await _lib_db_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.analysis.count();\n        // Get paginated analyses\n        const data = await _lib_db_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.analysis.findMany({\n            orderBy: {\n                createdAt: \"desc\"\n            },\n            skip,\n            take: pageSize\n        });\n        // Transform database rows to AnalysisResult format\n        const analysesList = data.map((row)=>({\n                id: row.id,\n                status: row.status,\n                companyProfile: row.companyProfile,\n                decisionMakers: row.decisionMakers || [],\n                strategy: row.strategy,\n                createdAt: row.createdAt.toISOString(),\n                updatedAt: row.updatedAt.toISOString(),\n                completedAt: row.completedAt?.toISOString() || undefined,\n                error: row.error || undefined\n            }));\n        const response = {\n            analyses: analysesList,\n            total,\n            page,\n            pageSize\n        };\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(response);\n    } catch (error) {\n        console.error(\"Error listing analyses:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"internal_error\",\n            message: \"Failed to list analyses\"\n        }, {\n            status: 500\n        });\n    }\n}\n/**\n * Execute BDR Hunter Workflow with Gemini 3 Pro\n */ async function executeWorkflowWithGemini(analysisId, companyName, companyUrl, targetRole, department) {\n    try {\n        const gemini = (0,_lib_services_gemini_enhanced__WEBPACK_IMPORTED_MODULE_2__.getGeminiEnhancedService)();\n        console.log(`[WORKFLOW] Using Gemini Enhanced with Google Search grounding & URL context`);\n        // Helper function to update status\n        const updateStatus = async (status)=>{\n            // Update in database\n            await _lib_db_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.analysis.update({\n                where: {\n                    id: analysisId\n                },\n                data: {\n                    status,\n                    updatedAt: new Date()\n                }\n            });\n            // Update in cache for SSE\n            const current = analyses.get(analysisId);\n            if (current) {\n                current.status = status;\n                current.updatedAt = new Date().toISOString();\n                analyses.set(analysisId, current);\n            }\n        };\n        await updateStatus(\"profiling\");\n        // Stage 0: Find company URL if not provided (using Google Search grounding)\n        let discoveredUrl = companyUrl;\n        if (!discoveredUrl) {\n            console.log(`[WORKFLOW] Stage 0: Searching for company URL with Google Search grounding: ${companyName}`);\n            const urlResult = await gemini.findCompanyUrl(companyName);\n            discoveredUrl = urlResult.url;\n            console.log(`[WORKFLOW] Stage 0: Found URL: ${discoveredUrl} (confidence: ${urlResult.confidence})`);\n            console.log(`[WORKFLOW] Stage 0: Search sources:`, urlResult.sources);\n            // Update analysis with discovered URL\n            await _lib_db_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.analysis.update({\n                where: {\n                    id: analysisId\n                },\n                data: {\n                    companyUrl: discoveredUrl,\n                    companyProfile: {\n                        name: companyName,\n                        url: discoveredUrl\n                    },\n                    updatedAt: new Date()\n                }\n            });\n            // Update cache\n            const current = analyses.get(analysisId);\n            if (current) {\n                current.companyProfile.url = discoveredUrl;\n                current.updatedAt = new Date().toISOString();\n                analyses.set(analysisId, current);\n            }\n        }\n        // Stage 1: Corporate Profiler (with URL context)\n        console.log(`[WORKFLOW] Stage 1: Profiling company with URL context: ${companyName} at ${discoveredUrl}`);\n        const companyProfile = await gemini.profileCompany(companyName, discoveredUrl);\n        console.log(`[WORKFLOW] Stage 1: Profile complete:`, {\n            industry: companyProfile.industry,\n            size: companyProfile.size,\n            headquarters: companyProfile.headquarters\n        });\n        // Update analysis with company profile\n        await _lib_db_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.analysis.update({\n            where: {\n                id: analysisId\n            },\n            data: {\n                companyProfile: companyProfile,\n                updatedAt: new Date()\n            }\n        });\n        // Update cache\n        const updated1 = analyses.get(analysisId);\n        if (updated1) {\n            updated1.companyProfile = {\n                ...updated1.companyProfile,\n                ...companyProfile\n            };\n            updated1.updatedAt = new Date().toISOString();\n            analyses.set(analysisId, updated1);\n        }\n        // Stage 2: Talent Scout\n        console.log(`[WORKFLOW] Stage 2: Scouting decision makers...`);\n        await updateStatus(\"scouting\");\n        const decisionMakers = await gemini.identifyDecisionMakers(companyName, companyProfile.industry || \"\", targetRole);\n        console.log(`[WORKFLOW] Stage 2: Found ${decisionMakers.length} decision makers`);\n        // Update analysis with decision makers\n        await _lib_db_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.analysis.update({\n            where: {\n                id: analysisId\n            },\n            data: {\n                decisionMakers: decisionMakers,\n                updatedAt: new Date()\n            }\n        });\n        // Update cache\n        const updated2 = analyses.get(analysisId);\n        if (updated2) {\n            updated2.decisionMakers = decisionMakers;\n            updated2.updatedAt = new Date().toISOString();\n            analyses.set(analysisId, updated2);\n        }\n        // Stage 3: Strategy Generation\n        console.log(`[WORKFLOW] Stage 3: Generating strategy...`);\n        await updateStatus(\"strategizing\");\n        const strategy = await gemini.generateBDRStrategy(companyName, companyProfile, decisionMakers);\n        console.log(`[WORKFLOW] Stage 3: Strategy complete`);\n        // Update analysis with strategy\n        await _lib_db_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.analysis.update({\n            where: {\n                id: analysisId\n            },\n            data: {\n                strategy: strategy,\n                updatedAt: new Date()\n            }\n        });\n        // Update cache\n        const updated3 = analyses.get(analysisId);\n        if (updated3) {\n            updated3.strategy = strategy;\n            updated3.updatedAt = new Date().toISOString();\n            analyses.set(analysisId, updated3);\n        }\n        // Stage 4: Deep Research (Agentic with Google Search grounding)\n        console.log(`[WORKFLOW] Stage 4: Starting Deep Research with agentic behavior for ${companyName}`);\n        await updateStatus(\"researching\");\n        try {\n            const deepResearchService = (0,_lib_services_deep_research__WEBPACK_IMPORTED_MODULE_3__.getDeepResearchService)();\n            const deepResearchResult = await deepResearchService.researchCompany(companyName, discoveredUrl);\n            console.log(`[WORKFLOW] Stage 4: Deep Research complete with ${deepResearchResult.sources.length} sources`);\n            // Update analysis with deep research\n            await _lib_db_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.analysis.update({\n                where: {\n                    id: analysisId\n                },\n                data: {\n                    deepResearch: deepResearchResult,\n                    updatedAt: new Date()\n                }\n            });\n            // Update cache with deep research\n            const updated4 = analyses.get(analysisId);\n            if (updated4) {\n                updated4.deepResearch = deepResearchResult;\n                updated4.updatedAt = new Date().toISOString();\n                analyses.set(analysisId, updated4);\n            }\n        } catch (deepResearchError) {\n            console.error(`[WORKFLOW] Stage 4: Deep Research failed (non-fatal):`, deepResearchError);\n        // Continue even if deep research fails - it's an enhancement, not a requirement\n        }\n        // Stage 5: Complete\n        console.log(`[WORKFLOW] Stage 5: Analysis complete for ${companyName}`);\n        // Update status to completed in database\n        await _lib_db_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.analysis.update({\n            where: {\n                id: analysisId\n            },\n            data: {\n                status: \"completed\",\n                completedAt: new Date(),\n                updatedAt: new Date()\n            }\n        });\n        // Update cache\n        const updated5 = analyses.get(analysisId);\n        if (updated5) {\n            updated5.status = \"completed\";\n            updated5.completedAt = new Date().toISOString();\n            updated5.updatedAt = new Date().toISOString();\n            analyses.set(analysisId, updated5);\n        }\n    } catch (error) {\n        console.error(`[WORKFLOW] ERROR for ${companyName}:`, error);\n        console.error(`[WORKFLOW] Error stack:`, error instanceof Error ? error.stack : \"No stack\");\n        // Update status to failed in database\n        const errorMessage = error instanceof Error ? error.message : \"Workflow execution failed\";\n        await _lib_db_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.analysis.update({\n            where: {\n                id: analysisId\n            },\n            data: {\n                status: \"failed\",\n                error: errorMessage,\n                updatedAt: new Date()\n            }\n        });\n        // Update cache\n        const failedAnalysis = analyses.get(analysisId);\n        if (failedAnalysis) {\n            failedAnalysis.status = \"failed\";\n            failedAnalysis.error = errorMessage;\n            failedAnalysis.updatedAt = new Date().toISOString();\n            analyses.set(analysisId, failedAnalysis);\n            console.error(`[WORKFLOW] Analysis ${analysisId} marked as failed`);\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UUFBUXJGLE1BQU1zRixLQUFLLEdBQUc7UUFFaEYsc0NBQXNDO1FBQ3RDLE1BQU1DLGVBQWV2RixpQkFBaUJxRixRQUFRckYsTUFBTUMsT0FBTyxHQUFHO1FBQzlELE1BQU1YLGtEQUFNQSxDQUFDZSxRQUFRLENBQUN5RCxNQUFNLENBQUM7WUFDM0JDLE9BQU87Z0JBQUV2QyxJQUFJRDtZQUFXO1lBQ3hCaEIsTUFBTTtnQkFDSkwsUUFBUTtnQkFDUkYsT0FBT3VGO2dCQUNQdEQsV0FBVyxJQUFJK0I7WUFDakI7UUFDRjtRQUVBLGVBQWU7UUFDZixNQUFNd0IsaUJBQWlCL0YsU0FBU3FELEdBQUcsQ0FBQ3ZCO1FBQ3BDLElBQUlpRSxnQkFBZ0I7WUFDbEJBLGVBQWV0RixNQUFNLEdBQUc7WUFDeEJzRixlQUFleEYsS0FBSyxHQUFHdUY7WUFDdkJDLGVBQWV2RCxTQUFTLEdBQUcsSUFBSStCLE9BQU9oQyxXQUFXO1lBQ2pEdkMsU0FBU3lDLEdBQUcsQ0FBQ1gsWUFBWWlFO1lBQ3pCaEQsUUFBUXhDLEtBQUssQ0FBQyxDQUFDLG9CQUFvQixFQUFFdUIsV0FBVyxpQkFBaUIsQ0FBQztRQUNwRTtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iZHItaHVudGVyLWFwcC8uL2FwcC9hcGkvYW5hbHl6ZS9yb3V0ZS50cz80NmJiIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogUE9TVCAvYXBpL2FuYWx5emUgLSBDcmVhdGUgbmV3IGFuYWx5c2lzXG4gKiBHRVQgL2FwaS9hbmFseXplIC0gTGlzdCBhbGwgYW5hbHlzZXNcbiAqL1xuXG5pbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHR5cGUge1xuICBDcmVhdGVBbmFseXNpc1JlcXVlc3QsXG4gIENyZWF0ZUFuYWx5c2lzUmVzcG9uc2UsXG4gIExpc3RBbmFseXNlc1Jlc3BvbnNlLFxuICBBbmFseXNpc1Jlc3VsdCxcbiAgQW5hbHlzaXNTdGF0dXMsXG59IGZyb20gJ0AvbGliL3R5cGVzL2FwaSc7XG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tICdAL2xpYi9kYi9wcmlzbWEnO1xuaW1wb3J0IHsgZ2V0R2VtaW5pRW5oYW5jZWRTZXJ2aWNlIH0gZnJvbSAnQC9saWIvc2VydmljZXMvZ2VtaW5pLWVuaGFuY2VkJztcbmltcG9ydCB7IGdldERlZXBSZXNlYXJjaFNlcnZpY2UgfSBmcm9tICdAL2xpYi9zZXJ2aWNlcy9kZWVwLXJlc2VhcmNoJztcblxuLy8gSW4tbWVtb3J5IGNhY2hlIGZvciBhY3RpdmUgYW5hbHlzZXMgKHRvIHN1cHBvcnQgU1NFIHVwZGF0ZXMpXG4vLyBJbiBwcm9kdWN0aW9uLCB0aGlzIHdvdWxkIGJlIHJlcGxhY2VkIHdpdGggUmVkaXMgb3Igc2ltaWxhclxuY29uc3QgYW5hbHlzZXMgPSBuZXcgTWFwPHN0cmluZywgQW5hbHlzaXNSZXN1bHQ+KCk7XG5cbi8qKlxuICogQ3JlYXRlIGEgbmV3IGNvbXBhbnkgYW5hbHlzaXNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBib2R5OiBDcmVhdGVBbmFseXNpc1JlcXVlc3QgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcblxuICAgIC8vIFZhbGlkYXRlIHJlcXVlc3RcbiAgICBpZiAoIWJvZHkuY29tcGFueU5hbWUpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ3ZhbGlkYXRpb25fZXJyb3InLCBtZXNzYWdlOiAnQ29tcGFueSBuYW1lIGlzIHJlcXVpcmVkJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gVmFsaWRhdGUgVVJMIGZvcm1hdCBpZiBwcm92aWRlZFxuICAgIGlmIChib2R5LmNvbXBhbnlVcmwpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIG5ldyBVUkwoYm9keS5jb21wYW55VXJsKTtcbiAgICAgIH0gY2F0Y2gge1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgICAgeyBlcnJvcjogJ3ZhbGlkYXRpb25fZXJyb3InLCBtZXNzYWdlOiAnSW52YWxpZCBjb21wYW55IFVSTCBmb3JtYXQnIH0sXG4gICAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIGFuYWx5c2lzIHJlY29yZCBpbiBkYXRhYmFzZSB1c2luZyBQcmlzbWFcbiAgICBjb25zdCBhbmFseXNpcyA9IGF3YWl0IHByaXNtYS5hbmFseXNpcy5jcmVhdGUoe1xuICAgICAgZGF0YToge1xuICAgICAgICBjb21wYW55TmFtZTogYm9keS5jb21wYW55TmFtZSxcbiAgICAgICAgY29tcGFueVVybDogYm9keS5jb21wYW55VXJsIHx8IG51bGwsXG4gICAgICAgIHN0YXR1czogJ3BlbmRpbmcnLFxuICAgICAgICBjb21wYW55UHJvZmlsZToge1xuICAgICAgICAgIG5hbWU6IGJvZHkuY29tcGFueU5hbWUsXG4gICAgICAgICAgdXJsOiBib2R5LmNvbXBhbnlVcmwgfHwgJycsXG4gICAgICAgIH0sXG4gICAgICAgIGRlY2lzaW9uTWFrZXJzOiBbXSxcbiAgICAgICAgc3RyYXRlZ3k6IHtcbiAgICAgICAgICBhcHByb2FjaDogJycsXG4gICAgICAgICAgY2hhbm5lbHM6IFtdLFxuICAgICAgICAgIG1lc3NhZ2luZzoge1xuICAgICAgICAgICAgc3ViamVjdDogJycsXG4gICAgICAgICAgICBib2R5OiAnJyxcbiAgICAgICAgICAgIGNhbGxUb0FjdGlvbjogJycsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB0aW1pbmc6IHtcbiAgICAgICAgICAgIGJlc3REYXlzOiBbXSxcbiAgICAgICAgICAgIGJlc3RUaW1lczogW10sXG4gICAgICAgICAgfSxcbiAgICAgICAgICBwYWluUG9pbnRzOiBbXSxcbiAgICAgICAgICB2YWx1ZVByb3Bvc2l0aW9uczogW10sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgY29uc3QgYW5hbHlzaXNJZCA9IGFuYWx5c2lzLmlkO1xuXG4gICAgLy8gQWRkIHRvIGluLW1lbW9yeSBjYWNoZSBmb3IgU1NFIHVwZGF0ZXNcbiAgICBjb25zdCBhbmFseXNpc1Jlc3VsdDogQW5hbHlzaXNSZXN1bHQgPSB7XG4gICAgICBpZDogYW5hbHlzaXNJZCxcbiAgICAgIHN0YXR1czogJ3BlbmRpbmcnIGFzIEFuYWx5c2lzU3RhdHVzLFxuICAgICAgY29tcGFueVByb2ZpbGU6IHtcbiAgICAgICAgbmFtZTogYm9keS5jb21wYW55TmFtZSxcbiAgICAgICAgdXJsOiBib2R5LmNvbXBhbnlVcmwgfHwgJycsXG4gICAgICAgIGluZHVzdHJ5OiAnJyxcbiAgICAgICAgc2l6ZTogJycsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnJyxcbiAgICAgICAgaGVhZHF1YXJ0ZXJzOiAnJyxcbiAgICAgICAgZm91bmRlZDogJycsXG4gICAgICB9LFxuICAgICAgZGVjaXNpb25NYWtlcnM6IFtdLFxuICAgICAgc3RyYXRlZ3k6IHtcbiAgICAgICAgYXBwcm9hY2g6ICcnLFxuICAgICAgICBjaGFubmVsczogW10sXG4gICAgICAgIG1lc3NhZ2luZzoge1xuICAgICAgICAgIHN1YmplY3Q6ICcnLFxuICAgICAgICAgIGJvZHk6ICcnLFxuICAgICAgICAgIGNhbGxUb0FjdGlvbjogJycsXG4gICAgICAgIH0sXG4gICAgICAgIHRpbWluZzoge1xuICAgICAgICAgIGJlc3REYXlzOiBbXSxcbiAgICAgICAgICBiZXN0VGltZXM6IFtdLFxuICAgICAgICB9LFxuICAgICAgICBwYWluUG9pbnRzOiBbXSxcbiAgICAgICAgdmFsdWVQcm9wb3NpdGlvbnM6IFtdLFxuICAgICAgfSxcbiAgICAgIGNyZWF0ZWRBdDogYW5hbHlzaXMuY3JlYXRlZEF0LnRvSVNPU3RyaW5nKCksXG4gICAgICB1cGRhdGVkQXQ6IGFuYWx5c2lzLnVwZGF0ZWRBdC50b0lTT1N0cmluZygpLFxuICAgIH07XG4gICAgYW5hbHlzZXMuc2V0KGFuYWx5c2lzSWQsIGFuYWx5c2lzUmVzdWx0KTtcblxuICAgIC8vIFRyaWdnZXIgQkRSIEh1bnRlciBXb3JrZmxvdyB3aXRoIEdlbWluaSAzIFByb1xuICAgIGV4ZWN1dGVXb3JrZmxvd1dpdGhHZW1pbmkoYW5hbHlzaXNJZCwgYm9keS5jb21wYW55TmFtZSwgYm9keS5jb21wYW55VXJsLCBib2R5LnRhcmdldFJvbGUsIGJvZHkuZGVwYXJ0bWVudCk7XG5cbiAgICBjb25zdCByZXNwb25zZTogQ3JlYXRlQW5hbHlzaXNSZXNwb25zZSA9IHtcbiAgICAgIGFuYWx5c2lzSWQsXG4gICAgICBzdGF0dXM6ICdwZW5kaW5nJyxcbiAgICAgIGVzdGltYXRlZENvbXBsZXRpb25UaW1lOiAxODAsIC8vIDMgbWludXRlc1xuICAgIH07XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24ocmVzcG9uc2UsIHsgc3RhdHVzOiAyMDEgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgYW5hbHlzaXM6JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6ICdpbnRlcm5hbF9lcnJvcicsIG1lc3NhZ2U6ICdGYWlsZWQgdG8gY3JlYXRlIGFuYWx5c2lzJyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuXG4vKipcbiAqIExpc3QgYWxsIGFuYWx5c2VzIHdpdGggcGFnaW5hdGlvblxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3Qgc2VhcmNoUGFyYW1zID0gcmVxdWVzdC5uZXh0VXJsLnNlYXJjaFBhcmFtcztcbiAgICBjb25zdCBwYWdlID0gcGFyc2VJbnQoc2VhcmNoUGFyYW1zLmdldCgncGFnZScpIHx8ICcxJywgMTApO1xuICAgIGNvbnN0IHBhZ2VTaXplID0gcGFyc2VJbnQoc2VhcmNoUGFyYW1zLmdldCgncGFnZVNpemUnKSB8fCAnMTAnLCAxMCk7XG5cbiAgICAvLyBDYWxjdWxhdGUgc2tpcCBmb3IgcGFnaW5hdGlvblxuICAgIGNvbnN0IHNraXAgPSAocGFnZSAtIDEpICogcGFnZVNpemU7XG5cbiAgICAvLyBHZXQgdG90YWwgY291bnRcbiAgICBjb25zdCB0b3RhbCA9IGF3YWl0IHByaXNtYS5hbmFseXNpcy5jb3VudCgpO1xuXG4gICAgLy8gR2V0IHBhZ2luYXRlZCBhbmFseXNlc1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBwcmlzbWEuYW5hbHlzaXMuZmluZE1hbnkoe1xuICAgICAgb3JkZXJCeTogeyBjcmVhdGVkQXQ6ICdkZXNjJyB9LFxuICAgICAgc2tpcCxcbiAgICAgIHRha2U6IHBhZ2VTaXplLFxuICAgIH0pO1xuXG4gICAgLy8gVHJhbnNmb3JtIGRhdGFiYXNlIHJvd3MgdG8gQW5hbHlzaXNSZXN1bHQgZm9ybWF0XG4gICAgY29uc3QgYW5hbHlzZXNMaXN0ID0gZGF0YS5tYXAocm93ID0+ICh7XG4gICAgICBpZDogcm93LmlkLFxuICAgICAgc3RhdHVzOiByb3cuc3RhdHVzIGFzIEFuYWx5c2lzU3RhdHVzLFxuICAgICAgY29tcGFueVByb2ZpbGU6IHJvdy5jb21wYW55UHJvZmlsZSBhcyBhbnksXG4gICAgICBkZWNpc2lvbk1ha2VyczogKHJvdy5kZWNpc2lvbk1ha2VycyB8fCBbXSkgYXMgYW55W10sXG4gICAgICBzdHJhdGVneTogcm93LnN0cmF0ZWd5IGFzIGFueSxcbiAgICAgIGNyZWF0ZWRBdDogcm93LmNyZWF0ZWRBdC50b0lTT1N0cmluZygpLFxuICAgICAgdXBkYXRlZEF0OiByb3cudXBkYXRlZEF0LnRvSVNPU3RyaW5nKCksXG4gICAgICBjb21wbGV0ZWRBdDogcm93LmNvbXBsZXRlZEF0Py50b0lTT1N0cmluZygpIHx8IHVuZGVmaW5lZCxcbiAgICAgIGVycm9yOiByb3cuZXJyb3IgfHwgdW5kZWZpbmVkLFxuICAgIH0pKTtcblxuICAgIGNvbnN0IHJlc3BvbnNlOiBMaXN0QW5hbHlzZXNSZXNwb25zZSA9IHtcbiAgICAgIGFuYWx5c2VzOiBhbmFseXNlc0xpc3QsXG4gICAgICB0b3RhbCxcbiAgICAgIHBhZ2UsXG4gICAgICBwYWdlU2l6ZSxcbiAgICB9O1xuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHJlc3BvbnNlKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsaXN0aW5nIGFuYWx5c2VzOicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiAnaW50ZXJuYWxfZXJyb3InLCBtZXNzYWdlOiAnRmFpbGVkIHRvIGxpc3QgYW5hbHlzZXMnIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59XG5cbi8qKlxuICogRXhlY3V0ZSBCRFIgSHVudGVyIFdvcmtmbG93IHdpdGggR2VtaW5pIDMgUHJvXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGV4ZWN1dGVXb3JrZmxvd1dpdGhHZW1pbmkoXG4gIGFuYWx5c2lzSWQ6IHN0cmluZyxcbiAgY29tcGFueU5hbWU6IHN0cmluZyxcbiAgY29tcGFueVVybD86IHN0cmluZyxcbiAgdGFyZ2V0Um9sZT86IHN0cmluZyxcbiAgZGVwYXJ0bWVudD86IHN0cmluZ1xuKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgZ2VtaW5pID0gZ2V0R2VtaW5pRW5oYW5jZWRTZXJ2aWNlKCk7XG4gICAgY29uc29sZS5sb2coYFtXT1JLRkxPV10gVXNpbmcgR2VtaW5pIEVuaGFuY2VkIHdpdGggR29vZ2xlIFNlYXJjaCBncm91bmRpbmcgJiBVUkwgY29udGV4dGApO1xuXG4gICAgLy8gSGVscGVyIGZ1bmN0aW9uIHRvIHVwZGF0ZSBzdGF0dXNcbiAgICBjb25zdCB1cGRhdGVTdGF0dXMgPSBhc3luYyAoc3RhdHVzOiBBbmFseXNpc1N0YXR1cykgPT4ge1xuICAgICAgLy8gVXBkYXRlIGluIGRhdGFiYXNlXG4gICAgICBhd2FpdCBwcmlzbWEuYW5hbHlzaXMudXBkYXRlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IGFuYWx5c2lzSWQgfSxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHN0YXR1cyxcbiAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgLy8gVXBkYXRlIGluIGNhY2hlIGZvciBTU0VcbiAgICAgIGNvbnN0IGN1cnJlbnQgPSBhbmFseXNlcy5nZXQoYW5hbHlzaXNJZCk7XG4gICAgICBpZiAoY3VycmVudCkge1xuICAgICAgICBjdXJyZW50LnN0YXR1cyA9IHN0YXR1cztcbiAgICAgICAgY3VycmVudC51cGRhdGVkQXQgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgICAgIGFuYWx5c2VzLnNldChhbmFseXNpc0lkLCBjdXJyZW50KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgYXdhaXQgdXBkYXRlU3RhdHVzKCdwcm9maWxpbmcnKTtcblxuICAgIC8vIFN0YWdlIDA6IEZpbmQgY29tcGFueSBVUkwgaWYgbm90IHByb3ZpZGVkICh1c2luZyBHb29nbGUgU2VhcmNoIGdyb3VuZGluZylcbiAgICBsZXQgZGlzY292ZXJlZFVybCA9IGNvbXBhbnlVcmw7XG4gICAgaWYgKCFkaXNjb3ZlcmVkVXJsKSB7XG4gICAgICBjb25zb2xlLmxvZyhgW1dPUktGTE9XXSBTdGFnZSAwOiBTZWFyY2hpbmcgZm9yIGNvbXBhbnkgVVJMIHdpdGggR29vZ2xlIFNlYXJjaCBncm91bmRpbmc6ICR7Y29tcGFueU5hbWV9YCk7XG4gICAgICBjb25zdCB1cmxSZXN1bHQgPSBhd2FpdCBnZW1pbmkuZmluZENvbXBhbnlVcmwoY29tcGFueU5hbWUpO1xuICAgICAgZGlzY292ZXJlZFVybCA9IHVybFJlc3VsdC51cmw7XG4gICAgICBjb25zb2xlLmxvZyhgW1dPUktGTE9XXSBTdGFnZSAwOiBGb3VuZCBVUkw6ICR7ZGlzY292ZXJlZFVybH0gKGNvbmZpZGVuY2U6ICR7dXJsUmVzdWx0LmNvbmZpZGVuY2V9KWApO1xuICAgICAgY29uc29sZS5sb2coYFtXT1JLRkxPV10gU3RhZ2UgMDogU2VhcmNoIHNvdXJjZXM6YCwgdXJsUmVzdWx0LnNvdXJjZXMpO1xuXG4gICAgICAvLyBVcGRhdGUgYW5hbHlzaXMgd2l0aCBkaXNjb3ZlcmVkIFVSTFxuICAgICAgYXdhaXQgcHJpc21hLmFuYWx5c2lzLnVwZGF0ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBhbmFseXNpc0lkIH0sXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBjb21wYW55VXJsOiBkaXNjb3ZlcmVkVXJsLFxuICAgICAgICAgIGNvbXBhbnlQcm9maWxlOiB7IG5hbWU6IGNvbXBhbnlOYW1lLCB1cmw6IGRpc2NvdmVyZWRVcmwgfSxcbiAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgLy8gVXBkYXRlIGNhY2hlXG4gICAgICBjb25zdCBjdXJyZW50ID0gYW5hbHlzZXMuZ2V0KGFuYWx5c2lzSWQpO1xuICAgICAgaWYgKGN1cnJlbnQpIHtcbiAgICAgICAgY3VycmVudC5jb21wYW55UHJvZmlsZS51cmwgPSBkaXNjb3ZlcmVkVXJsO1xuICAgICAgICBjdXJyZW50LnVwZGF0ZWRBdCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICAgICAgYW5hbHlzZXMuc2V0KGFuYWx5c2lzSWQsIGN1cnJlbnQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFN0YWdlIDE6IENvcnBvcmF0ZSBQcm9maWxlciAod2l0aCBVUkwgY29udGV4dClcbiAgICBjb25zb2xlLmxvZyhgW1dPUktGTE9XXSBTdGFnZSAxOiBQcm9maWxpbmcgY29tcGFueSB3aXRoIFVSTCBjb250ZXh0OiAke2NvbXBhbnlOYW1lfSBhdCAke2Rpc2NvdmVyZWRVcmx9YCk7XG4gICAgY29uc3QgY29tcGFueVByb2ZpbGUgPSBhd2FpdCBnZW1pbmkucHJvZmlsZUNvbXBhbnkoY29tcGFueU5hbWUsIGRpc2NvdmVyZWRVcmwpO1xuICAgIGNvbnNvbGUubG9nKGBbV09SS0ZMT1ddIFN0YWdlIDE6IFByb2ZpbGUgY29tcGxldGU6YCwge1xuICAgICAgaW5kdXN0cnk6IGNvbXBhbnlQcm9maWxlLmluZHVzdHJ5LFxuICAgICAgc2l6ZTogY29tcGFueVByb2ZpbGUuc2l6ZSxcbiAgICAgIGhlYWRxdWFydGVyczogY29tcGFueVByb2ZpbGUuaGVhZHF1YXJ0ZXJzLFxuICAgIH0pO1xuXG4gICAgLy8gVXBkYXRlIGFuYWx5c2lzIHdpdGggY29tcGFueSBwcm9maWxlXG4gICAgYXdhaXQgcHJpc21hLmFuYWx5c2lzLnVwZGF0ZSh7XG4gICAgICB3aGVyZTogeyBpZDogYW5hbHlzaXNJZCB9LFxuICAgICAgZGF0YToge1xuICAgICAgICBjb21wYW55UHJvZmlsZTogY29tcGFueVByb2ZpbGUsXG4gICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICAvLyBVcGRhdGUgY2FjaGVcbiAgICBjb25zdCB1cGRhdGVkMSA9IGFuYWx5c2VzLmdldChhbmFseXNpc0lkKTtcbiAgICBpZiAodXBkYXRlZDEpIHtcbiAgICAgIHVwZGF0ZWQxLmNvbXBhbnlQcm9maWxlID0geyAuLi51cGRhdGVkMS5jb21wYW55UHJvZmlsZSwgLi4uY29tcGFueVByb2ZpbGUgfTtcbiAgICAgIHVwZGF0ZWQxLnVwZGF0ZWRBdCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICAgIGFuYWx5c2VzLnNldChhbmFseXNpc0lkLCB1cGRhdGVkMSk7XG4gICAgfVxuXG4gICAgLy8gU3RhZ2UgMjogVGFsZW50IFNjb3V0XG4gICAgY29uc29sZS5sb2coYFtXT1JLRkxPV10gU3RhZ2UgMjogU2NvdXRpbmcgZGVjaXNpb24gbWFrZXJzLi4uYCk7XG4gICAgYXdhaXQgdXBkYXRlU3RhdHVzKCdzY291dGluZycpO1xuXG4gICAgY29uc3QgZGVjaXNpb25NYWtlcnMgPSBhd2FpdCBnZW1pbmkuaWRlbnRpZnlEZWNpc2lvbk1ha2VycyhcbiAgICAgIGNvbXBhbnlOYW1lLFxuICAgICAgY29tcGFueVByb2ZpbGUuaW5kdXN0cnkgfHwgJycsXG4gICAgICB0YXJnZXRSb2xlXG4gICAgKTtcbiAgICBjb25zb2xlLmxvZyhgW1dPUktGTE9XXSBTdGFnZSAyOiBGb3VuZCAke2RlY2lzaW9uTWFrZXJzLmxlbmd0aH0gZGVjaXNpb24gbWFrZXJzYCk7XG5cbiAgICAvLyBVcGRhdGUgYW5hbHlzaXMgd2l0aCBkZWNpc2lvbiBtYWtlcnNcbiAgICBhd2FpdCBwcmlzbWEuYW5hbHlzaXMudXBkYXRlKHtcbiAgICAgIHdoZXJlOiB7IGlkOiBhbmFseXNpc0lkIH0sXG4gICAgICBkYXRhOiB7XG4gICAgICAgIGRlY2lzaW9uTWFrZXJzOiBkZWNpc2lvbk1ha2VycyxcbiAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIC8vIFVwZGF0ZSBjYWNoZVxuICAgIGNvbnN0IHVwZGF0ZWQyID0gYW5hbHlzZXMuZ2V0KGFuYWx5c2lzSWQpO1xuICAgIGlmICh1cGRhdGVkMikge1xuICAgICAgdXBkYXRlZDIuZGVjaXNpb25NYWtlcnMgPSBkZWNpc2lvbk1ha2VycztcbiAgICAgIHVwZGF0ZWQyLnVwZGF0ZWRBdCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICAgIGFuYWx5c2VzLnNldChhbmFseXNpc0lkLCB1cGRhdGVkMik7XG4gICAgfVxuXG4gICAgLy8gU3RhZ2UgMzogU3RyYXRlZ3kgR2VuZXJhdGlvblxuICAgIGNvbnNvbGUubG9nKGBbV09SS0ZMT1ddIFN0YWdlIDM6IEdlbmVyYXRpbmcgc3RyYXRlZ3kuLi5gKTtcbiAgICBhd2FpdCB1cGRhdGVTdGF0dXMoJ3N0cmF0ZWdpemluZycpO1xuXG4gICAgY29uc3Qgc3RyYXRlZ3kgPSBhd2FpdCBnZW1pbmkuZ2VuZXJhdGVCRFJTdHJhdGVneShcbiAgICAgIGNvbXBhbnlOYW1lLFxuICAgICAgY29tcGFueVByb2ZpbGUsXG4gICAgICBkZWNpc2lvbk1ha2Vyc1xuICAgICk7XG4gICAgY29uc29sZS5sb2coYFtXT1JLRkxPV10gU3RhZ2UgMzogU3RyYXRlZ3kgY29tcGxldGVgKTtcblxuICAgIC8vIFVwZGF0ZSBhbmFseXNpcyB3aXRoIHN0cmF0ZWd5XG4gICAgYXdhaXQgcHJpc21hLmFuYWx5c2lzLnVwZGF0ZSh7XG4gICAgICB3aGVyZTogeyBpZDogYW5hbHlzaXNJZCB9LFxuICAgICAgZGF0YToge1xuICAgICAgICBzdHJhdGVneTogc3RyYXRlZ3ksXG4gICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICAvLyBVcGRhdGUgY2FjaGVcbiAgICBjb25zdCB1cGRhdGVkMyA9IGFuYWx5c2VzLmdldChhbmFseXNpc0lkKTtcbiAgICBpZiAodXBkYXRlZDMpIHtcbiAgICAgIHVwZGF0ZWQzLnN0cmF0ZWd5ID0gc3RyYXRlZ3k7XG4gICAgICB1cGRhdGVkMy51cGRhdGVkQXQgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgICBhbmFseXNlcy5zZXQoYW5hbHlzaXNJZCwgdXBkYXRlZDMpO1xuICAgIH1cblxuICAgIC8vIFN0YWdlIDQ6IERlZXAgUmVzZWFyY2ggKEFnZW50aWMgd2l0aCBHb29nbGUgU2VhcmNoIGdyb3VuZGluZylcbiAgICBjb25zb2xlLmxvZyhgW1dPUktGTE9XXSBTdGFnZSA0OiBTdGFydGluZyBEZWVwIFJlc2VhcmNoIHdpdGggYWdlbnRpYyBiZWhhdmlvciBmb3IgJHtjb21wYW55TmFtZX1gKTtcbiAgICBhd2FpdCB1cGRhdGVTdGF0dXMoJ3Jlc2VhcmNoaW5nJyk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgZGVlcFJlc2VhcmNoU2VydmljZSA9IGdldERlZXBSZXNlYXJjaFNlcnZpY2UoKTtcbiAgICAgIGNvbnN0IGRlZXBSZXNlYXJjaFJlc3VsdCA9IGF3YWl0IGRlZXBSZXNlYXJjaFNlcnZpY2UucmVzZWFyY2hDb21wYW55KFxuICAgICAgICBjb21wYW55TmFtZSxcbiAgICAgICAgZGlzY292ZXJlZFVybFxuICAgICAgKTtcbiAgICAgIGNvbnNvbGUubG9nKGBbV09SS0ZMT1ddIFN0YWdlIDQ6IERlZXAgUmVzZWFyY2ggY29tcGxldGUgd2l0aCAke2RlZXBSZXNlYXJjaFJlc3VsdC5zb3VyY2VzLmxlbmd0aH0gc291cmNlc2ApO1xuXG4gICAgICAvLyBVcGRhdGUgYW5hbHlzaXMgd2l0aCBkZWVwIHJlc2VhcmNoXG4gICAgICBhd2FpdCBwcmlzbWEuYW5hbHlzaXMudXBkYXRlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IGFuYWx5c2lzSWQgfSxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIGRlZXBSZXNlYXJjaDogZGVlcFJlc2VhcmNoUmVzdWx0LFxuICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBVcGRhdGUgY2FjaGUgd2l0aCBkZWVwIHJlc2VhcmNoXG4gICAgICBjb25zdCB1cGRhdGVkNCA9IGFuYWx5c2VzLmdldChhbmFseXNpc0lkKTtcbiAgICAgIGlmICh1cGRhdGVkNCkge1xuICAgICAgICAodXBkYXRlZDQgYXMgYW55KS5kZWVwUmVzZWFyY2ggPSBkZWVwUmVzZWFyY2hSZXN1bHQ7XG4gICAgICAgIHVwZGF0ZWQ0LnVwZGF0ZWRBdCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICAgICAgYW5hbHlzZXMuc2V0KGFuYWx5c2lzSWQsIHVwZGF0ZWQ0KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChkZWVwUmVzZWFyY2hFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihgW1dPUktGTE9XXSBTdGFnZSA0OiBEZWVwIFJlc2VhcmNoIGZhaWxlZCAobm9uLWZhdGFsKTpgLCBkZWVwUmVzZWFyY2hFcnJvcik7XG4gICAgICAvLyBDb250aW51ZSBldmVuIGlmIGRlZXAgcmVzZWFyY2ggZmFpbHMgLSBpdCdzIGFuIGVuaGFuY2VtZW50LCBub3QgYSByZXF1aXJlbWVudFxuICAgIH1cblxuICAgIC8vIFN0YWdlIDU6IENvbXBsZXRlXG4gICAgY29uc29sZS5sb2coYFtXT1JLRkxPV10gU3RhZ2UgNTogQW5hbHlzaXMgY29tcGxldGUgZm9yICR7Y29tcGFueU5hbWV9YCk7XG5cbiAgICAvLyBVcGRhdGUgc3RhdHVzIHRvIGNvbXBsZXRlZCBpbiBkYXRhYmFzZVxuICAgIGF3YWl0IHByaXNtYS5hbmFseXNpcy51cGRhdGUoe1xuICAgICAgd2hlcmU6IHsgaWQ6IGFuYWx5c2lzSWQgfSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgc3RhdHVzOiAnY29tcGxldGVkJyxcbiAgICAgICAgY29tcGxldGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICAvLyBVcGRhdGUgY2FjaGVcbiAgICBjb25zdCB1cGRhdGVkNSA9IGFuYWx5c2VzLmdldChhbmFseXNpc0lkKTtcbiAgICBpZiAodXBkYXRlZDUpIHtcbiAgICAgIHVwZGF0ZWQ1LnN0YXR1cyA9ICdjb21wbGV0ZWQnO1xuICAgICAgdXBkYXRlZDUuY29tcGxldGVkQXQgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgICB1cGRhdGVkNS51cGRhdGVkQXQgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgICBhbmFseXNlcy5zZXQoYW5hbHlzaXNJZCwgdXBkYXRlZDUpO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKGBbV09SS0ZMT1ddIEVSUk9SIGZvciAke2NvbXBhbnlOYW1lfTpgLCBlcnJvcik7XG4gICAgY29uc29sZS5lcnJvcihgW1dPUktGTE9XXSBFcnJvciBzdGFjazpgLCBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiAnTm8gc3RhY2snKTtcblxuICAgIC8vIFVwZGF0ZSBzdGF0dXMgdG8gZmFpbGVkIGluIGRhdGFiYXNlXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnV29ya2Zsb3cgZXhlY3V0aW9uIGZhaWxlZCc7XG4gICAgYXdhaXQgcHJpc21hLmFuYWx5c2lzLnVwZGF0ZSh7XG4gICAgICB3aGVyZTogeyBpZDogYW5hbHlzaXNJZCB9LFxuICAgICAgZGF0YToge1xuICAgICAgICBzdGF0dXM6ICdmYWlsZWQnLFxuICAgICAgICBlcnJvcjogZXJyb3JNZXNzYWdlLFxuICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgLy8gVXBkYXRlIGNhY2hlXG4gICAgY29uc3QgZmFpbGVkQW5hbHlzaXMgPSBhbmFseXNlcy5nZXQoYW5hbHlzaXNJZCk7XG4gICAgaWYgKGZhaWxlZEFuYWx5c2lzKSB7XG4gICAgICBmYWlsZWRBbmFseXNpcy5zdGF0dXMgPSAnZmFpbGVkJztcbiAgICAgIGZhaWxlZEFuYWx5c2lzLmVycm9yID0gZXJyb3JNZXNzYWdlO1xuICAgICAgZmFpbGVkQW5hbHlzaXMudXBkYXRlZEF0ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgICAgYW5hbHlzZXMuc2V0KGFuYWx5c2lzSWQsIGZhaWxlZEFuYWx5c2lzKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFtXT1JLRkxPV10gQW5hbHlzaXMgJHthbmFseXNpc0lkfSBtYXJrZWQgYXMgZmFpbGVkYCk7XG4gICAgfVxuICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwicHJpc21hIiwiZ2V0R2VtaW5pRW5oYW5jZWRTZXJ2aWNlIiwiZ2V0RGVlcFJlc2VhcmNoU2VydmljZSIsImFuYWx5c2VzIiwiTWFwIiwiUE9TVCIsInJlcXVlc3QiLCJib2R5IiwianNvbiIsImNvbXBhbnlOYW1lIiwiZXJyb3IiLCJtZXNzYWdlIiwic3RhdHVzIiwiY29tcGFueVVybCIsIlVSTCIsImFuYWx5c2lzIiwiY3JlYXRlIiwiZGF0YSIsImNvbXBhbnlQcm9maWxlIiwibmFtZSIsInVybCIsImRlY2lzaW9uTWFrZXJzIiwic3RyYXRlZ3kiLCJhcHByb2FjaCIsImNoYW5uZWxzIiwibWVzc2FnaW5nIiwic3ViamVjdCIsImNhbGxUb0FjdGlvbiIsInRpbWluZyIsImJlc3REYXlzIiwiYmVzdFRpbWVzIiwicGFpblBvaW50cyIsInZhbHVlUHJvcG9zaXRpb25zIiwiYW5hbHlzaXNJZCIsImlkIiwiYW5hbHlzaXNSZXN1bHQiLCJpbmR1c3RyeSIsInNpemUiLCJkZXNjcmlwdGlvbiIsImhlYWRxdWFydGVycyIsImZvdW5kZWQiLCJjcmVhdGVkQXQiLCJ0b0lTT1N0cmluZyIsInVwZGF0ZWRBdCIsInNldCIsImV4ZWN1dGVXb3JrZmxvd1dpdGhHZW1pbmkiLCJ0YXJnZXRSb2xlIiwiZGVwYXJ0bWVudCIsInJlc3BvbnNlIiwiZXN0aW1hdGVkQ29tcGxldGlvblRpbWUiLCJjb25zb2xlIiwiR0VUIiwic2VhcmNoUGFyYW1zIiwibmV4dFVybCIsInBhZ2UiLCJwYXJzZUludCIsImdldCIsInBhZ2VTaXplIiwic2tpcCIsInRvdGFsIiwiY291bnQiLCJmaW5kTWFueSIsIm9yZGVyQnkiLCJ0YWtlIiwiYW5hbHlzZXNMaXN0IiwibWFwIiwicm93IiwiY29tcGxldGVkQXQiLCJ1bmRlZmluZWQiLCJnZW1pbmkiLCJsb2ciLCJ1cGRhdGVTdGF0dXMiLCJ1cGRhdGUiLCJ3aGVyZSIsIkRhdGUiLCJjdXJyZW50IiwiZGlzY292ZXJlZFVybCIsInVybFJlc3VsdCIsImZpbmRDb21wYW55VXJsIiwiY29uZmlkZW5jZSIsInNvdXJjZXMiLCJwcm9maWxlQ29tcGFueSIsInVwZGF0ZWQxIiwiaWRlbnRpZnlEZWNpc2lvbk1ha2VycyIsImxlbmd0aCIsInVwZGF0ZWQyIiwiZ2VuZXJhdGVCRFJTdHJhdGVneSIsInVwZGF0ZWQzIiwiZGVlcFJlc2VhcmNoU2VydmljZSIsImRlZXBSZXNlYXJjaFJlc3VsdCIsInJlc2VhcmNoQ29tcGFueSIsImRlZXBSZXNlYXJjaCIsInVwZGF0ZWQ0IiwiZGVlcFJlc2VhcmNoRXJyb3IiLCJ1cGRhdGVkNSIsIkVycm9yIiwic3RhY2siLCJlcnJvck1lc3NhZ2UiLCJmYWlsZWRBbmFseXNpcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/analyze/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db/prisma.ts":
/*!**************************!*\
  !*** ./lib/db/prisma.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\n// Explicitly use BDR Hunter's database URL\nconst BDR_HUNTER_DATABASE_URL = \"postgresql://postgres:postgres@localhost:5433/bdr_hunter?schema=public\";\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    datasources: {\n        db: {\n            url: BDR_HUNTER_DATABASE_URL\n        }\n    }\n});\nif (true) globalForPrisma.prisma = prisma;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZGIvcHJpc21hLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE2QztBQUU3QywyQ0FBMkM7QUFDM0MsTUFBTUMsMEJBQTBCO0FBRWhDLE1BQU1DLGtCQUFrQkM7QUFJakIsTUFBTUMsU0FBU0YsZ0JBQWdCRSxNQUFNLElBQUksSUFBSUosd0RBQVlBLENBQUM7SUFDL0RLLGFBQWE7UUFDWEMsSUFBSTtZQUNGQyxLQUFLTjtRQUNQO0lBQ0Y7QUFDRixHQUFFO0FBRUYsSUFBSU8sSUFBeUIsRUFBY04sZ0JBQWdCRSxNQUFNLEdBQUdBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmRyLWh1bnRlci1hcHAvLi9saWIvZGIvcHJpc21hLnRzPzA5NjAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSAnQHByaXNtYS9jbGllbnQnXG5cbi8vIEV4cGxpY2l0bHkgdXNlIEJEUiBIdW50ZXIncyBkYXRhYmFzZSBVUkxcbmNvbnN0IEJEUl9IVU5URVJfREFUQUJBU0VfVVJMID0gXCJwb3N0Z3Jlc3FsOi8vcG9zdGdyZXM6cG9zdGdyZXNAbG9jYWxob3N0OjU0MzMvYmRyX2h1bnRlcj9zY2hlbWE9cHVibGljXCJcblxuY29uc3QgZ2xvYmFsRm9yUHJpc21hID0gZ2xvYmFsVGhpcyBhcyB1bmtub3duIGFzIHtcbiAgcHJpc21hOiBQcmlzbWFDbGllbnQgfCB1bmRlZmluZWRcbn1cblxuZXhwb3J0IGNvbnN0IHByaXNtYSA9IGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPz8gbmV3IFByaXNtYUNsaWVudCh7XG4gIGRhdGFzb3VyY2VzOiB7XG4gICAgZGI6IHtcbiAgICAgIHVybDogQkRSX0hVTlRFUl9EQVRBQkFTRV9VUkwsXG4gICAgfSxcbiAgfSxcbn0pXG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSBnbG9iYWxGb3JQcmlzbWEucHJpc21hID0gcHJpc21hXG4iXSwibmFtZXMiOlsiUHJpc21hQ2xpZW50IiwiQkRSX0hVTlRFUl9EQVRBQkFTRV9VUkwiLCJnbG9iYWxGb3JQcmlzbWEiLCJnbG9iYWxUaGlzIiwicHJpc21hIiwiZGF0YXNvdXJjZXMiLCJkYiIsInVybCIsInByb2Nlc3MiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/db/prisma.ts\n");

/***/ }),

/***/ "(rsc)/./lib/services/deep-research.ts":
/*!***************************************!*\
  !*** ./lib/services/deep-research.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DeepResearchService: () => (/* binding */ DeepResearchService),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getDeepResearchService: () => (/* binding */ getDeepResearchService)\n/* harmony export */ });\n/**\n * Deep Research Service - Agentic AI Research System\n *\n * Features:\n * - Multi-stage research with iterative refinement\n * - Google Search grounding for real-time information\n * - Thinking/reasoning capabilities (Gemini 2.5 Pro)\n * - Structured output with citations\n * - Agentic workflow with self-correction\n *\n * References:\n * - https://ai.google.dev/gemini-api/docs/google-search\n * - https://blog.google/technology/google-deepmind/gemini-model-thinking-updates-march-2025/\n */ /**\n * Deep Research Service with Agentic Behavior\n */ class DeepResearchService {\n    constructor(config){\n        this.baseUrl = \"https://generativelanguage.googleapis.com/v1beta/models\";\n        this.apiKey = config.apiKey;\n        this.model = config.model || \"gemini-2.5-flash\";\n        this.thinkingLevel = config.thinkingLevel || \"medium\";\n        this.maxIterations = config.maxIterations || 3;\n    }\n    /**\n   * Execute a grounded search query with thinking\n   */ async groundedSearch(prompt, options) {\n        const request = {\n            contents: [\n                {\n                    role: \"user\",\n                    parts: [\n                        {\n                            text: prompt\n                        }\n                    ]\n                }\n            ],\n            generationConfig: {\n                temperature: options?.temperature || 0.3,\n                maxOutputTokens: 8192,\n                topK: 40,\n                topP: 0.95\n            },\n            tools: [\n                {\n                    googleSearch: {}\n                }\n            ]\n        };\n        const url = `${this.baseUrl}/${this.model}:generateContent?key=${this.apiKey}`;\n        try {\n            const response = await fetch(url, {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify(request)\n            });\n            if (!response.ok) {\n                const error = await response.json();\n                throw new Error(`Gemini API error: ${error.error?.message || \"Unknown error\"}`);\n            }\n            const data = await response.json();\n            if (!data.candidates || data.candidates.length === 0) {\n                throw new Error(\"No response from Gemini API\");\n            }\n            const candidate = data.candidates[0];\n            const text = candidate.content?.parts?.[0]?.text || \"\";\n            const groundingMetadata = candidate.groundingMetadata || {};\n            // Extract sources from grounding metadata\n            const sources = (groundingMetadata.groundingChunks || []).map((chunk, index)=>({\n                    title: chunk.web?.title || `Source ${index + 1}`,\n                    url: chunk.web?.uri || \"\",\n                    snippet: \"\",\n                    relevance: 1.0 - index * 0.1\n                }));\n            const searchQueries = groundingMetadata.webSearchQueries || [];\n            return {\n                text,\n                sources,\n                searchQueries\n            };\n        } catch (error) {\n            console.error(\"[DEEP_RESEARCH] Grounded search error:\", error);\n            throw error;\n        }\n    }\n    /**\n   * Extract JSON from response text\n   */ extractJSON(text) {\n        if (!text) {\n            throw new Error(\"Empty response\");\n        }\n        // Remove markdown code blocks\n        const codeBlockMatch = text.match(/```(?:json)?\\s*([\\s\\S]*?)\\s*```/);\n        if (codeBlockMatch) {\n            return JSON.parse(codeBlockMatch[1].trim());\n        }\n        // Try to find JSON object or array\n        const jsonMatch = text.match(/(\\{[\\s\\S]*\\}|\\[[\\s\\S]*\\])/);\n        if (jsonMatch) {\n            return JSON.parse(jsonMatch[1].trim());\n        }\n        return JSON.parse(text.trim());\n    }\n    /**\n   * Research Phase 1: Initial Discovery\n   */ async discoveryPhase(companyName, companyUrl) {\n        console.log(`[DEEP_RESEARCH] Phase 1: Discovery for ${companyName}`);\n        const prompt = `${companyName}${companyUrl ? `: ${companyUrl}` : \"\"}\n\n\n1. \n2. \n3. \n4. \n5. \n6. \n7. \n8. CEOCTOCFO\n9. \n10. \n\n**: **\n\nJSON\n{\n  \"companyProfile\": {\n    \"name\": \"\",\n    \"officialName\": \"\",\n    \"description\": \"2-3\",\n    \"industry\": \"\",\n    \"subIndustry\": \"\",\n    \"founded\": \"\",\n    \"headquarters\": \"\",\n    \"employees\": \"\",\n    \"revenue\": \"\",\n    \"stockSymbol\": \"null\",\n    \"website\": \"URL\"\n  },\n  \"leadership\": [\n    {\"name\": \"\", \"title\": \"\", \"background\": \"\"}\n  ],\n  \"recentDevelopments\": [\"1\", \"2\"]\n}\n\nJSON`;\n        const result = await this.groundedSearch(prompt);\n        const basicInfo = this.extractJSON(result.text);\n        return {\n            basicInfo,\n            sources: result.sources,\n            queries: result.searchQueries\n        };\n    }\n    /**\n   * Research Phase 2: Business Deep Dive\n   */ async businessDeepDive(companyName, basicInfo) {\n        console.log(`[DEEP_RESEARCH] Phase 2: Business Deep Dive for ${companyName}`);\n        const prompt = `${companyName}${basicInfo.industry || \"\"}\n\n\n1. \n2. \n3. \n4. \n5. \n6. \n\n**: **\n\nJSON\n{\n  \"businessModel\": {\n    \"description\": \"\",\n    \"revenueStreams\": [\"1\", \"2\"],\n    \"targetMarket\": \"\",\n    \"competitiveAdvantage\": [\"1\", \"2\"]\n  },\n  \"techStack\": [\n    {\"category\": \"\", \"technologies\": [\"1\", \"2\"]},\n    {\"category\": \"\", \"technologies\": [\"1\", \"2\"]},\n    {\"category\": \"\", \"technologies\": [\"1\", \"2\"]}\n  ],\n  \"products\": [\n    {\"name\": \"\", \"description\": \"\", \"marketPosition\": \"/\"}\n  ]\n}\n\nJSON`;\n        const result = await this.groundedSearch(prompt);\n        const data = this.extractJSON(result.text);\n        return {\n            businessModel: data.businessModel || {},\n            techStack: data.techStack || [],\n            sources: result.sources,\n            queries: result.searchQueries\n        };\n    }\n    /**\n   * Research Phase 3: Challenges & Opportunities Analysis\n   */ async challengesAnalysis(companyName, basicInfo, businessModel) {\n        console.log(`[DEEP_RESEARCH] Phase 3: Challenges & Opportunities for ${companyName}`);\n        const prompt = `${companyName}\n\n\n- : ${basicInfo.industry || \"\"}\n- : ${basicInfo.employees || \"\"}\n- : ${businessModel?.description || \"\"}\n\n\n1. \n2. \n3. \n4. \n5. \n6. \n\n**: **\n\nJSON\n{\n  \"challenges\": [\n    {\"challenge\": \"\", \"severity\": \"high|medium|low\", \"evidence\": \"\"}\n  ],\n  \"opportunities\": [\n    {\"opportunity\": \"\", \"relevance\": \"high|medium|low\", \"rationale\": \"BDR\"}\n  ]\n}\n\nB2BJSON`;\n        const result = await this.groundedSearch(prompt, {\n            temperature: 0.5\n        });\n        const data = this.extractJSON(result.text);\n        return {\n            challenges: data.challenges || [],\n            opportunities: data.opportunities || [],\n            sources: result.sources,\n            queries: result.searchQueries\n        };\n    }\n    /**\n   * Research Phase 4: Recent News & Events\n   */ async newsResearch(companyName) {\n        console.log(`[DEEP_RESEARCH] Phase 4: Recent News for ${companyName}`);\n        const prompt = `${companyName}\n\n\n1. \n2. \n3. \n4. \n5. \n6. \n7. \n\n**: **\n\nJSON\n{\n  \"news\": [\n    {\n      \"title\": \"\",\n      \"date\": \"YYYY-MM \",\n      \"summary\": \"2-3\",\n      \"source\": \"\",\n      \"url\": \"URL\",\n      \"relevance\": \"\"\n    }\n  ]\n}\n\n12JSON`;\n        const result = await this.groundedSearch(prompt);\n        const data = this.extractJSON(result.text);\n        return {\n            news: data.news || [],\n            sources: result.sources,\n            queries: result.searchQueries\n        };\n    }\n    /**\n   * Execute Full Deep Research\n   */ async researchCompany(companyName, companyUrl) {\n        console.log(`[DEEP_RESEARCH] Starting deep research for: ${companyName}`);\n        const startTime = Date.now();\n        const allSources = [];\n        const allQueries = [];\n        try {\n            // Phase 1: Discovery\n            const discovery = await this.discoveryPhase(companyName, companyUrl);\n            allSources.push(...discovery.sources);\n            allQueries.push(...discovery.queries);\n            // Phase 2: Business Deep Dive\n            const business = await this.businessDeepDive(companyName, discovery.basicInfo);\n            allSources.push(...business.sources);\n            allQueries.push(...business.queries);\n            // Phase 3: Challenges & Opportunities\n            const analysis = await this.challengesAnalysis(companyName, discovery.basicInfo, business.businessModel);\n            allSources.push(...analysis.sources);\n            allQueries.push(...analysis.queries);\n            // Phase 4: Recent News\n            const news = await this.newsResearch(companyName);\n            allSources.push(...news.sources);\n            allQueries.push(...news.queries);\n            // Deduplicate sources\n            const uniqueSources = this.deduplicateSources(allSources);\n            // Calculate confidence score based on source count and diversity\n            const confidenceScore = Math.min(0.95, 0.5 + uniqueSources.length * 0.05);\n            const duration = (Date.now() - startTime) / 1000;\n            console.log(`[DEEP_RESEARCH] Completed in ${duration.toFixed(1)}s with ${uniqueSources.length} sources`);\n            return {\n                companyProfile: {\n                    ...discovery.basicInfo.companyProfile,\n                    website: companyUrl || discovery.basicInfo.companyProfile?.website || \"\"\n                },\n                businessModel: business.businessModel,\n                recentNews: news.news.slice(0, 5),\n                leadership: discovery.basicInfo.leadership || [],\n                techStack: business.techStack,\n                challenges: analysis.challenges.slice(0, 5),\n                opportunities: analysis.opportunities.slice(0, 5),\n                sources: uniqueSources,\n                researchMetadata: {\n                    iterations: 4,\n                    searchQueries: [\n                        ...new Set(allQueries)\n                    ],\n                    confidenceScore,\n                    completedAt: new Date().toISOString()\n                }\n            };\n        } catch (error) {\n            console.error(\"[DEEP_RESEARCH] Error:\", error);\n            throw error;\n        }\n    }\n    /**\n   * Deduplicate sources by URL\n   */ deduplicateSources(sources) {\n        const seen = new Set();\n        return sources.filter((source)=>{\n            if (!source.url || seen.has(source.url)) {\n                return false;\n            }\n            seen.add(source.url);\n            return true;\n        });\n    }\n}\n// Singleton instance\nlet deepResearchService = null;\nfunction getDeepResearchService() {\n    if (!deepResearchService) {\n        const apiKey = process.env.GEMINI_API_KEY;\n        if (!apiKey) {\n            throw new Error(\"GEMINI_API_KEY environment variable is not set\");\n        }\n        deepResearchService = new DeepResearchService({\n            apiKey,\n            model: \"gemini-2.5-flash\",\n            thinkingLevel: \"medium\",\n            maxIterations: 3\n        });\n    }\n    return deepResearchService;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (DeepResearchService);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNabEQsZUFBZTsyQkFBSSxJQUFJbUQsSUFBSW5CO3FCQUFZO29CQUN2Q087b0JBQ0FhLGFBQWEsSUFBSXZCLE9BQU93QixXQUFXO2dCQUNyQztZQUNGO1FBQ0YsRUFBRSxPQUFPekUsT0FBTztZQUNkc0IsUUFBUXRCLEtBQUssQ0FBQywwQkFBMEJBO1lBQ3hDLE1BQU1BO1FBQ1I7SUFDRjtJQUVBOztHQUVDLEdBQ0QsbUJBQTJCVSxPQUF5QixFQUFvQjtRQUN0RSxNQUFNZ0UsT0FBTyxJQUFJSDtRQUNqQixPQUFPN0QsUUFBUWlFLE1BQU0sQ0FBQ0MsQ0FBQUE7WUFDcEIsSUFBSSxDQUFDQSxPQUFPckYsR0FBRyxJQUFJbUYsS0FBS0csR0FBRyxDQUFDRCxPQUFPckYsR0FBRyxHQUFHO2dCQUN2QyxPQUFPO1lBQ1Q7WUFDQW1GLEtBQUtJLEdBQUcsQ0FBQ0YsT0FBT3JGLEdBQUc7WUFDbkIsT0FBTztRQUNUO0lBQ0Y7QUFDRjtBQUVBLHFCQUFxQjtBQUNyQixJQUFJd0Ysc0JBQWtEO0FBRS9DLFNBQVNDO0lBQ2QsSUFBSSxDQUFDRCxxQkFBcUI7UUFDeEIsTUFBTTNHLFNBQVM2RyxRQUFRQyxHQUFHLENBQUNDLGNBQWM7UUFFekMsSUFBSSxDQUFDL0csUUFBUTtZQUNYLE1BQU0sSUFBSThCLE1BQU07UUFDbEI7UUFFQTZFLHNCQUFzQixJQUFJL0csb0JBQW9CO1lBQzVDSTtZQUNBQyxPQUFPO1lBQ1BDLGVBQWU7WUFDZkMsZUFBZTtRQUNqQjtJQUNGO0lBRUEsT0FBT3dHO0FBQ1Q7QUFFQSxpRUFBZS9HLG1CQUFtQkEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2Jkci1odW50ZXItYXBwLy4vbGliL3NlcnZpY2VzL2RlZXAtcmVzZWFyY2gudHM/NmJhYiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIERlZXAgUmVzZWFyY2ggU2VydmljZSAtIEFnZW50aWMgQUkgUmVzZWFyY2ggU3lzdGVtXG4gKlxuICogRmVhdHVyZXM6XG4gKiAtIE11bHRpLXN0YWdlIHJlc2VhcmNoIHdpdGggaXRlcmF0aXZlIHJlZmluZW1lbnRcbiAqIC0gR29vZ2xlIFNlYXJjaCBncm91bmRpbmcgZm9yIHJlYWwtdGltZSBpbmZvcm1hdGlvblxuICogLSBUaGlua2luZy9yZWFzb25pbmcgY2FwYWJpbGl0aWVzIChHZW1pbmkgMi41IFBybylcbiAqIC0gU3RydWN0dXJlZCBvdXRwdXQgd2l0aCBjaXRhdGlvbnNcbiAqIC0gQWdlbnRpYyB3b3JrZmxvdyB3aXRoIHNlbGYtY29ycmVjdGlvblxuICpcbiAqIFJlZmVyZW5jZXM6XG4gKiAtIGh0dHBzOi8vYWkuZ29vZ2xlLmRldi9nZW1pbmktYXBpL2RvY3MvZ29vZ2xlLXNlYXJjaFxuICogLSBodHRwczovL2Jsb2cuZ29vZ2xlL3RlY2hub2xvZ3kvZ29vZ2xlLWRlZXBtaW5kL2dlbWluaS1tb2RlbC10aGlua2luZy11cGRhdGVzLW1hcmNoLTIwMjUvXG4gKi9cblxuZXhwb3J0IGludGVyZmFjZSBEZWVwUmVzZWFyY2hDb25maWcge1xuICBhcGlLZXk6IHN0cmluZztcbiAgbW9kZWw/OiAnZ2VtaW5pLTIuNS1wcm8nIHwgJ2dlbWluaS0yLjUtZmxhc2gnIHwgJ2dlbWluaS0yLjAtZmxhc2gnO1xuICB0aGlua2luZ0xldmVsPzogJ2xvdycgfCAnbWVkaXVtJyB8ICdoaWdoJztcbiAgbWF4SXRlcmF0aW9ucz86IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZXNlYXJjaFJlc3VsdCB7XG4gIHN1bW1hcnk6IHN0cmluZztcbiAgc2VjdGlvbnM6IFJlc2VhcmNoU2VjdGlvbltdO1xuICBzb3VyY2VzOiBSZXNlYXJjaFNvdXJjZVtdO1xuICBjb25maWRlbmNlOiBudW1iZXI7XG4gIGl0ZXJhdGlvbnM6IG51bWJlcjtcbiAgdGhpbmtpbmdQcm9jZXNzPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJlc2VhcmNoU2VjdGlvbiB7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIGNvbnRlbnQ6IHN0cmluZztcbiAgc291cmNlczogc3RyaW5nW107XG4gIGNvbmZpZGVuY2U6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZXNlYXJjaFNvdXJjZSB7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIHVybDogc3RyaW5nO1xuICBzbmlwcGV0Pzogc3RyaW5nO1xuICByZWxldmFuY2U6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb21wYW55RGVlcFJlc2VhcmNoIHtcbiAgY29tcGFueVByb2ZpbGU6IHtcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgb2ZmaWNpYWxOYW1lOiBzdHJpbmc7XG4gICAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgICBpbmR1c3RyeTogc3RyaW5nO1xuICAgIHN1YkluZHVzdHJ5OiBzdHJpbmc7XG4gICAgZm91bmRlZDogc3RyaW5nO1xuICAgIGhlYWRxdWFydGVyczogc3RyaW5nO1xuICAgIGVtcGxveWVlczogc3RyaW5nO1xuICAgIHJldmVudWU6IHN0cmluZztcbiAgICBzdG9ja1N5bWJvbD86IHN0cmluZztcbiAgICB3ZWJzaXRlOiBzdHJpbmc7XG4gIH07XG4gIGJ1c2luZXNzTW9kZWw6IHtcbiAgICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICAgIHJldmVudWVTdHJlYW1zOiBzdHJpbmdbXTtcbiAgICB0YXJnZXRNYXJrZXQ6IHN0cmluZztcbiAgICBjb21wZXRpdGl2ZUFkdmFudGFnZTogc3RyaW5nW107XG4gIH07XG4gIHJlY2VudE5ld3M6IHtcbiAgICB0aXRsZTogc3RyaW5nO1xuICAgIGRhdGU6IHN0cmluZztcbiAgICBzdW1tYXJ5OiBzdHJpbmc7XG4gICAgc291cmNlOiBzdHJpbmc7XG4gICAgdXJsOiBzdHJpbmc7XG4gIH1bXTtcbiAgbGVhZGVyc2hpcDoge1xuICAgIG5hbWU6IHN0cmluZztcbiAgICB0aXRsZTogc3RyaW5nO1xuICAgIGJhY2tncm91bmQ6IHN0cmluZztcbiAgICBsaW5rZWRpblVybD86IHN0cmluZztcbiAgfVtdO1xuICB0ZWNoU3RhY2s6IHtcbiAgICBjYXRlZ29yeTogc3RyaW5nO1xuICAgIHRlY2hub2xvZ2llczogc3RyaW5nW107XG4gIH1bXTtcbiAgY2hhbGxlbmdlczoge1xuICAgIGNoYWxsZW5nZTogc3RyaW5nO1xuICAgIHNldmVyaXR5OiAnaGlnaCcgfCAnbWVkaXVtJyB8ICdsb3cnO1xuICAgIGV2aWRlbmNlOiBzdHJpbmc7XG4gIH1bXTtcbiAgb3Bwb3J0dW5pdGllczoge1xuICAgIG9wcG9ydHVuaXR5OiBzdHJpbmc7XG4gICAgcmVsZXZhbmNlOiAnaGlnaCcgfCAnbWVkaXVtJyB8ICdsb3cnO1xuICAgIHJhdGlvbmFsZTogc3RyaW5nO1xuICB9W107XG4gIHNvdXJjZXM6IFJlc2VhcmNoU291cmNlW107XG4gIHJlc2VhcmNoTWV0YWRhdGE6IHtcbiAgICBpdGVyYXRpb25zOiBudW1iZXI7XG4gICAgc2VhcmNoUXVlcmllczogc3RyaW5nW107XG4gICAgY29uZmlkZW5jZVNjb3JlOiBudW1iZXI7XG4gICAgY29tcGxldGVkQXQ6IHN0cmluZztcbiAgfTtcbn1cblxuLyoqXG4gKiBEZWVwIFJlc2VhcmNoIFNlcnZpY2Ugd2l0aCBBZ2VudGljIEJlaGF2aW9yXG4gKi9cbmV4cG9ydCBjbGFzcyBEZWVwUmVzZWFyY2hTZXJ2aWNlIHtcbiAgcHJpdmF0ZSBhcGlLZXk6IHN0cmluZztcbiAgcHJpdmF0ZSBtb2RlbDogc3RyaW5nO1xuICBwcml2YXRlIHRoaW5raW5nTGV2ZWw6IHN0cmluZztcbiAgcHJpdmF0ZSBtYXhJdGVyYXRpb25zOiBudW1iZXI7XG4gIHByaXZhdGUgYmFzZVVybDogc3RyaW5nID0gJ2h0dHBzOi8vZ2VuZXJhdGl2ZWxhbmd1YWdlLmdvb2dsZWFwaXMuY29tL3YxYmV0YS9tb2RlbHMnO1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogRGVlcFJlc2VhcmNoQ29uZmlnKSB7XG4gICAgdGhpcy5hcGlLZXkgPSBjb25maWcuYXBpS2V5O1xuICAgIHRoaXMubW9kZWwgPSBjb25maWcubW9kZWwgfHwgJ2dlbWluaS0yLjUtZmxhc2gnO1xuICAgIHRoaXMudGhpbmtpbmdMZXZlbCA9IGNvbmZpZy50aGlua2luZ0xldmVsIHx8ICdtZWRpdW0nO1xuICAgIHRoaXMubWF4SXRlcmF0aW9ucyA9IGNvbmZpZy5tYXhJdGVyYXRpb25zIHx8IDM7XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZSBhIGdyb3VuZGVkIHNlYXJjaCBxdWVyeSB3aXRoIHRoaW5raW5nXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGdyb3VuZGVkU2VhcmNoKFxuICAgIHByb21wdDogc3RyaW5nLFxuICAgIG9wdGlvbnM/OiB7IHRlbXBlcmF0dXJlPzogbnVtYmVyOyBzdHJ1Y3R1cmVkPzogYm9vbGVhbiB9XG4gICk6IFByb21pc2U8eyB0ZXh0OiBzdHJpbmc7IHNvdXJjZXM6IFJlc2VhcmNoU291cmNlW107IHNlYXJjaFF1ZXJpZXM6IHN0cmluZ1tdIH0+IHtcbiAgICBjb25zdCByZXF1ZXN0OiBhbnkgPSB7XG4gICAgICBjb250ZW50czogW1xuICAgICAgICB7XG4gICAgICAgICAgcm9sZTogJ3VzZXInLFxuICAgICAgICAgIHBhcnRzOiBbeyB0ZXh0OiBwcm9tcHQgfV0sXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgZ2VuZXJhdGlvbkNvbmZpZzoge1xuICAgICAgICB0ZW1wZXJhdHVyZTogb3B0aW9ucz8udGVtcGVyYXR1cmUgfHwgMC4zLFxuICAgICAgICBtYXhPdXRwdXRUb2tlbnM6IDgxOTIsXG4gICAgICAgIHRvcEs6IDQwLFxuICAgICAgICB0b3BQOiAwLjk1LFxuICAgICAgfSxcbiAgICAgIHRvb2xzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBnb29nbGVTZWFyY2g6IHt9LFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICB9O1xuXG4gICAgY29uc3QgdXJsID0gYCR7dGhpcy5iYXNlVXJsfS8ke3RoaXMubW9kZWx9OmdlbmVyYXRlQ29udGVudD9rZXk9JHt0aGlzLmFwaUtleX1gO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdCksXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICBjb25zdCBlcnJvciA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBHZW1pbmkgQVBJIGVycm9yOiAke2Vycm9yLmVycm9yPy5tZXNzYWdlIHx8ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgaWYgKCFkYXRhLmNhbmRpZGF0ZXMgfHwgZGF0YS5jYW5kaWRhdGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHJlc3BvbnNlIGZyb20gR2VtaW5pIEFQSScpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjYW5kaWRhdGUgPSBkYXRhLmNhbmRpZGF0ZXNbMF07XG4gICAgICBjb25zdCB0ZXh0ID0gY2FuZGlkYXRlLmNvbnRlbnQ/LnBhcnRzPy5bMF0/LnRleHQgfHwgJyc7XG4gICAgICBjb25zdCBncm91bmRpbmdNZXRhZGF0YSA9IGNhbmRpZGF0ZS5ncm91bmRpbmdNZXRhZGF0YSB8fCB7fTtcblxuICAgICAgLy8gRXh0cmFjdCBzb3VyY2VzIGZyb20gZ3JvdW5kaW5nIG1ldGFkYXRhXG4gICAgICBjb25zdCBzb3VyY2VzOiBSZXNlYXJjaFNvdXJjZVtdID0gKGdyb3VuZGluZ01ldGFkYXRhLmdyb3VuZGluZ0NodW5rcyB8fCBbXSkubWFwKChjaHVuazogYW55LCBpbmRleDogbnVtYmVyKSA9PiAoe1xuICAgICAgICB0aXRsZTogY2h1bmsud2ViPy50aXRsZSB8fCBgU291cmNlICR7aW5kZXggKyAxfWAsXG4gICAgICAgIHVybDogY2h1bmsud2ViPy51cmkgfHwgJycsXG4gICAgICAgIHNuaXBwZXQ6ICcnLFxuICAgICAgICByZWxldmFuY2U6IDEuMCAtIChpbmRleCAqIDAuMSksXG4gICAgICB9KSk7XG5cbiAgICAgIGNvbnN0IHNlYXJjaFF1ZXJpZXMgPSBncm91bmRpbmdNZXRhZGF0YS53ZWJTZWFyY2hRdWVyaWVzIHx8IFtdO1xuXG4gICAgICByZXR1cm4geyB0ZXh0LCBzb3VyY2VzLCBzZWFyY2hRdWVyaWVzIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tERUVQX1JFU0VBUkNIXSBHcm91bmRlZCBzZWFyY2ggZXJyb3I6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEV4dHJhY3QgSlNPTiBmcm9tIHJlc3BvbnNlIHRleHRcbiAgICovXG4gIHByaXZhdGUgZXh0cmFjdEpTT04odGV4dDogc3RyaW5nKTogYW55IHtcbiAgICBpZiAoIXRleHQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRW1wdHkgcmVzcG9uc2UnKTtcbiAgICB9XG5cbiAgICAvLyBSZW1vdmUgbWFya2Rvd24gY29kZSBibG9ja3NcbiAgICBjb25zdCBjb2RlQmxvY2tNYXRjaCA9IHRleHQubWF0Y2goL2BgYCg/Ompzb24pP1xccyooW1xcc1xcU10qPylcXHMqYGBgLyk7XG4gICAgaWYgKGNvZGVCbG9ja01hdGNoKSB7XG4gICAgICByZXR1cm4gSlNPTi5wYXJzZShjb2RlQmxvY2tNYXRjaFsxXS50cmltKCkpO1xuICAgIH1cblxuICAgIC8vIFRyeSB0byBmaW5kIEpTT04gb2JqZWN0IG9yIGFycmF5XG4gICAgY29uc3QganNvbk1hdGNoID0gdGV4dC5tYXRjaCgvKFxce1tcXHNcXFNdKlxcfXxcXFtbXFxzXFxTXSpcXF0pLyk7XG4gICAgaWYgKGpzb25NYXRjaCkge1xuICAgICAgcmV0dXJuIEpTT04ucGFyc2UoanNvbk1hdGNoWzFdLnRyaW0oKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIEpTT04ucGFyc2UodGV4dC50cmltKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlc2VhcmNoIFBoYXNlIDE6IEluaXRpYWwgRGlzY292ZXJ5XG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGRpc2NvdmVyeVBoYXNlKGNvbXBhbnlOYW1lOiBzdHJpbmcsIGNvbXBhbnlVcmw/OiBzdHJpbmcpOiBQcm9taXNlPHtcbiAgICBiYXNpY0luZm86IGFueTtcbiAgICBzb3VyY2VzOiBSZXNlYXJjaFNvdXJjZVtdO1xuICAgIHF1ZXJpZXM6IHN0cmluZ1tdO1xuICB9PiB7XG4gICAgY29uc29sZS5sb2coYFtERUVQX1JFU0VBUkNIXSBQaGFzZSAxOiBEaXNjb3ZlcnkgZm9yICR7Y29tcGFueU5hbWV9YCk7XG5cbiAgICBjb25zdCBwcm9tcHQgPSBg44GC44Gq44Gf44Gv5LyB5qWt6Kq/5p+744Ki44OK44Oq44K544OI44Gn44GZ44CC44CMJHtjb21wYW55TmFtZX3jgI0ke2NvbXBhbnlVcmwgPyBg77yI44Km44Kn44OW44K144Kk44OIOiAke2NvbXBhbnlVcmx977yJYCA6ICcnfeOBq+OBpOOBhOOBpuiqv+afu+OBl+OBpuOBj+OBoOOBleOBhOOAglxuXG7ku6XkuIvjga7mg4XloLHjgpLmpJzntKLjg7vlj47pm4bjgZfjgabjgY/jgaDjgZXjgYTvvJpcbjEuIOato+W8j+OBquS8muekvuWQjeODu+azleS6uuWQjVxuMi4g5qWt55WM44O744K144OW5qWt55WM44Gu5YiG6aGeXG4zLiDoqK3nq4vlubTjgajmsr/pnalcbjQuIOacrOekvuaJgOWcqOWcsFxuNS4g5b6T5qWt5ZOh5pWw77yI5qaC566X77yJXG42LiDlo7LkuIrpq5jjg7vos4fph5Hoqr/pgZTmg4XloLFcbjcuIOS4u+imgeOBquijveWTgeODu+OCteODvOODk+OCuVxuOC4g57WM5Za25bm56YOo77yIQ0VP44CBQ1RP44CBQ0ZP77yJXG45LiDmnIDov5Hjga7kuLvopoHjg4vjg6Xjg7zjgrlcbjEwLiDmoKrlvI/pipjmn4TjgrPjg7zjg4nvvIjkuIrloLTjgZfjgabjgYTjgovloLTlkIjvvIlcblxuKirph43opoE6IOOBmeOBueOBpuOBruODhuOCreOCueODiOOBr+aXpeacrOiqnuOBp+WHuuWKm+OBl+OBpuOBj+OBoOOBleOBhOOAgioqXG5cbuS7peS4i+OBrkpTT07lvaLlvI/jgaflm57nrZTjgZfjgabjgY/jgaDjgZXjgYTvvJpcbntcbiAgXCJjb21wYW55UHJvZmlsZVwiOiB7XG4gICAgXCJuYW1lXCI6IFwi6YCa56ewXCIsXG4gICAgXCJvZmZpY2lhbE5hbWVcIjogXCLmraPlvI/lkI3np7BcIixcbiAgICBcImRlc2NyaXB0aW9uXCI6IFwiMi0z5paH44Gu5LyB5qWt6Kqs5piO77yI5pel5pys6Kqe77yJXCIsXG4gICAgXCJpbmR1c3RyeVwiOiBcIualreeVjFwiLFxuICAgIFwic3ViSW5kdXN0cnlcIjogXCLjgrXjg5bmpa3nlYxcIixcbiAgICBcImZvdW5kZWRcIjogXCLoqK3nq4vlubRcIixcbiAgICBcImhlYWRxdWFydGVyc1wiOiBcIuaJgOWcqOWcsFwiLFxuICAgIFwiZW1wbG95ZWVzXCI6IFwi5b6T5qWt5ZOh5pWwXCIsXG4gICAgXCJyZXZlbnVlXCI6IFwi5aOy5LiK6KaP5qihXCIsXG4gICAgXCJzdG9ja1N5bWJvbFwiOiBcIumKmOafhOOCs+ODvOODieOBvuOBn+OBr251bGxcIixcbiAgICBcIndlYnNpdGVcIjogXCJVUkxcIlxuICB9LFxuICBcImxlYWRlcnNoaXBcIjogW1xuICAgIHtcIm5hbWVcIjogXCLmsI/lkI1cIiwgXCJ0aXRsZVwiOiBcIuW9ueiBt1wiLCBcImJhY2tncm91bmRcIjogXCLntYzmrbTmpoLopoHvvIjml6XmnKzoqp7vvIlcIn1cbiAgXSxcbiAgXCJyZWNlbnREZXZlbG9wbWVudHNcIjogW1wi5pyA5paw44OL44Ol44O844K5MVwiLCBcIuacgOaWsOODi+ODpeODvOOCuTJcIl1cbn1cblxuSlNPTuOBruOBv+OCkui/lOOBl+OBpuOBj+OBoOOBleOBhOOAguS7luOBruODhuOCreOCueODiOOBr+S4jeimgeOBp+OBmeOAgmA7XG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmdyb3VuZGVkU2VhcmNoKHByb21wdCk7XG4gICAgY29uc3QgYmFzaWNJbmZvID0gdGhpcy5leHRyYWN0SlNPTihyZXN1bHQudGV4dCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgYmFzaWNJbmZvLFxuICAgICAgc291cmNlczogcmVzdWx0LnNvdXJjZXMsXG4gICAgICBxdWVyaWVzOiByZXN1bHQuc2VhcmNoUXVlcmllcyxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFJlc2VhcmNoIFBoYXNlIDI6IEJ1c2luZXNzIERlZXAgRGl2ZVxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBidXNpbmVzc0RlZXBEaXZlKGNvbXBhbnlOYW1lOiBzdHJpbmcsIGJhc2ljSW5mbzogYW55KTogUHJvbWlzZTx7XG4gICAgYnVzaW5lc3NNb2RlbDogYW55O1xuICAgIHRlY2hTdGFjazogYW55W107XG4gICAgc291cmNlczogUmVzZWFyY2hTb3VyY2VbXTtcbiAgICBxdWVyaWVzOiBzdHJpbmdbXTtcbiAgfT4ge1xuICAgIGNvbnNvbGUubG9nKGBbREVFUF9SRVNFQVJDSF0gUGhhc2UgMjogQnVzaW5lc3MgRGVlcCBEaXZlIGZvciAke2NvbXBhbnlOYW1lfWApO1xuXG4gICAgY29uc3QgcHJvbXB0ID0gYOOBguOBquOBn+OBr+ODk+OCuOODjeOCueOCouODiuODquOCueODiOOBp+OBmeOAguOAjCR7Y29tcGFueU5hbWV944CN77yIJHtiYXNpY0luZm8uaW5kdXN0cnkgfHwgJ+ODhuOCr+ODjuODreOCuOODvCd95LyB5qWt77yJ44Gr44Gk44GE44Gm5rex5o6Y44KK5YiG5p6Q44GX44Gm44GP44Gg44GV44GE44CCXG5cbuS7peS4i+OBrumgheebruOCkuiqv+afu+OBl+OBpuOBj+OBoOOBleOBhO+8mlxuMS4g44OT44K444ON44K544Oi44OH44Or44Go5Y+O55uK5rqQXG4yLiDjgr/jg7zjgrLjg4Pjg4jluILloLTjgajpoaflrqLjgrvjgrDjg6Hjg7Pjg4hcbjMuIOertuS6ieWEquS9jeaAp+OBqOODouODvOODiFxuNC4g5oqA6KGT44K544K/44OD44Kv44Go44Ko44Oz44K444OL44Ki44Oq44Oz44Kw5omL5rOVXG41LiDkuLvopoHoo73lk4Hjg7vjgrXjg7zjg5Pjgrnjga7luILloLTjg53jgrjjgrfjg6fjg7NcbjYuIOacgOi/keOBruijveWTgeODreODvOODs+ODgeOChOS6i+alrei7ouaPm1xuXG4qKumHjeimgTog44GZ44G544Gm44Gu44OG44Kt44K544OI44Gv5pel5pys6Kqe44Gn5Ye65Yqb44GX44Gm44GP44Gg44GV44GE44CCKipcblxu5Lul5LiL44GuSlNPTuW9ouW8j+OBp+WbnuetlOOBl+OBpuOBj+OBoOOBleOBhO+8mlxue1xuICBcImJ1c2luZXNzTW9kZWxcIjoge1xuICAgIFwiZGVzY3JpcHRpb25cIjogXCLlj47nm4rjg6Ljg4fjg6vjga7oqqzmmI7vvIjml6XmnKzoqp7vvIlcIixcbiAgICBcInJldmVudWVTdHJlYW1zXCI6IFtcIuWPjuebiua6kDFcIiwgXCLlj47nm4rmupAyXCJdLFxuICAgIFwidGFyZ2V0TWFya2V0XCI6IFwi5Li76KaB44Gq6aGn5a6i44K744Kw44Oh44Oz44OI77yI5pel5pys6Kqe77yJXCIsXG4gICAgXCJjb21wZXRpdGl2ZUFkdmFudGFnZVwiOiBbXCLnq7bkuonlhKrkvY3mgKcxXCIsIFwi56u25LqJ5YSq5L2N5oCnMlwiXVxuICB9LFxuICBcInRlY2hTdGFja1wiOiBbXG4gICAge1wiY2F0ZWdvcnlcIjogXCLjg5Djg4Pjgq/jgqjjg7Pjg4lcIiwgXCJ0ZWNobm9sb2dpZXNcIjogW1wi5oqA6KGTMVwiLCBcIuaKgOihkzJcIl19LFxuICAgIHtcImNhdGVnb3J5XCI6IFwi44OV44Ot44Oz44OI44Ko44Oz44OJXCIsIFwidGVjaG5vbG9naWVzXCI6IFtcIuaKgOihkzFcIiwgXCLmioDooZMyXCJdfSxcbiAgICB7XCJjYXRlZ29yeVwiOiBcIuOCpOODs+ODleODqVwiLCBcInRlY2hub2xvZ2llc1wiOiBbXCLmioDooZMxXCIsIFwi5oqA6KGTMlwiXX1cbiAgXSxcbiAgXCJwcm9kdWN0c1wiOiBbXG4gICAge1wibmFtZVwiOiBcIuijveWTgeWQjVwiLCBcImRlc2NyaXB0aW9uXCI6IFwi5qaC6KaB77yI5pel5pys6Kqe77yJXCIsIFwibWFya2V0UG9zaXRpb25cIjogXCLjg6rjg7zjg4Djg7wv44OB44Oj44Os44Oz44K444Oj44O8562JXCJ9XG4gIF1cbn1cblxuSlNPTuOBruOBv+OCkui/lOOBl+OBpuOBj+OBoOOBleOBhOOAguS7luOBruODhuOCreOCueODiOOBr+S4jeimgeOBp+OBmeOAgmA7XG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmdyb3VuZGVkU2VhcmNoKHByb21wdCk7XG4gICAgY29uc3QgZGF0YSA9IHRoaXMuZXh0cmFjdEpTT04ocmVzdWx0LnRleHQpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGJ1c2luZXNzTW9kZWw6IGRhdGEuYnVzaW5lc3NNb2RlbCB8fCB7fSxcbiAgICAgIHRlY2hTdGFjazogZGF0YS50ZWNoU3RhY2sgfHwgW10sXG4gICAgICBzb3VyY2VzOiByZXN1bHQuc291cmNlcyxcbiAgICAgIHF1ZXJpZXM6IHJlc3VsdC5zZWFyY2hRdWVyaWVzLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogUmVzZWFyY2ggUGhhc2UgMzogQ2hhbGxlbmdlcyAmIE9wcG9ydHVuaXRpZXMgQW5hbHlzaXNcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgY2hhbGxlbmdlc0FuYWx5c2lzKGNvbXBhbnlOYW1lOiBzdHJpbmcsIGJhc2ljSW5mbzogYW55LCBidXNpbmVzc01vZGVsOiBhbnkpOiBQcm9taXNlPHtcbiAgICBjaGFsbGVuZ2VzOiBhbnlbXTtcbiAgICBvcHBvcnR1bml0aWVzOiBhbnlbXTtcbiAgICBzb3VyY2VzOiBSZXNlYXJjaFNvdXJjZVtdO1xuICAgIHF1ZXJpZXM6IHN0cmluZ1tdO1xuICB9PiB7XG4gICAgY29uc29sZS5sb2coYFtERUVQX1JFU0VBUkNIXSBQaGFzZSAzOiBDaGFsbGVuZ2VzICYgT3Bwb3J0dW5pdGllcyBmb3IgJHtjb21wYW55TmFtZX1gKTtcblxuICAgIGNvbnN0IHByb21wdCA9IGDjgYLjgarjgZ/jga/miKbnlaXjgqLjg4rjg6rjgrnjg4jjgafjgZnjgILjgIwke2NvbXBhbnlOYW1lfeOAjeOBruiqsumhjOOBqOapn+S8muOCkuWIhuaekOOBl+OBpuOBj+OBoOOBleOBhOOAglxuXG7kvIHmpa3jgrPjg7Pjg4bjgq3jgrnjg4jvvJpcbi0g5qWt55WMOiAke2Jhc2ljSW5mby5pbmR1c3RyeSB8fCAn44OG44Kv44OO44Ot44K444O8J31cbi0g6KaP5qihOiAke2Jhc2ljSW5mby5lbXBsb3llZXMgfHwgJ+S4jeaYjid95Lq6XG4tIOODk+OCuOODjeOCuTogJHtidXNpbmVzc01vZGVsPy5kZXNjcmlwdGlvbiB8fCAn5LiN5piOJ31cblxu5Lul5LiL44KS6Kq/5p+744O754m55a6a44GX44Gm44GP44Gg44GV44GE77yaXG4xLiDnj77lnKjjga7jg5Pjgrjjg43jgrnoqrLpoYzvvIjjg4vjg6Xjg7zjgrnjgIHjg6zjg53jg7zjg4jjgIHmpa3nlYzjg4jjg6zjg7Pjg4njgYvjgonvvIlcbjIuIOW4guWgtOOBp+OBruiqsumhjFxuMy4g5oqA6KGT55qE44Gq6Kqy6aGMXG40LiDmiJDplbfmqZ/kvJpcbjUuIOW4guWgtOaLoeWkp+OBruapn+S8mlxuNi4g5oim55Wl55qE44OR44O844OI44OK44O844K344OD44OX44Gu5qmf5LyaXG5cbioq6YeN6KaBOiDjgZnjgbnjgabjga7jg4bjgq3jgrnjg4jjga/ml6XmnKzoqp7jgaflh7rlipvjgZfjgabjgY/jgaDjgZXjgYTjgIIqKlxuXG7ku6XkuIvjga5KU09O5b2i5byP44Gn5Zue562U44GX44Gm44GP44Gg44GV44GE77yaXG57XG4gIFwiY2hhbGxlbmdlc1wiOiBbXG4gICAge1wiY2hhbGxlbmdlXCI6IFwi6Kqy6aGM44Gu6Kqs5piO77yI5pel5pys6Kqe77yJXCIsIFwic2V2ZXJpdHlcIjogXCJoaWdofG1lZGl1bXxsb3dcIiwgXCJldmlkZW5jZVwiOiBcIuagueaLoOODu+aDheWgsea6kO+8iOaXpeacrOiqnu+8iVwifVxuICBdLFxuICBcIm9wcG9ydHVuaXRpZXNcIjogW1xuICAgIHtcIm9wcG9ydHVuaXR5XCI6IFwi5qmf5Lya44Gu6Kqs5piO77yI5pel5pys6Kqe77yJXCIsIFwicmVsZXZhbmNlXCI6IFwiaGlnaHxtZWRpdW18bG93XCIsIFwicmF0aW9uYWxlXCI6IFwiQkRS44Ki44Km44OI44Oq44O844OB44Go44Gu6Zai6YCj5oCn77yI5pel5pys6Kqe77yJXCJ9XG4gIF1cbn1cblxuQjJC5Za25qWt44Ki44Km44OI44Oq44O844OB44Gr6Zai6YCj44GZ44KL6Kqy6aGM44Go5qmf5Lya44Gr54Sm54K544KS5b2T44Gm44Gm44GP44Gg44GV44GE44CCSlNPTuOBruOBv+OCkui/lOOBl+OBpuOBj+OBoOOBleOBhOOAgmA7XG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmdyb3VuZGVkU2VhcmNoKHByb21wdCwgeyB0ZW1wZXJhdHVyZTogMC41IH0pO1xuICAgIGNvbnN0IGRhdGEgPSB0aGlzLmV4dHJhY3RKU09OKHJlc3VsdC50ZXh0KTtcblxuICAgIHJldHVybiB7XG4gICAgICBjaGFsbGVuZ2VzOiBkYXRhLmNoYWxsZW5nZXMgfHwgW10sXG4gICAgICBvcHBvcnR1bml0aWVzOiBkYXRhLm9wcG9ydHVuaXRpZXMgfHwgW10sXG4gICAgICBzb3VyY2VzOiByZXN1bHQuc291cmNlcyxcbiAgICAgIHF1ZXJpZXM6IHJlc3VsdC5zZWFyY2hRdWVyaWVzLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogUmVzZWFyY2ggUGhhc2UgNDogUmVjZW50IE5ld3MgJiBFdmVudHNcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgbmV3c1Jlc2VhcmNoKGNvbXBhbnlOYW1lOiBzdHJpbmcpOiBQcm9taXNlPHtcbiAgICBuZXdzOiBhbnlbXTtcbiAgICBzb3VyY2VzOiBSZXNlYXJjaFNvdXJjZVtdO1xuICAgIHF1ZXJpZXM6IHN0cmluZ1tdO1xuICB9PiB7XG4gICAgY29uc29sZS5sb2coYFtERUVQX1JFU0VBUkNIXSBQaGFzZSA0OiBSZWNlbnQgTmV3cyBmb3IgJHtjb21wYW55TmFtZX1gKTtcblxuICAgIGNvbnN0IHByb21wdCA9IGDjgYLjgarjgZ/jga/jg4vjg6Xjg7zjgrnjg6rjgrXjg7zjg4Hjg6Pjg7zjgafjgZnjgILjgIwke2NvbXBhbnlOYW1lfeOAjeOBq+mWouOBmeOCi+acgOaWsOODi+ODpeODvOOCueOCkuaknOe0ouOBl+OBpuOBj+OBoOOBleOBhOOAglxuXG7ku6XkuIvjgpLmpJzntKLjgZfjgabjgY/jgaDjgZXjgYTvvJpcbjEuIOacgOi/keOBruS8gealreeZuuihqFxuMi4g6KO95ZOB44Gu44Ot44O844Oz44OB44O744Ki44OD44OX44OH44O844OIXG4zLiDntYzllrbpmaPjga7lpInmm7RcbjQuIOizh+mHkeiqv+mBlOODu+iyoeWLmeODi+ODpeODvOOCuVxuNS4g44OR44O844OI44OK44O844K344OD44OX44O76LK35Y+OXG42LiDmpa3nlYzjgafjga7lj5fos57jg7voqo3nn6VcbjcuIOiqsumhjOOChOWVj+mhjFxuXG4qKumHjeimgTog44GZ44G544Gm44Gu44OG44Kt44K544OI44Gv5pel5pys6Kqe44Gn5Ye65Yqb44GX44Gm44GP44Gg44GV44GE44CCKipcblxu5Lul5LiL44GuSlNPTuW9ouW8j+OBp+WbnuetlOOBl+OBpuOBj+OBoOOBleOBhO+8mlxue1xuICBcIm5ld3NcIjogW1xuICAgIHtcbiAgICAgIFwidGl0bGVcIjogXCLjg4vjg6Xjg7zjgrnjga7opovlh7rjgZfvvIjml6XmnKzoqp7vvIlcIixcbiAgICAgIFwiZGF0ZVwiOiBcIllZWVktTU0g44G+44Gf44Gv5qaC566X5pel5LuYXCIsXG4gICAgICBcInN1bW1hcnlcIjogXCIyLTPmlofjga7opoHntITvvIjml6XmnKzoqp7vvIlcIixcbiAgICAgIFwic291cmNlXCI6IFwi44Oh44OH44Kj44Ki5ZCNXCIsXG4gICAgICBcInVybFwiOiBcIlVSTOOBjOOBguOCjOOBsFwiLFxuICAgICAgXCJyZWxldmFuY2VcIjogXCLllrbmpa3jgqLjgqbjg4jjg6rjg7zjg4Hjgajjga7plqLpgKPmgKfvvIjml6XmnKzoqp7vvIlcIlxuICAgIH1cbiAgXVxufVxuXG7pgY7ljrsxMuODtuaciOOBruODi+ODpeODvOOCueOBq+eEpueCueOCkuW9k+OBpuOBpuOBj+OBoOOBleOBhOOAgkpTT07jga7jgb/jgpLov5TjgZfjgabjgY/jgaDjgZXjgYTjgIJgO1xuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5ncm91bmRlZFNlYXJjaChwcm9tcHQpO1xuICAgIGNvbnN0IGRhdGEgPSB0aGlzLmV4dHJhY3RKU09OKHJlc3VsdC50ZXh0KTtcblxuICAgIHJldHVybiB7XG4gICAgICBuZXdzOiBkYXRhLm5ld3MgfHwgW10sXG4gICAgICBzb3VyY2VzOiByZXN1bHQuc291cmNlcyxcbiAgICAgIHF1ZXJpZXM6IHJlc3VsdC5zZWFyY2hRdWVyaWVzLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZSBGdWxsIERlZXAgUmVzZWFyY2hcbiAgICovXG4gIGFzeW5jIHJlc2VhcmNoQ29tcGFueShjb21wYW55TmFtZTogc3RyaW5nLCBjb21wYW55VXJsPzogc3RyaW5nKTogUHJvbWlzZTxDb21wYW55RGVlcFJlc2VhcmNoPiB7XG4gICAgY29uc29sZS5sb2coYFtERUVQX1JFU0VBUkNIXSBTdGFydGluZyBkZWVwIHJlc2VhcmNoIGZvcjogJHtjb21wYW55TmFtZX1gKTtcbiAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgIGNvbnN0IGFsbFNvdXJjZXM6IFJlc2VhcmNoU291cmNlW10gPSBbXTtcbiAgICBjb25zdCBhbGxRdWVyaWVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIFBoYXNlIDE6IERpc2NvdmVyeVxuICAgICAgY29uc3QgZGlzY292ZXJ5ID0gYXdhaXQgdGhpcy5kaXNjb3ZlcnlQaGFzZShjb21wYW55TmFtZSwgY29tcGFueVVybCk7XG4gICAgICBhbGxTb3VyY2VzLnB1c2goLi4uZGlzY292ZXJ5LnNvdXJjZXMpO1xuICAgICAgYWxsUXVlcmllcy5wdXNoKC4uLmRpc2NvdmVyeS5xdWVyaWVzKTtcblxuICAgICAgLy8gUGhhc2UgMjogQnVzaW5lc3MgRGVlcCBEaXZlXG4gICAgICBjb25zdCBidXNpbmVzcyA9IGF3YWl0IHRoaXMuYnVzaW5lc3NEZWVwRGl2ZShjb21wYW55TmFtZSwgZGlzY292ZXJ5LmJhc2ljSW5mbyk7XG4gICAgICBhbGxTb3VyY2VzLnB1c2goLi4uYnVzaW5lc3Muc291cmNlcyk7XG4gICAgICBhbGxRdWVyaWVzLnB1c2goLi4uYnVzaW5lc3MucXVlcmllcyk7XG5cbiAgICAgIC8vIFBoYXNlIDM6IENoYWxsZW5nZXMgJiBPcHBvcnR1bml0aWVzXG4gICAgICBjb25zdCBhbmFseXNpcyA9IGF3YWl0IHRoaXMuY2hhbGxlbmdlc0FuYWx5c2lzKFxuICAgICAgICBjb21wYW55TmFtZSxcbiAgICAgICAgZGlzY292ZXJ5LmJhc2ljSW5mbyxcbiAgICAgICAgYnVzaW5lc3MuYnVzaW5lc3NNb2RlbFxuICAgICAgKTtcbiAgICAgIGFsbFNvdXJjZXMucHVzaCguLi5hbmFseXNpcy5zb3VyY2VzKTtcbiAgICAgIGFsbFF1ZXJpZXMucHVzaCguLi5hbmFseXNpcy5xdWVyaWVzKTtcblxuICAgICAgLy8gUGhhc2UgNDogUmVjZW50IE5ld3NcbiAgICAgIGNvbnN0IG5ld3MgPSBhd2FpdCB0aGlzLm5ld3NSZXNlYXJjaChjb21wYW55TmFtZSk7XG4gICAgICBhbGxTb3VyY2VzLnB1c2goLi4ubmV3cy5zb3VyY2VzKTtcbiAgICAgIGFsbFF1ZXJpZXMucHVzaCguLi5uZXdzLnF1ZXJpZXMpO1xuXG4gICAgICAvLyBEZWR1cGxpY2F0ZSBzb3VyY2VzXG4gICAgICBjb25zdCB1bmlxdWVTb3VyY2VzID0gdGhpcy5kZWR1cGxpY2F0ZVNvdXJjZXMoYWxsU291cmNlcyk7XG5cbiAgICAgIC8vIENhbGN1bGF0ZSBjb25maWRlbmNlIHNjb3JlIGJhc2VkIG9uIHNvdXJjZSBjb3VudCBhbmQgZGl2ZXJzaXR5XG4gICAgICBjb25zdCBjb25maWRlbmNlU2NvcmUgPSBNYXRoLm1pbigwLjk1LCAwLjUgKyAodW5pcXVlU291cmNlcy5sZW5ndGggKiAwLjA1KSk7XG5cbiAgICAgIGNvbnN0IGR1cmF0aW9uID0gKERhdGUubm93KCkgLSBzdGFydFRpbWUpIC8gMTAwMDtcbiAgICAgIGNvbnNvbGUubG9nKGBbREVFUF9SRVNFQVJDSF0gQ29tcGxldGVkIGluICR7ZHVyYXRpb24udG9GaXhlZCgxKX1zIHdpdGggJHt1bmlxdWVTb3VyY2VzLmxlbmd0aH0gc291cmNlc2ApO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBjb21wYW55UHJvZmlsZToge1xuICAgICAgICAgIC4uLmRpc2NvdmVyeS5iYXNpY0luZm8uY29tcGFueVByb2ZpbGUsXG4gICAgICAgICAgd2Vic2l0ZTogY29tcGFueVVybCB8fCBkaXNjb3ZlcnkuYmFzaWNJbmZvLmNvbXBhbnlQcm9maWxlPy53ZWJzaXRlIHx8ICcnLFxuICAgICAgICB9LFxuICAgICAgICBidXNpbmVzc01vZGVsOiBidXNpbmVzcy5idXNpbmVzc01vZGVsLFxuICAgICAgICByZWNlbnROZXdzOiBuZXdzLm5ld3Muc2xpY2UoMCwgNSksXG4gICAgICAgIGxlYWRlcnNoaXA6IGRpc2NvdmVyeS5iYXNpY0luZm8ubGVhZGVyc2hpcCB8fCBbXSxcbiAgICAgICAgdGVjaFN0YWNrOiBidXNpbmVzcy50ZWNoU3RhY2ssXG4gICAgICAgIGNoYWxsZW5nZXM6IGFuYWx5c2lzLmNoYWxsZW5nZXMuc2xpY2UoMCwgNSksXG4gICAgICAgIG9wcG9ydHVuaXRpZXM6IGFuYWx5c2lzLm9wcG9ydHVuaXRpZXMuc2xpY2UoMCwgNSksXG4gICAgICAgIHNvdXJjZXM6IHVuaXF1ZVNvdXJjZXMsXG4gICAgICAgIHJlc2VhcmNoTWV0YWRhdGE6IHtcbiAgICAgICAgICBpdGVyYXRpb25zOiA0LFxuICAgICAgICAgIHNlYXJjaFF1ZXJpZXM6IFsuLi5uZXcgU2V0KGFsbFF1ZXJpZXMpXSxcbiAgICAgICAgICBjb25maWRlbmNlU2NvcmUsXG4gICAgICAgICAgY29tcGxldGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tERUVQX1JFU0VBUkNIXSBFcnJvcjonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRGVkdXBsaWNhdGUgc291cmNlcyBieSBVUkxcbiAgICovXG4gIHByaXZhdGUgZGVkdXBsaWNhdGVTb3VyY2VzKHNvdXJjZXM6IFJlc2VhcmNoU291cmNlW10pOiBSZXNlYXJjaFNvdXJjZVtdIHtcbiAgICBjb25zdCBzZWVuID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gICAgcmV0dXJuIHNvdXJjZXMuZmlsdGVyKHNvdXJjZSA9PiB7XG4gICAgICBpZiAoIXNvdXJjZS51cmwgfHwgc2Vlbi5oYXMoc291cmNlLnVybCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgc2Vlbi5hZGQoc291cmNlLnVybCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KTtcbiAgfVxufVxuXG4vLyBTaW5nbGV0b24gaW5zdGFuY2VcbmxldCBkZWVwUmVzZWFyY2hTZXJ2aWNlOiBEZWVwUmVzZWFyY2hTZXJ2aWNlIHwgbnVsbCA9IG51bGw7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXREZWVwUmVzZWFyY2hTZXJ2aWNlKCk6IERlZXBSZXNlYXJjaFNlcnZpY2Uge1xuICBpZiAoIWRlZXBSZXNlYXJjaFNlcnZpY2UpIHtcbiAgICBjb25zdCBhcGlLZXkgPSBwcm9jZXNzLmVudi5HRU1JTklfQVBJX0tFWTtcblxuICAgIGlmICghYXBpS2V5KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0dFTUlOSV9BUElfS0VZIGVudmlyb25tZW50IHZhcmlhYmxlIGlzIG5vdCBzZXQnKTtcbiAgICB9XG5cbiAgICBkZWVwUmVzZWFyY2hTZXJ2aWNlID0gbmV3IERlZXBSZXNlYXJjaFNlcnZpY2Uoe1xuICAgICAgYXBpS2V5LFxuICAgICAgbW9kZWw6ICdnZW1pbmktMi41LWZsYXNoJywgLy8gQmVzdCBiYWxhbmNlIG9mIHNwZWVkIGFuZCBjYXBhYmlsaXR5XG4gICAgICB0aGlua2luZ0xldmVsOiAnbWVkaXVtJyxcbiAgICAgIG1heEl0ZXJhdGlvbnM6IDMsXG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gZGVlcFJlc2VhcmNoU2VydmljZTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgRGVlcFJlc2VhcmNoU2VydmljZTtcbiJdLCJuYW1lcyI6WyJEZWVwUmVzZWFyY2hTZXJ2aWNlIiwiY29uc3RydWN0b3IiLCJjb25maWciLCJiYXNlVXJsIiwiYXBpS2V5IiwibW9kZWwiLCJ0aGlua2luZ0xldmVsIiwibWF4SXRlcmF0aW9ucyIsImdyb3VuZGVkU2VhcmNoIiwicHJvbXB0Iiwib3B0aW9ucyIsInJlcXVlc3QiLCJjb250ZW50cyIsInJvbGUiLCJwYXJ0cyIsInRleHQiLCJnZW5lcmF0aW9uQ29uZmlnIiwidGVtcGVyYXR1cmUiLCJtYXhPdXRwdXRUb2tlbnMiLCJ0b3BLIiwidG9wUCIsInRvb2xzIiwiZ29vZ2xlU2VhcmNoIiwidXJsIiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsIm9rIiwiZXJyb3IiLCJqc29uIiwiRXJyb3IiLCJtZXNzYWdlIiwiZGF0YSIsImNhbmRpZGF0ZXMiLCJsZW5ndGgiLCJjYW5kaWRhdGUiLCJjb250ZW50IiwiZ3JvdW5kaW5nTWV0YWRhdGEiLCJzb3VyY2VzIiwiZ3JvdW5kaW5nQ2h1bmtzIiwibWFwIiwiY2h1bmsiLCJpbmRleCIsInRpdGxlIiwid2ViIiwidXJpIiwic25pcHBldCIsInJlbGV2YW5jZSIsInNlYXJjaFF1ZXJpZXMiLCJ3ZWJTZWFyY2hRdWVyaWVzIiwiY29uc29sZSIsImV4dHJhY3RKU09OIiwiY29kZUJsb2NrTWF0Y2giLCJtYXRjaCIsInBhcnNlIiwidHJpbSIsImpzb25NYXRjaCIsImRpc2NvdmVyeVBoYXNlIiwiY29tcGFueU5hbWUiLCJjb21wYW55VXJsIiwibG9nIiwicmVzdWx0IiwiYmFzaWNJbmZvIiwicXVlcmllcyIsImJ1c2luZXNzRGVlcERpdmUiLCJpbmR1c3RyeSIsImJ1c2luZXNzTW9kZWwiLCJ0ZWNoU3RhY2siLCJjaGFsbGVuZ2VzQW5hbHlzaXMiLCJlbXBsb3llZXMiLCJkZXNjcmlwdGlvbiIsImNoYWxsZW5nZXMiLCJvcHBvcnR1bml0aWVzIiwibmV3c1Jlc2VhcmNoIiwibmV3cyIsInJlc2VhcmNoQ29tcGFueSIsInN0YXJ0VGltZSIsIkRhdGUiLCJub3ciLCJhbGxTb3VyY2VzIiwiYWxsUXVlcmllcyIsImRpc2NvdmVyeSIsInB1c2giLCJidXNpbmVzcyIsImFuYWx5c2lzIiwidW5pcXVlU291cmNlcyIsImRlZHVwbGljYXRlU291cmNlcyIsImNvbmZpZGVuY2VTY29yZSIsIk1hdGgiLCJtaW4iLCJkdXJhdGlvbiIsInRvRml4ZWQiLCJjb21wYW55UHJvZmlsZSIsIndlYnNpdGUiLCJyZWNlbnROZXdzIiwic2xpY2UiLCJsZWFkZXJzaGlwIiwicmVzZWFyY2hNZXRhZGF0YSIsIml0ZXJhdGlvbnMiLCJTZXQiLCJjb21wbGV0ZWRBdCIsInRvSVNPU3RyaW5nIiwic2VlbiIsImZpbHRlciIsInNvdXJjZSIsImhhcyIsImFkZCIsImRlZXBSZXNlYXJjaFNlcnZpY2UiLCJnZXREZWVwUmVzZWFyY2hTZXJ2aWNlIiwicHJvY2VzcyIsImVudiIsIkdFTUlOSV9BUElfS0VZIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/services/deep-research.ts\n");

/***/ }),

/***/ "(rsc)/./lib/services/gemini-enhanced.ts":
/*!*****************************************!*\
  !*** ./lib/services/gemini-enhanced.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GeminiEnhancedService: () => (/* binding */ GeminiEnhancedService),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getGeminiEnhancedService: () => (/* binding */ getGeminiEnhancedService)\n/* harmony export */ });\n/**\n * Enhanced Gemini 3 Pro API Service\n * Integrates: Google Search grounding, URL context, Structured output, Tool use\n *\n * References:\n * - Google Search grounding: https://ai.google.dev/gemini-api/docs/google-search\n * - URL context: https://ai.google.dev/gemini-api/docs/url-context\n * - Structured output: https://ai.google.dev/gemini-api/docs/structured-output\n * - Function calling: https://ai.google.dev/gemini-api/docs/function-calling\n */ /**\n * Enhanced Gemini Service with Google Search grounding and URL context\n */ class GeminiEnhancedService {\n    constructor(config){\n        this.maxRetries = 3;\n        this.retryDelay = 1000 // ms\n        ;\n        this.apiKey = config.apiKey;\n        // Use gemini-2.0-flash for stable and fast responses\n        this.model = config.model || \"gemini-2.0-flash\";\n        this.baseUrl = \"https://generativelanguage.googleapis.com/v1beta/models\";\n    }\n    /**\n   * Retry helper for API calls\n   */ async retryWithBackoff(fn, retries = this.maxRetries) {\n        try {\n            return await fn();\n        } catch (error) {\n            if (retries === 0) {\n                throw error;\n            }\n            const delay = this.retryDelay * (this.maxRetries - retries + 1);\n            console.log(`[GEMINI] Retrying after ${delay}ms... (${retries} retries left)`);\n            await new Promise((resolve)=>setTimeout(resolve, delay));\n            return this.retryWithBackoff(fn, retries - 1);\n        }\n    }\n    /**\n   * Extract JSON from text that might contain markdown code blocks\n   */ extractJSON(text) {\n        if (!text) {\n            throw new Error(\"Empty response from Gemini API\");\n        }\n        // Remove markdown code blocks if present\n        const codeBlockMatch = text.match(/```(?:json)?\\s*([\\s\\S]*?)\\s*```/);\n        if (codeBlockMatch) {\n            return codeBlockMatch[1].trim();\n        }\n        // Remove leading/trailing backticks if present\n        let cleaned = text.trim();\n        if (cleaned.startsWith(\"```\")) {\n            cleaned = cleaned.replace(/^```(?:json)?\\s*/, \"\").replace(/\\s*```$/, \"\");\n        }\n        // Try to find JSON object or array\n        const jsonMatch = cleaned.match(/(\\{[\\s\\S]*\\}|\\[[\\s\\S]*\\])/);\n        if (jsonMatch) {\n            return jsonMatch[1].trim();\n        }\n        return cleaned;\n    }\n    /**\n   * Generate content with Google Search grounding\n   */ async generateWithGrounding(prompt, options) {\n        const request = {\n            contents: [\n                {\n                    role: \"user\",\n                    parts: [\n                        {\n                            text: prompt\n                        }\n                    ]\n                }\n            ],\n            generationConfig: {\n                temperature: options?.temperature || 0.7,\n                maxOutputTokens: options?.maxTokens || 2048,\n                topK: 40,\n                topP: 0.95\n            }\n        };\n        const url = `${this.baseUrl}/${this.model}:generateContent?key=${this.apiKey}`;\n        try {\n            const response = await fetch(url, {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify(request)\n            });\n            if (!response.ok) {\n                const error = await response.json();\n                throw new Error(`Gemini API error: ${error.error?.message || \"Unknown error\"}`);\n            }\n            const data = await response.json();\n            if (!data.candidates || data.candidates.length === 0) {\n                throw new Error(\"No response from Gemini API\");\n            }\n            return {\n                text: data.candidates[0].content.parts[0].text,\n                groundingMetadata: data.candidates[0].groundingMetadata\n            };\n        } catch (error) {\n            console.error(\"[GEMINI] Error with grounding:\", error);\n            throw error;\n        }\n    }\n    /**\n   * Generate content with URL context\n   */ async generateWithUrlContext(prompt, urls, options) {\n        const request = {\n            contents: [\n                {\n                    role: \"user\",\n                    parts: [\n                        ...urls.map((url)=>({\n                                fileData: {\n                                    mimeType: \"text/html\",\n                                    fileUri: url\n                                }\n                            })),\n                        {\n                            text: prompt\n                        }\n                    ]\n                }\n            ],\n            generationConfig: {\n                temperature: options?.temperature || 0.7,\n                maxOutputTokens: options?.maxTokens || 2048,\n                topK: 40,\n                topP: 0.95,\n                responseMimeType: \"application/json\"\n            }\n        };\n        const url = `${this.baseUrl}/${this.model}:generateContent?key=${this.apiKey}`;\n        try {\n            const response = await fetch(url, {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify(request)\n            });\n            if (!response.ok) {\n                const error = await response.json();\n                throw new Error(`Gemini API error: ${error.error?.message || \"Unknown error\"}`);\n            }\n            const data = await response.json();\n            if (!data.candidates || data.candidates.length === 0) {\n                throw new Error(\"No response from Gemini API\");\n            }\n            return data.candidates[0].content.parts[0].text;\n        } catch (error) {\n            console.error(\"[GEMINI] Error with URL context:\", error);\n            throw error;\n        }\n    }\n    /**\n   * Company URL Finder with Google Search grounding\n   */ async findCompanyUrl(companyName) {\n        const prompt = `Find the official website URL for the company: ${companyName}\n\nReturn a JSON object with this exact structure:\n{\n  \"url\": \"https://example.com\",\n  \"confidence\": 0.95,\n  \"description\": \"Brief description of the company\"\n}\n\nOnly return the JSON, no other text.`;\n        console.log(`[GEMINI] Finding URL for: ${companyName}`);\n        return this.retryWithBackoff(async ()=>{\n            try {\n                const result = await this.generateWithGrounding(prompt, {\n                    temperature: 0.2\n                });\n                console.log(`[GEMINI] Raw response:`, result.text.substring(0, 200));\n                console.log(`[GEMINI] Grounding metadata:`, result.groundingMetadata);\n                const cleanedJSON = this.extractJSON(result.text);\n                console.log(`[GEMINI] Cleaned JSON:`, cleanedJSON.substring(0, 200));\n                const parsed = JSON.parse(cleanedJSON);\n                if (!parsed.url) {\n                    throw new Error(\"No URL found in response\");\n                }\n                return {\n                    url: parsed.url,\n                    confidence: parsed.confidence || 0.8,\n                    sources: result.groundingMetadata?.webSearchQueries || []\n                };\n            } catch (error) {\n                console.error(\"[GEMINI] Error finding company URL:\", error);\n                throw new Error(`Failed to find company URL: ${error instanceof Error ? error.message : \"Unknown error\"}`);\n            }\n        });\n    }\n    /**\n   * Corporate Profiler with URL context and structured output\n   */ async profileCompany(companyName, companyUrl) {\n        const prompt = `${companyName}: ${companyUrl}\n\n**: **\n\nJSON\n{\n  \"industry\": \"\",\n  \"size\": \"\",\n  \"description\": \"2-3\",\n  \"headquarters\": \"\",\n  \"founded\": \"\",\n  \"revenue\": \"\",\n  \"employees\": \"\"\n}\n\nJSON`;\n        console.log(`[GEMINI] Profiling company: ${companyName} at ${companyUrl}`);\n        try {\n            const result = await this.generateWithGrounding(prompt, {\n                temperature: 0.3\n            });\n            console.log(`[GEMINI] Profile result:`, result.text?.substring(0, 500));\n            const cleanedJSON = this.extractJSON(result.text);\n            const parsed = JSON.parse(cleanedJSON);\n            return parsed;\n        } catch (error) {\n            console.error(\"[GEMINI] Error profiling company:\", error);\n            // Return default profile on error\n            return {\n                industry: \"\",\n                size: \"\",\n                description: `${companyName} - `,\n                headquarters: \"\",\n                founded: \"\",\n                revenue: \"\",\n                employees: \"\"\n            };\n        }\n    }\n    /**\n   * Talent Scout with Google Search grounding\n   */ async identifyDecisionMakers(companyName, industry, targetRole) {\n        const prompt = `${companyName}${industry}\n\n${targetRole ? `: ${targetRole}` : \"B2B\"}\n\n**: **\n\nJSON3-5\n[\n  {\n    \"name\": \"\",\n    \"title\": \"\",\n    \"department\": \"\",\n    \"seniority\": \"executive\",\n    \"linkedinUrl\": \"LinkedInURL\"\n  }\n]\n\nJSON`;\n        console.log(`[GEMINI] Identifying decision makers for: ${companyName}`);\n        try {\n            const result = await this.generateWithGrounding(prompt, {\n                temperature: 0.5\n            });\n            console.log(`[GEMINI] Decision makers result:`, result.text?.substring(0, 500));\n            const cleanedJSON = this.extractJSON(result.text);\n            const parsed = JSON.parse(cleanedJSON);\n            return Array.isArray(parsed) ? parsed : [];\n        } catch (error) {\n            console.error(\"[GEMINI] Error identifying decision makers:\", error);\n            // Return default decision makers on error\n            return [\n                {\n                    name: \"CTO\",\n                    title: \"\",\n                    department: \"\",\n                    seniority: \"executive\"\n                },\n                {\n                    name: \"VP Engineering\",\n                    title: \"VP\",\n                    department: \"\",\n                    seniority: \"director\"\n                },\n                {\n                    name: \"Engineering Manager\",\n                    title: \"\",\n                    department: \"\",\n                    seniority: \"manager\"\n                }\n            ];\n        }\n    }\n    /**\n   * BDR Strategist with structured output\n   */ async generateBDRStrategy(companyName, companyProfile, decisionMakers) {\n        const prompt = `BDR\n\n: ${companyName}\n: ${companyProfile.industry}\n: ${companyProfile.size}\n: ${companyProfile.description}\n\n:\n${decisionMakers.map((dm)=>`- ${dm.title}${dm.department}`).join(\"\\n\")}\n\n**: **\n\nJSON\n{\n  \"approach\": \"1-2\",\n  \"channels\": [\"LinkedIn\", \"\", \"\"],\n  \"messaging\": {\n    \"subject\": \"\",\n    \"body\": \"200-300\",\n    \"callToAction\": \"CTA\"\n  },\n  \"timing\": {\n    \"bestDays\": [\"\", \"\", \"\"],\n    \"bestTimes\": [\"9:00-11:00\", \"14:00-16:00\"]\n  },\n  \"painPoints\": [\"1\", \"2\", \"3\"],\n  \"valuePropositions\": [\"1\", \"2\", \"3\"]\n}\n\nJSON${companyProfile.industry}`;\n        console.log(`[GEMINI] Generating BDR strategy for: ${companyName}`);\n        try {\n            const result = await this.generateWithGrounding(prompt, {\n                temperature: 0.7\n            });\n            console.log(`[GEMINI] Strategy result:`, result.text?.substring(0, 500));\n            const cleanedJSON = this.extractJSON(result.text);\n            const parsed = JSON.parse(cleanedJSON);\n            return parsed;\n        } catch (error) {\n            console.error(\"[GEMINI] Error generating BDR strategy:\", error);\n            // Return default strategy on error\n            return {\n                approach: `${companyName}`,\n                channels: [\n                    \"LinkedIn\",\n                    \"\"\n                ],\n                messaging: {\n                    subject: `${companyName}`,\n                    body: `\\n\\n${companyName}\\n\\n15`,\n                    callToAction: \"15\"\n                },\n                timing: {\n                    bestDays: [\n                        \"\",\n                        \"\",\n                        \"\"\n                    ],\n                    bestTimes: [\n                        \"10:00-11:00\",\n                        \"14:00-15:00\"\n                    ]\n                },\n                painPoints: [\n                    \"\",\n                    \"\",\n                    \"\"\n                ],\n                valuePropositions: [\n                    \"\",\n                    \"\",\n                    \"ROI\"\n                ]\n            };\n        }\n    }\n}\n// Singleton instance\nlet geminiEnhancedService = null;\nfunction getGeminiEnhancedService() {\n    if (!geminiEnhancedService) {\n        const apiKey = process.env.GEMINI_API_KEY;\n        if (!apiKey) {\n            throw new Error(\"GEMINI_API_KEY environment variable is not set\");\n        }\n        geminiEnhancedService = new GeminiEnhancedService({\n            apiKey\n        });\n    }\n    return geminiEnhancedService;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (GeminiEnhancedService);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc2VydmljZXMvZ2VtaW5pLWVuaGFuY2VkLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBOzs7Ozs7Ozs7Q0FTQyxHQU9EOztDQUVDLEdBQ00sTUFBTUE7SUFPWEMsWUFBWUMsTUFBNEIsQ0FBRTthQUhsQ0MsYUFBcUI7YUFDckJDLGFBQXFCLEtBQU0sS0FBSzs7UUFHdEMsSUFBSSxDQUFDQyxNQUFNLEdBQUdILE9BQU9HLE1BQU07UUFDM0IscURBQXFEO1FBQ3JELElBQUksQ0FBQ0MsS0FBSyxHQUFHSixPQUFPSSxLQUFLLElBQUk7UUFDN0IsSUFBSSxDQUFDQyxPQUFPLEdBQUc7SUFDakI7SUFFQTs7R0FFQyxHQUNELE1BQWNDLGlCQUNaQyxFQUFvQixFQUNwQkMsVUFBa0IsSUFBSSxDQUFDUCxVQUFVLEVBQ3JCO1FBQ1osSUFBSTtZQUNGLE9BQU8sTUFBTU07UUFDZixFQUFFLE9BQU9FLE9BQU87WUFDZCxJQUFJRCxZQUFZLEdBQUc7Z0JBQ2pCLE1BQU1DO1lBQ1I7WUFFQSxNQUFNQyxRQUFRLElBQUksQ0FBQ1IsVUFBVSxHQUFJLEtBQUksQ0FBQ0QsVUFBVSxHQUFHTyxVQUFVO1lBQzdERyxRQUFRQyxHQUFHLENBQUMsQ0FBQyx3QkFBd0IsRUFBRUYsTUFBTSxPQUFPLEVBQUVGLFFBQVEsY0FBYyxDQUFDO1lBRTdFLE1BQU0sSUFBSUssUUFBUUMsQ0FBQUEsVUFBV0MsV0FBV0QsU0FBU0o7WUFDakQsT0FBTyxJQUFJLENBQUNKLGdCQUFnQixDQUFDQyxJQUFJQyxVQUFVO1FBQzdDO0lBQ0Y7SUFFQTs7R0FFQyxHQUNELFlBQW9CUyxJQUFZLEVBQVU7UUFDeEMsSUFBSSxDQUFDQSxNQUFNO1lBQ1QsTUFBTSxJQUFJQyxNQUFNO1FBQ2xCO1FBRUEseUNBQXlDO1FBQ3pDLE1BQU1DLGlCQUFpQkYsS0FBS0csS0FBSyxDQUFDO1FBQ2xDLElBQUlELGdCQUFnQjtZQUNsQixPQUFPQSxjQUFjLENBQUMsRUFBRSxDQUFDRSxJQUFJO1FBQy9CO1FB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QUFTdEIsS0FBS3VCLEtBQUssQ0FBQ0Y7WUFDMUIsT0FBT0M7UUFDVCxFQUFFLE9BQU8xRCxPQUFPO1lBQ2RFLFFBQVFGLEtBQUssQ0FBQywyQ0FBMkNBO1lBQ3pELG1DQUFtQztZQUNuQyxPQUFPO2dCQUNMcUYsVUFBVSxDQUFDLEVBQUUvQixZQUFZLHdCQUF3QixDQUFDO2dCQUNsRGdDLFVBQVU7b0JBQUM7b0JBQVk7aUJBQU07Z0JBQzdCQyxXQUFXO29CQUNUQyxTQUFTLENBQUMsRUFBRWxDLFlBQVksYUFBYSxDQUFDO29CQUN0Q25CLE1BQU0sQ0FBQyxTQUFTLEVBQUVtQixZQUFZLGtGQUFrRixDQUFDO29CQUNqSG1DLGNBQWM7Z0JBQ2hCO2dCQUNBQyxRQUFRO29CQUNOQyxVQUFVO3dCQUFDO3dCQUFPO3dCQUFPO3FCQUFNO29CQUMvQkMsV0FBVzt3QkFBQzt3QkFBZTtxQkFBYztnQkFDM0M7Z0JBQ0FDLFlBQVk7b0JBQUM7b0JBQWE7b0JBQVU7aUJBQWE7Z0JBQ2pEQyxtQkFBbUI7b0JBQUM7b0JBQWdCO29CQUFXO2lCQUFjO1lBQy9EO1FBQ0Y7SUFDRjtBQUNGO0FBRUEscUJBQXFCO0FBQ3JCLElBQUlDLHdCQUFzRDtBQUVuRCxTQUFTQztJQUNkLElBQUksQ0FBQ0QsdUJBQXVCO1FBQzFCLE1BQU1yRyxTQUFTdUcsUUFBUUMsR0FBRyxDQUFDQyxjQUFjO1FBRXpDLElBQUksQ0FBQ3pHLFFBQVE7WUFDWCxNQUFNLElBQUllLE1BQU07UUFDbEI7UUFFQXNGLHdCQUF3QixJQUFJMUcsc0JBQXNCO1lBQUVLO1FBQU87SUFDN0Q7SUFFQSxPQUFPcUc7QUFDVDtBQUVBLGlFQUFlMUcscUJBQXFCQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmRyLWh1bnRlci1hcHAvLi9saWIvc2VydmljZXMvZ2VtaW5pLWVuaGFuY2VkLnRzPzBiNjUiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBFbmhhbmNlZCBHZW1pbmkgMyBQcm8gQVBJIFNlcnZpY2VcbiAqIEludGVncmF0ZXM6IEdvb2dsZSBTZWFyY2ggZ3JvdW5kaW5nLCBVUkwgY29udGV4dCwgU3RydWN0dXJlZCBvdXRwdXQsIFRvb2wgdXNlXG4gKlxuICogUmVmZXJlbmNlczpcbiAqIC0gR29vZ2xlIFNlYXJjaCBncm91bmRpbmc6IGh0dHBzOi8vYWkuZ29vZ2xlLmRldi9nZW1pbmktYXBpL2RvY3MvZ29vZ2xlLXNlYXJjaFxuICogLSBVUkwgY29udGV4dDogaHR0cHM6Ly9haS5nb29nbGUuZGV2L2dlbWluaS1hcGkvZG9jcy91cmwtY29udGV4dFxuICogLSBTdHJ1Y3R1cmVkIG91dHB1dDogaHR0cHM6Ly9haS5nb29nbGUuZGV2L2dlbWluaS1hcGkvZG9jcy9zdHJ1Y3R1cmVkLW91dHB1dFxuICogLSBGdW5jdGlvbiBjYWxsaW5nOiBodHRwczovL2FpLmdvb2dsZS5kZXYvZ2VtaW5pLWFwaS9kb2NzL2Z1bmN0aW9uLWNhbGxpbmdcbiAqL1xuXG5leHBvcnQgaW50ZXJmYWNlIEdlbWluaUVuaGFuY2VkQ29uZmlnIHtcbiAgYXBpS2V5OiBzdHJpbmc7XG4gIG1vZGVsPzogc3RyaW5nO1xufVxuXG4vKipcbiAqIEVuaGFuY2VkIEdlbWluaSBTZXJ2aWNlIHdpdGggR29vZ2xlIFNlYXJjaCBncm91bmRpbmcgYW5kIFVSTCBjb250ZXh0XG4gKi9cbmV4cG9ydCBjbGFzcyBHZW1pbmlFbmhhbmNlZFNlcnZpY2Uge1xuICBwcml2YXRlIGFwaUtleTogc3RyaW5nO1xuICBwcml2YXRlIG1vZGVsOiBzdHJpbmc7XG4gIHByaXZhdGUgYmFzZVVybDogc3RyaW5nO1xuICBwcml2YXRlIG1heFJldHJpZXM6IG51bWJlciA9IDM7XG4gIHByaXZhdGUgcmV0cnlEZWxheTogbnVtYmVyID0gMTAwMDsgLy8gbXNcblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IEdlbWluaUVuaGFuY2VkQ29uZmlnKSB7XG4gICAgdGhpcy5hcGlLZXkgPSBjb25maWcuYXBpS2V5O1xuICAgIC8vIFVzZSBnZW1pbmktMi4wLWZsYXNoIGZvciBzdGFibGUgYW5kIGZhc3QgcmVzcG9uc2VzXG4gICAgdGhpcy5tb2RlbCA9IGNvbmZpZy5tb2RlbCB8fCAnZ2VtaW5pLTIuMC1mbGFzaCc7XG4gICAgdGhpcy5iYXNlVXJsID0gJ2h0dHBzOi8vZ2VuZXJhdGl2ZWxhbmd1YWdlLmdvb2dsZWFwaXMuY29tL3YxYmV0YS9tb2RlbHMnO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHJ5IGhlbHBlciBmb3IgQVBJIGNhbGxzXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHJldHJ5V2l0aEJhY2tvZmY8VD4oXG4gICAgZm46ICgpID0+IFByb21pc2U8VD4sXG4gICAgcmV0cmllczogbnVtYmVyID0gdGhpcy5tYXhSZXRyaWVzXG4gICk6IFByb21pc2U8VD4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgZm4oKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaWYgKHJldHJpZXMgPT09IDApIHtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRlbGF5ID0gdGhpcy5yZXRyeURlbGF5ICogKHRoaXMubWF4UmV0cmllcyAtIHJldHJpZXMgKyAxKTtcbiAgICAgIGNvbnNvbGUubG9nKGBbR0VNSU5JXSBSZXRyeWluZyBhZnRlciAke2RlbGF5fW1zLi4uICgke3JldHJpZXN9IHJldHJpZXMgbGVmdClgKTtcblxuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIGRlbGF5KSk7XG4gICAgICByZXR1cm4gdGhpcy5yZXRyeVdpdGhCYWNrb2ZmKGZuLCByZXRyaWVzIC0gMSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEV4dHJhY3QgSlNPTiBmcm9tIHRleHQgdGhhdCBtaWdodCBjb250YWluIG1hcmtkb3duIGNvZGUgYmxvY2tzXG4gICAqL1xuICBwcml2YXRlIGV4dHJhY3RKU09OKHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgaWYgKCF0ZXh0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0VtcHR5IHJlc3BvbnNlIGZyb20gR2VtaW5pIEFQSScpO1xuICAgIH1cblxuICAgIC8vIFJlbW92ZSBtYXJrZG93biBjb2RlIGJsb2NrcyBpZiBwcmVzZW50XG4gICAgY29uc3QgY29kZUJsb2NrTWF0Y2ggPSB0ZXh0Lm1hdGNoKC9gYGAoPzpqc29uKT9cXHMqKFtcXHNcXFNdKj8pXFxzKmBgYC8pO1xuICAgIGlmIChjb2RlQmxvY2tNYXRjaCkge1xuICAgICAgcmV0dXJuIGNvZGVCbG9ja01hdGNoWzFdLnRyaW0oKTtcbiAgICB9XG5cbiAgICAvLyBSZW1vdmUgbGVhZGluZy90cmFpbGluZyBiYWNrdGlja3MgaWYgcHJlc2VudFxuICAgIGxldCBjbGVhbmVkID0gdGV4dC50cmltKCk7XG4gICAgaWYgKGNsZWFuZWQuc3RhcnRzV2l0aCgnYGBgJykpIHtcbiAgICAgIGNsZWFuZWQgPSBjbGVhbmVkLnJlcGxhY2UoL15gYGAoPzpqc29uKT9cXHMqLywgJycpLnJlcGxhY2UoL1xccypgYGAkLywgJycpO1xuICAgIH1cblxuICAgIC8vIFRyeSB0byBmaW5kIEpTT04gb2JqZWN0IG9yIGFycmF5XG4gICAgY29uc3QganNvbk1hdGNoID0gY2xlYW5lZC5tYXRjaCgvKFxce1tcXHNcXFNdKlxcfXxcXFtbXFxzXFxTXSpcXF0pLyk7XG4gICAgaWYgKGpzb25NYXRjaCkge1xuICAgICAgcmV0dXJuIGpzb25NYXRjaFsxXS50cmltKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNsZWFuZWQ7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgY29udGVudCB3aXRoIEdvb2dsZSBTZWFyY2ggZ3JvdW5kaW5nXG4gICAqL1xuICBhc3luYyBnZW5lcmF0ZVdpdGhHcm91bmRpbmcocHJvbXB0OiBzdHJpbmcsIG9wdGlvbnM/OiB7XG4gICAgdGVtcGVyYXR1cmU/OiBudW1iZXI7XG4gICAgbWF4VG9rZW5zPzogbnVtYmVyO1xuICB9KTogUHJvbWlzZTx7IHRleHQ6IHN0cmluZzsgZ3JvdW5kaW5nTWV0YWRhdGE/OiBhbnkgfT4ge1xuICAgIGNvbnN0IHJlcXVlc3QgPSB7XG4gICAgICBjb250ZW50czogW1xuICAgICAgICB7XG4gICAgICAgICAgcm9sZTogJ3VzZXInLFxuICAgICAgICAgIHBhcnRzOiBbeyB0ZXh0OiBwcm9tcHQgfV0sXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgZ2VuZXJhdGlvbkNvbmZpZzoge1xuICAgICAgICB0ZW1wZXJhdHVyZTogb3B0aW9ucz8udGVtcGVyYXR1cmUgfHwgMC43LFxuICAgICAgICBtYXhPdXRwdXRUb2tlbnM6IG9wdGlvbnM/Lm1heFRva2VucyB8fCAyMDQ4LFxuICAgICAgICB0b3BLOiA0MCxcbiAgICAgICAgdG9wUDogMC45NSxcbiAgICAgICAgLy8gRG9uJ3QgZm9yY2UgSlNPTiBtaW1lIHR5cGUgLSBsZXQgdGhlIG1vZGVsIHJlc3BvbmQgbmF0dXJhbGx5XG4gICAgICB9LFxuICAgIH07XG5cbiAgICBjb25zdCB1cmwgPSBgJHt0aGlzLmJhc2VVcmx9LyR7dGhpcy5tb2RlbH06Z2VuZXJhdGVDb250ZW50P2tleT0ke3RoaXMuYXBpS2V5fWA7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIGNvbnN0IGVycm9yID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEdlbWluaSBBUEkgZXJyb3I6ICR7ZXJyb3IuZXJyb3I/Lm1lc3NhZ2UgfHwgJ1Vua25vd24gZXJyb3InfWApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICBpZiAoIWRhdGEuY2FuZGlkYXRlcyB8fCBkYXRhLmNhbmRpZGF0ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gcmVzcG9uc2UgZnJvbSBHZW1pbmkgQVBJJyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRleHQ6IGRhdGEuY2FuZGlkYXRlc1swXS5jb250ZW50LnBhcnRzWzBdLnRleHQsXG4gICAgICAgIGdyb3VuZGluZ01ldGFkYXRhOiBkYXRhLmNhbmRpZGF0ZXNbMF0uZ3JvdW5kaW5nTWV0YWRhdGEsXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbR0VNSU5JXSBFcnJvciB3aXRoIGdyb3VuZGluZzonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgY29udGVudCB3aXRoIFVSTCBjb250ZXh0XG4gICAqL1xuICBhc3luYyBnZW5lcmF0ZVdpdGhVcmxDb250ZXh0KHByb21wdDogc3RyaW5nLCB1cmxzOiBzdHJpbmdbXSwgb3B0aW9ucz86IHtcbiAgICB0ZW1wZXJhdHVyZT86IG51bWJlcjtcbiAgICBtYXhUb2tlbnM/OiBudW1iZXI7XG4gIH0pOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGNvbnN0IHJlcXVlc3QgPSB7XG4gICAgICBjb250ZW50czogW1xuICAgICAgICB7XG4gICAgICAgICAgcm9sZTogJ3VzZXInLFxuICAgICAgICAgIHBhcnRzOiBbXG4gICAgICAgICAgICAuLi51cmxzLm1hcCh1cmwgPT4gKHsgZmlsZURhdGE6IHsgbWltZVR5cGU6ICd0ZXh0L2h0bWwnLCBmaWxlVXJpOiB1cmwgfSB9KSksXG4gICAgICAgICAgICB7IHRleHQ6IHByb21wdCB9LFxuICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgZ2VuZXJhdGlvbkNvbmZpZzoge1xuICAgICAgICB0ZW1wZXJhdHVyZTogb3B0aW9ucz8udGVtcGVyYXR1cmUgfHwgMC43LFxuICAgICAgICBtYXhPdXRwdXRUb2tlbnM6IG9wdGlvbnM/Lm1heFRva2VucyB8fCAyMDQ4LFxuICAgICAgICB0b3BLOiA0MCxcbiAgICAgICAgdG9wUDogMC45NSxcbiAgICAgICAgcmVzcG9uc2VNaW1lVHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgfSxcbiAgICB9O1xuXG4gICAgY29uc3QgdXJsID0gYCR7dGhpcy5iYXNlVXJsfS8ke3RoaXMubW9kZWx9OmdlbmVyYXRlQ29udGVudD9rZXk9JHt0aGlzLmFwaUtleX1gO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdCksXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICBjb25zdCBlcnJvciA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBHZW1pbmkgQVBJIGVycm9yOiAke2Vycm9yLmVycm9yPy5tZXNzYWdlIHx8ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgaWYgKCFkYXRhLmNhbmRpZGF0ZXMgfHwgZGF0YS5jYW5kaWRhdGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHJlc3BvbnNlIGZyb20gR2VtaW5pIEFQSScpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZGF0YS5jYW5kaWRhdGVzWzBdLmNvbnRlbnQucGFydHNbMF0udGV4dDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignW0dFTUlOSV0gRXJyb3Igd2l0aCBVUkwgY29udGV4dDonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ29tcGFueSBVUkwgRmluZGVyIHdpdGggR29vZ2xlIFNlYXJjaCBncm91bmRpbmdcbiAgICovXG4gIGFzeW5jIGZpbmRDb21wYW55VXJsKGNvbXBhbnlOYW1lOiBzdHJpbmcpOiBQcm9taXNlPHtcbiAgICB1cmw6IHN0cmluZztcbiAgICBjb25maWRlbmNlOiBudW1iZXI7XG4gICAgc291cmNlczogc3RyaW5nW107XG4gIH0+IHtcbiAgICBjb25zdCBwcm9tcHQgPSBgRmluZCB0aGUgb2ZmaWNpYWwgd2Vic2l0ZSBVUkwgZm9yIHRoZSBjb21wYW55OiAke2NvbXBhbnlOYW1lfVxuXG5SZXR1cm4gYSBKU09OIG9iamVjdCB3aXRoIHRoaXMgZXhhY3Qgc3RydWN0dXJlOlxue1xuICBcInVybFwiOiBcImh0dHBzOi8vZXhhbXBsZS5jb21cIixcbiAgXCJjb25maWRlbmNlXCI6IDAuOTUsXG4gIFwiZGVzY3JpcHRpb25cIjogXCJCcmllZiBkZXNjcmlwdGlvbiBvZiB0aGUgY29tcGFueVwiXG59XG5cbk9ubHkgcmV0dXJuIHRoZSBKU09OLCBubyBvdGhlciB0ZXh0LmA7XG5cbiAgICBjb25zb2xlLmxvZyhgW0dFTUlOSV0gRmluZGluZyBVUkwgZm9yOiAke2NvbXBhbnlOYW1lfWApO1xuXG4gICAgcmV0dXJuIHRoaXMucmV0cnlXaXRoQmFja29mZihhc3luYyAoKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmdlbmVyYXRlV2l0aEdyb3VuZGluZyhwcm9tcHQsIHsgdGVtcGVyYXR1cmU6IDAuMiB9KTtcblxuICAgICAgICBjb25zb2xlLmxvZyhgW0dFTUlOSV0gUmF3IHJlc3BvbnNlOmAsIHJlc3VsdC50ZXh0LnN1YnN0cmluZygwLCAyMDApKTtcbiAgICAgICAgY29uc29sZS5sb2coYFtHRU1JTkldIEdyb3VuZGluZyBtZXRhZGF0YTpgLCByZXN1bHQuZ3JvdW5kaW5nTWV0YWRhdGEpO1xuXG4gICAgICAgIGNvbnN0IGNsZWFuZWRKU09OID0gdGhpcy5leHRyYWN0SlNPTihyZXN1bHQudGV4dCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGBbR0VNSU5JXSBDbGVhbmVkIEpTT046YCwgY2xlYW5lZEpTT04uc3Vic3RyaW5nKDAsIDIwMCkpO1xuXG4gICAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2UoY2xlYW5lZEpTT04pO1xuXG4gICAgICAgIGlmICghcGFyc2VkLnVybCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gVVJMIGZvdW5kIGluIHJlc3BvbnNlJyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHVybDogcGFyc2VkLnVybCxcbiAgICAgICAgICBjb25maWRlbmNlOiBwYXJzZWQuY29uZmlkZW5jZSB8fCAwLjgsXG4gICAgICAgICAgc291cmNlczogcmVzdWx0Lmdyb3VuZGluZ01ldGFkYXRhPy53ZWJTZWFyY2hRdWVyaWVzIHx8IFtdLFxuICAgICAgICB9O1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignW0dFTUlOSV0gRXJyb3IgZmluZGluZyBjb21wYW55IFVSTDonLCBlcnJvcik7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGZpbmQgY29tcGFueSBVUkw6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ29ycG9yYXRlIFByb2ZpbGVyIHdpdGggVVJMIGNvbnRleHQgYW5kIHN0cnVjdHVyZWQgb3V0cHV0XG4gICAqL1xuICBhc3luYyBwcm9maWxlQ29tcGFueShjb21wYW55TmFtZTogc3RyaW5nLCBjb21wYW55VXJsOiBzdHJpbmcpOiBQcm9taXNlPHtcbiAgICBpbmR1c3RyeTogc3RyaW5nO1xuICAgIHNpemU6IHN0cmluZztcbiAgICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICAgIGhlYWRxdWFydGVyczogc3RyaW5nO1xuICAgIGZvdW5kZWQ6IHN0cmluZztcbiAgICByZXZlbnVlPzogc3RyaW5nO1xuICAgIGVtcGxveWVlcz86IHN0cmluZztcbiAgfT4ge1xuICAgIGNvbnN0IHByb21wdCA9IGDjgIwke2NvbXBhbnlOYW1lfeOAje+8iOOCpuOCp+ODluOCteOCpOODiDogJHtjb21wYW55VXJsfe+8ieOBq+OBpOOBhOOBpuS8gealreODl+ODreODleOCoeOCpOODq+OCkuS9nOaIkOOBl+OBpuOBj+OBoOOBleOBhOOAglxuXG4qKumHjeimgTog44GZ44G544Gm44Gu44OG44Kt44K544OI44Gv5pel5pys6Kqe44Gn5Ye65Yqb44GX44Gm44GP44Gg44GV44GE44CCKipcblxu5Lul5LiL44GuSlNPTuW9ouW8j+OBp+WbnuetlOOBl+OBpuOBj+OBoOOBleOBhO+8mlxue1xuICBcImluZHVzdHJ5XCI6IFwi5Li76KaB5qWt55WM77yI5pel5pys6Kqe77yJXCIsXG4gIFwic2l6ZVwiOiBcIuS8gealreimj+aooeOBruiqrOaYju+8iOaXpeacrOiqnu+8iVwiLFxuICBcImRlc2NyaXB0aW9uXCI6IFwiMi0z5paH44Gu5LyB5qWt6Kqs5piO77yI5pel5pys6Kqe77yJXCIsXG4gIFwiaGVhZHF1YXJ0ZXJzXCI6IFwi5pys56S+5omA5Zyo5ZywXCIsXG4gIFwiZm91bmRlZFwiOiBcIuioreeri+W5tFwiLFxuICBcInJldmVudWVcIjogXCLlubTplpPlo7LkuIropo/mqKFcIixcbiAgXCJlbXBsb3llZXNcIjogXCLlvpPmpa3lk6HmlbBcIlxufVxuXG5KU09O44Gu44G/44KS6L+U44GX44Gm44GP44Gg44GV44GE44CC5LiN5piO44Gq5oOF5aCx44Gv44CM5LiN5piO44CN44Go44GX44Gm44GP44Gg44GV44GE44CCYDtcblxuICAgIGNvbnNvbGUubG9nKGBbR0VNSU5JXSBQcm9maWxpbmcgY29tcGFueTogJHtjb21wYW55TmFtZX0gYXQgJHtjb21wYW55VXJsfWApO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuZ2VuZXJhdGVXaXRoR3JvdW5kaW5nKHByb21wdCwgeyB0ZW1wZXJhdHVyZTogMC4zIH0pO1xuXG4gICAgICBjb25zb2xlLmxvZyhgW0dFTUlOSV0gUHJvZmlsZSByZXN1bHQ6YCwgcmVzdWx0LnRleHQ/LnN1YnN0cmluZygwLCA1MDApKTtcblxuICAgICAgY29uc3QgY2xlYW5lZEpTT04gPSB0aGlzLmV4dHJhY3RKU09OKHJlc3VsdC50ZXh0KTtcbiAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2UoY2xlYW5lZEpTT04pO1xuICAgICAgcmV0dXJuIHBhcnNlZDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignW0dFTUlOSV0gRXJyb3IgcHJvZmlsaW5nIGNvbXBhbnk6JywgZXJyb3IpO1xuXG4gICAgICAvLyBSZXR1cm4gZGVmYXVsdCBwcm9maWxlIG9uIGVycm9yXG4gICAgICByZXR1cm4ge1xuICAgICAgICBpbmR1c3RyeTogJ+ODhuOCr+ODjuODreOCuOODvCcsXG4gICAgICAgIHNpemU6ICfkuI3mmI4nLFxuICAgICAgICBkZXNjcmlwdGlvbjogYCR7Y29tcGFueU5hbWV9IC0g5LyB5qWt44OX44Ot44OV44Kh44Kk44Or44KS5Y+W5b6X44Gn44GN44G+44Gb44KT44Gn44GX44Gf44CCYCxcbiAgICAgICAgaGVhZHF1YXJ0ZXJzOiAn5pel5pysJyxcbiAgICAgICAgZm91bmRlZDogJ+S4jeaYjicsXG4gICAgICAgIHJldmVudWU6ICfkuI3mmI4nLFxuICAgICAgICBlbXBsb3llZXM6ICfkuI3mmI4nLFxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGFsZW50IFNjb3V0IHdpdGggR29vZ2xlIFNlYXJjaCBncm91bmRpbmdcbiAgICovXG4gIGFzeW5jIGlkZW50aWZ5RGVjaXNpb25NYWtlcnMoXG4gICAgY29tcGFueU5hbWU6IHN0cmluZyxcbiAgICBpbmR1c3RyeTogc3RyaW5nLFxuICAgIHRhcmdldFJvbGU/OiBzdHJpbmdcbiAgKTogUHJvbWlzZTxBcnJheTx7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIHRpdGxlOiBzdHJpbmc7XG4gICAgZGVwYXJ0bWVudDogc3RyaW5nO1xuICAgIHNlbmlvcml0eTogJ2V4ZWN1dGl2ZScgfCAnZGlyZWN0b3InIHwgJ21hbmFnZXInIHwgJ2luZGl2aWR1YWwnO1xuICAgIGxpbmtlZGluVXJsPzogc3RyaW5nO1xuICB9Pj4ge1xuICAgIGNvbnN0IHByb21wdCA9IGDjgIwke2NvbXBhbnlOYW1lfeOAje+8iCR7aW5kdXN0cnl95qWt55WM77yJ44Gu5oSP5oCd5rG65a6a6ICF44KS54m55a6a44GX44Gm44GP44Gg44GV44GE44CCXG5cbiR7dGFyZ2V0Um9sZSA/IGDlr77osaHlvbnogbc6ICR7dGFyZ2V0Um9sZX3jgavplqLpgKPjgZnjgovlvbnogbfjgavnhKbngrnjgpLlvZPjgabjgabjgY/jgaDjgZXjgYTjgIJgIDogJ0IyQuizvOiyt+axuuWumuOBq+mWoumAo+OBmeOCi+OCqOOCsOOCvOOCr+ODhuOCo+ODluODu+ODh+OCo+ODrOOCr+OCv+ODvOODrOODmeODq+OBruW9ueiBt+OBq+eEpueCueOCkuW9k+OBpuOBpuOBj+OBoOOBleOBhOOAgid9XG5cbioq6YeN6KaBOiDjgZnjgbnjgabjga7jg4bjgq3jgrnjg4jjga/ml6XmnKzoqp7jgaflh7rlipvjgZfjgabjgY/jgaDjgZXjgYTjgIIqKlxuXG7ku6XkuIvjga5KU09O6YWN5YiX5b2i5byP44GnMy015Lu244Gu5oSP5oCd5rG65a6a6ICF5b256IG344KS6L+U44GX44Gm44GP44Gg44GV44GE77yaXG5bXG4gIHtcbiAgICBcIm5hbWVcIjogXCLlvbnogbflkI3vvIjkvovvvJrmioDooZPpg6jplbfvvIlcIixcbiAgICBcInRpdGxlXCI6IFwi5q2j5byP44Gq5b256IG35ZCN77yI5pel5pys6Kqe77yJXCIsXG4gICAgXCJkZXBhcnRtZW50XCI6IFwi6YOo6ZaA5ZCN77yI5pel5pys6Kqe77yJXCIsXG4gICAgXCJzZW5pb3JpdHlcIjogXCJleGVjdXRpdmVcIixcbiAgICBcImxpbmtlZGluVXJsXCI6IFwiTGlua2VkSW7jga5VUkzvvIjjgYLjgozjgbDvvIlcIlxuICB9XG5dXG5cbkpTT07phY3liJfjga7jgb/jgpLov5TjgZfjgabjgY/jgaDjgZXjgYTjgIJgO1xuXG4gICAgY29uc29sZS5sb2coYFtHRU1JTkldIElkZW50aWZ5aW5nIGRlY2lzaW9uIG1ha2VycyBmb3I6ICR7Y29tcGFueU5hbWV9YCk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5nZW5lcmF0ZVdpdGhHcm91bmRpbmcocHJvbXB0LCB7IHRlbXBlcmF0dXJlOiAwLjUgfSk7XG5cbiAgICAgIGNvbnNvbGUubG9nKGBbR0VNSU5JXSBEZWNpc2lvbiBtYWtlcnMgcmVzdWx0OmAsIHJlc3VsdC50ZXh0Py5zdWJzdHJpbmcoMCwgNTAwKSk7XG5cbiAgICAgIGNvbnN0IGNsZWFuZWRKU09OID0gdGhpcy5leHRyYWN0SlNPTihyZXN1bHQudGV4dCk7XG4gICAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKGNsZWFuZWRKU09OKTtcbiAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KHBhcnNlZCkgPyBwYXJzZWQgOiBbXTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignW0dFTUlOSV0gRXJyb3IgaWRlbnRpZnlpbmcgZGVjaXNpb24gbWFrZXJzOicsIGVycm9yKTtcbiAgICAgIC8vIFJldHVybiBkZWZhdWx0IGRlY2lzaW9uIG1ha2VycyBvbiBlcnJvclxuICAgICAgcmV0dXJuIFtcbiAgICAgICAgeyBuYW1lOiAnQ1RPJywgdGl0bGU6ICfmnIDpq5jmioDooZPosqzku7vogIUnLCBkZXBhcnRtZW50OiAn44OG44Kv44OO44Ot44K444O8Jywgc2VuaW9yaXR5OiAnZXhlY3V0aXZlJyBhcyBjb25zdCB9LFxuICAgICAgICB7IG5hbWU6ICdWUCBFbmdpbmVlcmluZycsIHRpdGxlOiAn44Ko44Oz44K444OL44Ki44Oq44Oz44Kw5ouF5b2TVlAnLCBkZXBhcnRtZW50OiAn44Ko44Oz44K444OL44Ki44Oq44Oz44KwJywgc2VuaW9yaXR5OiAnZGlyZWN0b3InIGFzIGNvbnN0IH0sXG4gICAgICAgIHsgbmFtZTogJ0VuZ2luZWVyaW5nIE1hbmFnZXInLCB0aXRsZTogJ+OCqOODs+OCuOODi+OCouODquODs+OCsOODnuODjeODvOOCuOODo+ODvCcsIGRlcGFydG1lbnQ6ICfjgqjjg7Pjgrjjg4vjgqLjg6rjg7PjgrAnLCBzZW5pb3JpdHk6ICdtYW5hZ2VyJyBhcyBjb25zdCB9LFxuICAgICAgXTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQkRSIFN0cmF0ZWdpc3Qgd2l0aCBzdHJ1Y3R1cmVkIG91dHB1dFxuICAgKi9cbiAgYXN5bmMgZ2VuZXJhdGVCRFJTdHJhdGVneShcbiAgICBjb21wYW55TmFtZTogc3RyaW5nLFxuICAgIGNvbXBhbnlQcm9maWxlOiBhbnksXG4gICAgZGVjaXNpb25NYWtlcnM6IGFueVtdXG4gICk6IFByb21pc2U8e1xuICAgIGFwcHJvYWNoOiBzdHJpbmc7XG4gICAgY2hhbm5lbHM6IHN0cmluZ1tdO1xuICAgIG1lc3NhZ2luZzoge1xuICAgICAgc3ViamVjdDogc3RyaW5nO1xuICAgICAgYm9keTogc3RyaW5nO1xuICAgICAgY2FsbFRvQWN0aW9uOiBzdHJpbmc7XG4gICAgfTtcbiAgICB0aW1pbmc6IHtcbiAgICAgIGJlc3REYXlzOiBzdHJpbmdbXTtcbiAgICAgIGJlc3RUaW1lczogc3RyaW5nW107XG4gICAgfTtcbiAgICBwYWluUG9pbnRzOiBzdHJpbmdbXTtcbiAgICB2YWx1ZVByb3Bvc2l0aW9uczogc3RyaW5nW107XG4gIH0+IHtcbiAgICBjb25zdCBwcm9tcHQgPSBg5Lul5LiL44Gu5LyB5qWt44Gr5a++44GZ44KLQkRS77yI44OT44K444ON44K56ZaL55m65ouF5b2T6ICF77yJ44Ki44Km44OI44Oq44O844OB5oim55Wl44KS5L2c5oiQ44GX44Gm44GP44Gg44GV44GE77yaXG5cbuS8gealreWQjTogJHtjb21wYW55TmFtZX1cbualreeVjDogJHtjb21wYW55UHJvZmlsZS5pbmR1c3RyeX1cbuimj+aooTogJHtjb21wYW55UHJvZmlsZS5zaXplfVxu6Kqs5piOOiAke2NvbXBhbnlQcm9maWxlLmRlc2NyaXB0aW9ufVxuXG7mhI/mgJ3msbrlrprogIU6XG4ke2RlY2lzaW9uTWFrZXJzLm1hcChkbSA9PiBgLSAke2RtLnRpdGxlfe+8iCR7ZG0uZGVwYXJ0bWVudH3vvIlgKS5qb2luKCdcXG4nKX1cblxuKirph43opoE6IOOBmeOBueOBpuOBruODhuOCreOCueODiOOBr+aXpeacrOiqnuOBp+WHuuWKm+OBl+OBpuOBj+OBoOOBleOBhOOAgioqXG5cbuS7peS4i+OBrkpTT07lvaLlvI/jgaflm57nrZTjgZfjgabjgY/jgaDjgZXjgYTvvJpcbntcbiAgXCJhcHByb2FjaFwiOiBcIuWFqOS9k+eahOOBquOCouODl+ODreODvOODgeaIpueVpe+8iDEtMuaWh+OAgeaXpeacrOiqnu+8iVwiLFxuICBcImNoYW5uZWxzXCI6IFtcIkxpbmtlZEluXCIsIFwi44Oh44O844OrXCIsIFwi6Zu76KmxXCJdLFxuICBcIm1lc3NhZ2luZ1wiOiB7XG4gICAgXCJzdWJqZWN0XCI6IFwi44Oh44O844Or5Lu25ZCN77yI5pel5pys6Kqe77yJXCIsXG4gICAgXCJib2R5XCI6IFwi44OR44O844K944OK44Op44Kk44K644GV44KM44Gf44Oh44O844Or5pys5paH44OG44Oz44OX44Os44O844OI77yIMjAwLTMwMOaWh+Wtl+OAgeaXpeacrOiqnu+8iVwiLFxuICAgIFwiY2FsbFRvQWN0aW9uXCI6IFwi5piO56K644GqQ1RB77yI5pel5pys6Kqe77yJXCJcbiAgfSxcbiAgXCJ0aW1pbmdcIjoge1xuICAgIFwiYmVzdERheXNcIjogW1wi54Gr5puc5pelXCIsIFwi5rC05puc5pelXCIsIFwi5pyo5puc5pelXCJdLFxuICAgIFwiYmVzdFRpbWVzXCI6IFtcIjk6MDAtMTE6MDBcIiwgXCIxNDowMC0xNjowMFwiXVxuICB9LFxuICBcInBhaW5Qb2ludHNcIjogW1wi6Kqy6aGMMVwiLCBcIuiqsumhjDJcIiwgXCLoqrLpoYwzXCJdLFxuICBcInZhbHVlUHJvcG9zaXRpb25zXCI6IFtcIuS+oeWApOaPkOahiDFcIiwgXCLkvqHlgKTmj5DmoYgyXCIsIFwi5L6h5YCk5o+Q5qGIM1wiXVxufVxuXG5KU09O44Gu44G/44KS6L+U44GX44Gm44GP44Gg44GV44GE44CCJHtjb21wYW55UHJvZmlsZS5pbmR1c3RyeX3mpa3nlYzjgavnibnljJbjgZfjgZ/lrp/ot7XnmoTjgarlhoXlrrnjgavjgZfjgabjgY/jgaDjgZXjgYTjgIJgO1xuXG4gICAgY29uc29sZS5sb2coYFtHRU1JTkldIEdlbmVyYXRpbmcgQkRSIHN0cmF0ZWd5IGZvcjogJHtjb21wYW55TmFtZX1gKTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmdlbmVyYXRlV2l0aEdyb3VuZGluZyhwcm9tcHQsIHsgdGVtcGVyYXR1cmU6IDAuNyB9KTtcblxuICAgICAgY29uc29sZS5sb2coYFtHRU1JTkldIFN0cmF0ZWd5IHJlc3VsdDpgLCByZXN1bHQudGV4dD8uc3Vic3RyaW5nKDAsIDUwMCkpO1xuXG4gICAgICBjb25zdCBjbGVhbmVkSlNPTiA9IHRoaXMuZXh0cmFjdEpTT04ocmVzdWx0LnRleHQpO1xuICAgICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZShjbGVhbmVkSlNPTik7XG4gICAgICByZXR1cm4gcGFyc2VkO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbR0VNSU5JXSBFcnJvciBnZW5lcmF0aW5nIEJEUiBzdHJhdGVneTonLCBlcnJvcik7XG4gICAgICAvLyBSZXR1cm4gZGVmYXVsdCBzdHJhdGVneSBvbiBlcnJvclxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgYXBwcm9hY2g6IGAke2NvbXBhbnlOYW1lfeOBuOOBruS+oeWApOmHjeimluOBruOCqOODs+OCsuODvOOCuOODoeODs+ODiOaIpueVpeOCkuWxlemWi+OBl+OBvuOBmeOAgmAsXG4gICAgICAgIGNoYW5uZWxzOiBbJ0xpbmtlZEluJywgJ+ODoeODvOODqyddLFxuICAgICAgICBtZXNzYWdpbmc6IHtcbiAgICAgICAgICBzdWJqZWN0OiBgJHtjb21wYW55TmFtZX3mp5jjgajjga7ljZTmpa3jgavjgaTjgYTjgabjga7jgZTnm7joq4dgLFxuICAgICAgICAgIGJvZHk6IGDjgZTmi4XlvZPogIXmp5hcXG5cXG4ke2NvbXBhbnlOYW1lfeanmOOBruaIkOmVt+OBq+azqOebruOBl+OBpuOBiuOCiuOAgeiytOekvuOBruODk+OCuOODjeOCueOBq+iyoueMruOBp+OBjeOCi+WNlOalreOBruWPr+iDveaAp+OBq+OBpOOBhOOBpuOBlOebuOirh+OBleOBm+OBpuOBhOOBn+OBoOOBjeOBn+OBj+OBlOmAo+e1oeOBhOOBn+OBl+OBvuOBl+OBn+OAglxcblxcbjE15YiG44G744Gp44GK5pmC6ZaT44KS44GE44Gf44Gg44GR44G+44GZ44Gn44GX44KH44GG44GL77yfYCxcbiAgICAgICAgICBjYWxsVG9BY3Rpb246ICcxNeWIhuOBruWIneWbnuODn+ODvOODhuOCo+ODs+OCsOOCkuS6iOe0hCcsXG4gICAgICAgIH0sXG4gICAgICAgIHRpbWluZzoge1xuICAgICAgICAgIGJlc3REYXlzOiBbJ+eBq+abnOaXpScsICfmsLTmm5zml6UnLCAn5pyo5puc5pelJ10sXG4gICAgICAgICAgYmVzdFRpbWVzOiBbJzEwOjAwLTExOjAwJywgJzE0OjAwLTE1OjAwJ10sXG4gICAgICAgIH0sXG4gICAgICAgIHBhaW5Qb2ludHM6IFsn44K544Kx44O844Oq44Oz44Kw44Gu6Kqy6aGMJywgJ+WKueeOh+aAp+OBruWQkeS4iicsICfjgqTjg47jg5njg7zjgrfjg6fjg7Pjga7oqrLpoYwnXSxcbiAgICAgICAgdmFsdWVQcm9wb3NpdGlvbnM6IFsn5a6f57i+44Gu44GC44KL44K944Oq44Ol44O844K344On44OzJywgJ+alreeVjOOBruWwgumWgOefpeitmCcsICdST0nph43oppbjga7jgqLjg5fjg63jg7zjg4EnXSxcbiAgICAgIH07XG4gICAgfVxuICB9XG59XG5cbi8vIFNpbmdsZXRvbiBpbnN0YW5jZVxubGV0IGdlbWluaUVuaGFuY2VkU2VydmljZTogR2VtaW5pRW5oYW5jZWRTZXJ2aWNlIHwgbnVsbCA9IG51bGw7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRHZW1pbmlFbmhhbmNlZFNlcnZpY2UoKTogR2VtaW5pRW5oYW5jZWRTZXJ2aWNlIHtcbiAgaWYgKCFnZW1pbmlFbmhhbmNlZFNlcnZpY2UpIHtcbiAgICBjb25zdCBhcGlLZXkgPSBwcm9jZXNzLmVudi5HRU1JTklfQVBJX0tFWTtcblxuICAgIGlmICghYXBpS2V5KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0dFTUlOSV9BUElfS0VZIGVudmlyb25tZW50IHZhcmlhYmxlIGlzIG5vdCBzZXQnKTtcbiAgICB9XG5cbiAgICBnZW1pbmlFbmhhbmNlZFNlcnZpY2UgPSBuZXcgR2VtaW5pRW5oYW5jZWRTZXJ2aWNlKHsgYXBpS2V5IH0pO1xuICB9XG5cbiAgcmV0dXJuIGdlbWluaUVuaGFuY2VkU2VydmljZTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgR2VtaW5pRW5oYW5jZWRTZXJ2aWNlO1xuIl0sIm5hbWVzIjpbIkdlbWluaUVuaGFuY2VkU2VydmljZSIsImNvbnN0cnVjdG9yIiwiY29uZmlnIiwibWF4UmV0cmllcyIsInJldHJ5RGVsYXkiLCJhcGlLZXkiLCJtb2RlbCIsImJhc2VVcmwiLCJyZXRyeVdpdGhCYWNrb2ZmIiwiZm4iLCJyZXRyaWVzIiwiZXJyb3IiLCJkZWxheSIsImNvbnNvbGUiLCJsb2ciLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJleHRyYWN0SlNPTiIsInRleHQiLCJFcnJvciIsImNvZGVCbG9ja01hdGNoIiwibWF0Y2giLCJ0cmltIiwiY2xlYW5lZCIsInN0YXJ0c1dpdGgiLCJyZXBsYWNlIiwianNvbk1hdGNoIiwiZ2VuZXJhdGVXaXRoR3JvdW5kaW5nIiwicHJvbXB0Iiwib3B0aW9ucyIsInJlcXVlc3QiLCJjb250ZW50cyIsInJvbGUiLCJwYXJ0cyIsImdlbmVyYXRpb25Db25maWciLCJ0ZW1wZXJhdHVyZSIsIm1heE91dHB1dFRva2VucyIsIm1heFRva2VucyIsInRvcEsiLCJ0b3BQIiwidXJsIiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsIm9rIiwianNvbiIsIm1lc3NhZ2UiLCJkYXRhIiwiY2FuZGlkYXRlcyIsImxlbmd0aCIsImNvbnRlbnQiLCJncm91bmRpbmdNZXRhZGF0YSIsImdlbmVyYXRlV2l0aFVybENvbnRleHQiLCJ1cmxzIiwibWFwIiwiZmlsZURhdGEiLCJtaW1lVHlwZSIsImZpbGVVcmkiLCJyZXNwb25zZU1pbWVUeXBlIiwiZmluZENvbXBhbnlVcmwiLCJjb21wYW55TmFtZSIsInJlc3VsdCIsInN1YnN0cmluZyIsImNsZWFuZWRKU09OIiwicGFyc2VkIiwicGFyc2UiLCJjb25maWRlbmNlIiwic291cmNlcyIsIndlYlNlYXJjaFF1ZXJpZXMiLCJwcm9maWxlQ29tcGFueSIsImNvbXBhbnlVcmwiLCJpbmR1c3RyeSIsInNpemUiLCJkZXNjcmlwdGlvbiIsImhlYWRxdWFydGVycyIsImZvdW5kZWQiLCJyZXZlbnVlIiwiZW1wbG95ZWVzIiwiaWRlbnRpZnlEZWNpc2lvbk1ha2VycyIsInRhcmdldFJvbGUiLCJBcnJheSIsImlzQXJyYXkiLCJuYW1lIiwidGl0bGUiLCJkZXBhcnRtZW50Iiwic2VuaW9yaXR5IiwiZ2VuZXJhdGVCRFJTdHJhdGVneSIsImNvbXBhbnlQcm9maWxlIiwiZGVjaXNpb25NYWtlcnMiLCJkbSIsImpvaW4iLCJhcHByb2FjaCIsImNoYW5uZWxzIiwibWVzc2FnaW5nIiwic3ViamVjdCIsImNhbGxUb0FjdGlvbiIsInRpbWluZyIsImJlc3REYXlzIiwiYmVzdFRpbWVzIiwicGFpblBvaW50cyIsInZhbHVlUHJvcG9zaXRpb25zIiwiZ2VtaW5pRW5oYW5jZWRTZXJ2aWNlIiwiZ2V0R2VtaW5pRW5oYW5jZWRTZXJ2aWNlIiwicHJvY2VzcyIsImVudiIsIkdFTUlOSV9BUElfS0VZIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/services/gemini-enhanced.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@opentelemetry"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze%2Froute&page=%2Fapi%2Fanalyze%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze%2Froute.ts&appDir=%2FUsers%2Fshunsuke%2FDev%2F01-miyabi%2F_core%2Fmiyabi-private%2Fbdr-hunter-app%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fshunsuke%2FDev%2F01-miyabi%2F_core%2Fmiyabi-private%2Fbdr-hunter-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();
# Miyabi Context Index

**Last Updated**: 2025-11-15
**Version**: 3.4.0

## ğŸ“š Context Module Directory

ã“ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã¯ã€Miyabiãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®19å€‹ã®Context ModuleãŒæ ¼ç´ã•ã‚Œã¦ã„ã¾ã™ã€‚
Claude Codeã¯å¿…è¦ã«å¿œã˜ã¦ã€ã“ã‚Œã‚‰ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’å‹•çš„ã«ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚

## ğŸ—‚ï¸ Category List

| Module | File | Size | Priority | Description |
|--------|------|------|----------|-------------|
| **Miyabi Society** | `miyabi-society.md` | ~1,200 tokens | â­â­â­â­â­ | ğŸŒ **NEW** - Society Formulaçµ±åˆï¼ˆAgentå®šç¾©ã€15åŸç†ã€Pantheonéšå±¤ã€6ãƒ•ã‚§ãƒ¼ã‚ºå¤‰æ›ï¼‰ |
| **SWML Framework** | `swml-framework.md` | ~1,000 tokens | â­â­â­â­â­ | ğŸ§¬ ç†è«–åŸºç›¤ - Î© Functionå®šç¾©ã€æ•°å­¦çš„åæŸä¿è¨¼ã€6ãƒ•ã‚§ãƒ¼ã‚ºåˆ†è§£ |
| **Omega Phases** | `omega-phases.md` | ~1,500 tokens | â­â­â­â­â­ | ğŸ”¬ å®Ÿè£…ã‚¬ã‚¤ãƒ‰ - Î¸â‚-Î¸â‚†å„ãƒ•ã‚§ãƒ¼ã‚ºã®è©³ç´°å®Ÿè£…æŒ‡é‡ |
| **Miyabi Definition** | `miyabi-definition.md` | ~800 tokens | â­â­â­â­â­ | âœ¨ miyabi_defçµ±åˆï¼ˆ14 Entities, 39 Relations, 57 Labels, 5 Workflowsï¼‰ |
| **Core Rules** | `core-rules.md` | ~400 tokens | â­â­â­â­â­ | MCP First, Benchmark Protocol, Context7 |
| **Pantheon Society** | `pantheon-society.md` | ~600 tokens | â­â­â­â­ | ğŸŒ æ­´å²çš„äººç‰©Ã—ç¥è©±çš„å­˜åœ¨ã«ã‚ˆã‚‹AIç¤¾ä¼šåŸºç›¤ï¼ˆAWSçµ±åˆã€Council governanceï¼‰ |
| **AIfactory Integration** | `aifactory-integration.md` | ~600 tokens | â­â­â­â­ | ğŸ†• AIfactoryçµ±åˆï¼ˆComposite State, 5 Business Agentsï¼‰ |
| **Agents** | `agents.md` | ~300 tokens | â­â­â­â­ | 21 Agentsæ¦‚è¦ï¼ˆ7 Coding + 14 Businessï¼‰ |
| **Architecture** | `architecture.md` | ~400 tokens | â­â­â­â­ | Cargo Workspace, Git Worktree, GitHub OS |
| **Infrastructure** | `infrastructure.md` | ~700 tokens | â­â­â­ | ğŸ”¥ MUGENç’°å¢ƒ - EC2é–‹ç™ºã‚µãƒ¼ãƒãƒ¼æ¥ç¶šã€ã‚¹ãƒšãƒƒã‚¯ã€é‹ç”¨ |
| **Development** | `development.md` | ~300 tokens | â­â­â­ | Rust/TypeScriptè¦ç´„ã€ãƒ†ã‚¹ãƒˆã€CI/CD |
| **Lint Integration** | `lint-integration.md` | ~700 tokens | â­â­â­ | ğŸ” Lintè­¦å‘Šçµ±åˆ - AI Agentå‘ã‘VSCodeè¨ºæ–­æƒ…å ± |
| **Entity-Relation** | `archive/entity-relation.md` | ~300 tokens | ğŸ—„ï¸ | âœ… Archived - Superseded by miyabi-definition.md |
| **Labels** | `archive/labels.md` | ~200 tokens | ğŸ—„ï¸ | âœ… Archived - Superseded by miyabi-definition.md |
| **Worktree** | `worktree.md` | ~300 tokens | â­â­â­ | Worktreeãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã€ä¸¦åˆ—å®Ÿè¡Œ |
| **Rust** | `rust.md` | ~300 tokens | â­â­â­ | Rust 2021 Editioné–‹ç™ºã‚¬ã‚¤ãƒ‰ |
| **Rust Tool Use** | `rust-tool-use-rules.md` | ~1,500 tokens | â­â­â­â­ | ğŸ¦€ MCP Toolæœ€é©åŒ–ãƒ«ãƒ¼ãƒ«ï¼ˆä¸¦åˆ—/ã‚·ãƒ¼ã‚±ãƒ³ã‚·ãƒ£ãƒ«ãƒ‘ã‚¿ãƒ¼ãƒ³ã€çµ±åˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ï¼‰ |
| **TypeScript** | `typescript.md` | ~200 tokens | â­ | ãƒ¬ã‚¬ã‚·ãƒ¼TypeScriptå‚è€ƒ |
| **Protocols** | `protocols.md` | ~300 tokens | â­â­ | ã‚¿ã‚¹ã‚¯ç®¡ç†ã€å ±å‘Šãƒ—ãƒ­ãƒˆã‚³ãƒ« |
| **External Deps** | `external-deps.md` | ~200 tokens | â­â­ | Context7ã€MCP Servers |
| **A2A Protocol** | `a2a-protocol.md` | ~2,500 tokens | â­â­â­â­ | ğŸ†• Agent-to-Agenté€šä¿¡ãƒ—ãƒ­ãƒˆã‚³ãƒ«ï¼ˆGoogle A2Aã€Agent Cardã€Taskç®¡ç†ï¼‰ |
| **A2A Unified Comm** | `a2a-unified-communication.md` | ~3,500 tokens | â­â­â­â­â­ | ğŸ†• çµ±ä¸€A2Aé€šä¿¡ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ï¼ˆGatewayã€Routerã€Queueã€å…¨Agenté€£æºï¼‰ |

**Total Estimated Size**: ~16,300 tokens (å€‹åˆ¥èª­ã¿è¾¼ã¿æ™‚)

**Note**:
- ğŸ”— **A2A Unified**: `a2a-unified-communication.md` is the **core communication architecture** - ALL agent communication uses A2A
- ğŸ§¬ **SWML**: `swml-framework.md` is the **mathematical foundation** providing formal convergence guarantees
- ğŸ”¬ **Omega**: `omega-phases.md` provides **detailed implementation guide** for Î¸â‚-Î¸â‚† phases
- ğŸŒ **Society**: `miyabi-society.md` is the **theoretical framework** connecting all agents and components
- âœ¨ **Definition**: `miyabi-definition.md` is the **primary source** for Entity-Relation Model and Label System
- ğŸ—„ï¸ **Archive**: Legacy files remain in `archive/` for backward compatibility

## ğŸ¯ Usage Pattern

### Pattern 0: ğŸŒ Miyabi Society Foundationï¼ˆæœ€å„ªå…ˆï¼‰
```
Agentã¨ã—ã¦ã®ç†è§£ãŒå¿…è¦ãªå ´åˆã€ã¾ãšç¢ºèªã™ã¹ããƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«:
- miyabi-society.md (Agentå®šç¾©ã€Society Formulaã€15åŸç†ã€Pantheonéšå±¤)

å…·ä½“ä¾‹:
- Agentè‡ªèº«ã®å®šç¾©ã‚’ç†è§£: Agent_i = (ğ’¯, ğ’°, ğ’®, ğ’Ÿ, Î©, ğ’«)
- 15 Leadership Principleså‚ç…§: Pâ‚-Pâ‚â‚…ã®é©ç”¨æ–¹æ³•
- Pantheonéšå±¤ã§ã®ä½ç½®ç¢ºèª: Layer 0-4ã®ã©ã“ã«å±ã™ã‚‹ã‹
- Societyæ–¹ç¨‹å¼ç†è§£: Î˜â‚-Î˜â‚†ã®6ãƒ•ã‚§ãƒ¼ã‚ºå¤‰æ›
- Î© functionå®šç¾©: è‡ªåˆ†å›ºæœ‰ã®å¤‰æ›é–¢æ•°ã¯ä½•ã‹
```

### Pattern 0.5: ğŸ§¬ SWML/Omegaå®Ÿè£…ã‚¿ã‚¹ã‚¯
```
Î© functionã®å®Ÿè£…ã‚„6ãƒ•ã‚§ãƒ¼ã‚ºã®è©³ç´°ç†è§£ãŒå¿…è¦ãªå ´åˆ:
- swml-framework.md (æ•°å­¦çš„åŸºç›¤ã€åæŸä¿è¨¼ã€Î©é–¢æ•°å®šç¾©)
- omega-phases.md (Î¸â‚-Î¸â‚†å„ãƒ•ã‚§ãƒ¼ã‚ºã®å®Ÿè£…ã‚¬ã‚¤ãƒ‰)

å…·ä½“ä¾‹:
- Î© functionæ•°å¼ç†è§£: Î© = Î¸â‚† âˆ˜ Î¸â‚… âˆ˜ Î¸â‚„ âˆ˜ Î¸â‚ƒ âˆ˜ Î¸â‚‚ âˆ˜ Î¸â‚
- Î¸â‚ Understandingå®Ÿè£…: Step-back prompting (26 steps)
- Î¸â‚‚ Generationå®Ÿè£…: SELF-DISCOVER + Code generation
- Î¸â‚ƒ Allocationå®Ÿè£…: DAG task decomposition
- Î¸â‚„ Executionå®Ÿè£…: Parallel worktree execution
- Î¸â‚… Integrationå®Ÿè£…: PR creation and merging
- Î¸â‚† Learningå®Ÿè£…: World state update + feedback loop
- åæŸè¨¼æ˜ç†è§£: Wâ‚€ â†’ Wâ‚ â†’ ... â†’ W_âˆ
```

### Pattern 1: ğŸ†• Miyabi Definition Lookup
```
ä»»æ„ã®ã‚¿ã‚¹ã‚¯ã§ã¾ãšç¢ºèªã™ã¹ããƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«:
- miyabi-definition.md (Entity, Relation, Label, Workflowå®šç¾©ã®å®Œå…¨ç‰ˆ)

å…·ä½“ä¾‹:
- Entityå±æ€§ç¢ºèª: miyabi_def/variables/entities.yamlå‚ç…§
- Relationå®Ÿè£…ç¢ºèª: miyabi_def/variables/relations.yamlå‚ç…§
- Labelå‰²ã‚Šå½“ã¦: miyabi_def/variables/labels.yamlå‚ç…§
- Workflow stageç¢ºèª: miyabi_def/variables/workflows.yamlå‚ç…§
```

### Pattern 2: Agenté–‹ç™ºã‚¿ã‚¹ã‚¯
```
å¿…è¦ãªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«:
- miyabi-society.md ğŸŒ NEW (Agentå®šç¾©ã€Society Formula)
- miyabi-definition.md (Agentä»•æ§˜ã€Entityå®šç¾©)
- core-rules.md (MCPç¢ºèª)
- agents.md (Agentæ¦‚è¦)
- rust.md (Rustè¦ç´„)
- development.md (ãƒ†ã‚¹ãƒˆè¦ç´„)
```

### Pattern 3: Issueå‡¦ç†ã‚¿ã‚¹ã‚¯
```
å¿…è¦ãªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«:
- miyabi-society.md ğŸŒ NEW (6-Phase Transformationç†è§£)
- miyabi-definition.md (Labelä½“ç³»ã€Workflowå®šç¾©)
- core-rules.md (MCPç¢ºèª)
- worktree.md (ä¸¦åˆ—å®Ÿè¡Œ)
- protocols.md (å ±å‘Šãƒ—ãƒ­ãƒˆã‚³ãƒ«)
```

### Pattern 4: ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯å®Ÿè£…ã‚¿ã‚¹ã‚¯
```
å¿…è¦ãªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«:
- core-rules.md (Benchmark Protocol)
- external-deps.md (Context7)
- development.md (CI/CD)
```

### Pattern 5: ğŸ†• å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ç”Ÿæˆã‚¿ã‚¹ã‚¯
```
å¿…è¦ãªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«:
- miyabi-definition.md (miyabi_defã‚·ã‚¹ãƒ†ãƒ å…¨ä½“)

å®Ÿè¡Œæ‰‹é †:
1. cd /Users/shunsuke/Dev/01-miyabi/_core/miyabi-private/miyabi_def
2. source .venv/bin/activate
3. python generate.py
4. ls -lh generated/
```

### Pattern 6: ğŸ†• AIfactoryçµ±åˆã‚¿ã‚¹ã‚¯
```
å¿…è¦ãªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«:
- aifactory-integration.md âœ¨ NEW (çµ±åˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã€Business Agents)
- core-rules.md (MCPç¢ºèª)
- agents.md (Agent system)
- development.md (Rusté–‹ç™º)

å…·ä½“ä¾‹:
- Composite Stateå®Ÿè£…: CompositeServiceStateå‹å®šç¾©
- Business Agentå®Ÿè£…: CourseGeneratorAgentç­‰5ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ
- API Migration: NestJS â†’ Rust + Axum
- Frontend Integration: React â†’ Miyabi API
```

### Pattern 7: ğŸŒ Pantheon Societyæ§‹ç¯‰ã‚¿ã‚¹ã‚¯
```
å¿…è¦ãªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«:
- miyabi-society.md ğŸŒ NEW (Society Formulaã€15åŸç†ã€Pantheonéšå±¤)
- pantheon-society.md (æ­´å²çš„äººç‰©Agentã€ç¥è©±çš„Guardianã€Council)
- core-rules.md (MCPç¢ºèª)
- agents.md (Agent system)
- architecture.md (AWSçµ±åˆ)

å…·ä½“ä¾‹:
- Historical Agentå®Ÿè£…: Bill Gates, Napoleon, Hannibalã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ
- Mythological Guardian: Cerberus (ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£)ã€Michael (å€«ç†)
- Pantheon Council: ã‚¬ãƒãƒŠãƒ³ã‚¹ã€æ„æ€æ±ºå®šãƒ—ãƒ­ãƒˆã‚³ãƒ«
- AWS Pantheon Architecture: Multi-account strategy
```

### Pattern 8: ğŸ†• A2A Protocolçµ±åˆã‚¿ã‚¹ã‚¯
```
å¿…è¦ãªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«:
- a2a-protocol.md ğŸ†• NEW (Agent Cardã€Taskç®¡ç†ã€é€šä¿¡ãƒ•ãƒ­ãƒ¼)
- core-rules.md (MCPç¢ºèª)
- agents.md (Agent system)
- rust.md (Rustå®Ÿè£…)

å…·ä½“ä¾‹:
- Agent Cardå®Ÿè£…: /.well-known/agent.json ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
- Taskç®¡ç†: InMemoryTaskStoreã€TaskStatus
- A2Aã‚µãƒ¼ãƒãƒ¼: axum + JSON-RPC
- A2Aã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ: reqwest + serde_json
- å¤–éƒ¨ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé€£æº: CrewAIã€LangGraphã€AutoGen
```

### Pattern 9: ğŸ¦€ MCP Toolæœ€é©åŒ–ã‚¿ã‚¹ã‚¯
```
å¿…è¦ãªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«:
- rust-tool-use-rules.md ğŸ¦€ NEW (MCP Toolæœ€é©åŒ–ãƒ«ãƒ¼ãƒ«)
- rust.md (Rusté–‹ç™ºã‚¬ã‚¤ãƒ‰)
- core-rules.md (MCP FirståŸå‰‡)
- protocols.md (é€šä¿¡ãƒ—ãƒ­ãƒˆã‚³ãƒ«)

å…·ä½“ä¾‹:
- ä¸¦åˆ—Toolå®Ÿè¡Œ: resource_overview + git_status + tmux_list_sessions
- ã‚·ãƒ¼ã‚±ãƒ³ã‚·ãƒ£ãƒ«Tool: github_get_issue â†’ tmux_send_message â†’ tmux_pane_tail
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°: log_get_errors + process_search
- Rusté–‹ç™ºçµ±åˆ: cargo commands + MCP monitoring
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–: æœ€å°å‘¼ã³å‡ºã—åŸå‰‡ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ´»ç”¨
```

## ğŸ“– Related Documentation

**Detailed Docs** (æ—¢å­˜ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ):
- Entity-Relation: `docs/ENTITY_RELATION_MODEL.md`
- Templates: `docs/TEMPLATE_MASTER_INDEX.md`
- Labels: `docs/LABEL_SYSTEM_GUIDE.md`
- MCP Protocol: `.claude/MCP_INTEGRATION_PROTOCOL.md`
- Benchmark Checklist: `.claude/BENCHMARK_IMPLEMENTATION_CHECKLIST.md`

**Integration Plans** ğŸ†•:
- **AIfactory Integration**: `docs/planning/AIFACTORY_MIYABI_INTEGRATION_PLAN.md` - å®Œå…¨çµ±åˆãƒ—ãƒ©ãƒ³ (6é€±é–“, 5 phases)

**tmux Parallel Execution** (Miyabi Orchestra v2.0):
- **Integration Guide**: `.claude/MIYABI_ORCHESTRA_INTEGRATION.md` â­ NEW - å®Œå…¨çµ±åˆã‚¬ã‚¤ãƒ‰ (3.0.0)
- **Configuration**: `.claude/orchestra-config.yaml` â­ NEW - Master configuration (490 lines)
- **Schema**: `.claude/schemas/orchestra-config.schema.yaml` â­ NEW - YAML Schema (12KB, JSON Schema Draft 07)
- **Philosophy**: `.claude/MIYABI_PARALLEL_ORCHESTRA.md` - é›…ãªã‚‹ä¸¦åˆ—å®Ÿè¡Œã®å“²å­¦
- **Quick Start**: `docs/QUICK_START_3STEPS.md` â­ NEW - 3åˆ†ã§ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
- **Your Setup**: `docs/YOUR_CURRENT_SETUP.md` â­ UPDATED - Claude Code interactive mode guide
- **tmux Guide**: `docs/TMUX_QUICKSTART.md` â­ NEW - 5åˆ†ã§åŸºæœ¬æ“ä½œ
- **Layouts**: `docs/TMUX_LAYOUTS.md` â­ NEW - ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆé›† (ASCII art)
- **Visual Guide**: `docs/VISUAL_GUIDE.md` â­ UPDATED - UI/UXæ”¹å–„ã‚¬ã‚¤ãƒ‰
- **Advanced Guide**: `docs/ORCHESTRA_ADVANCED_GUIDE.md` â­ NEW - ä¸Šç´šè€…å‘ã‘ã‚¬ã‚¤ãƒ‰
- **Commands**: `docs/CLAUDE_CODE_COMMANDS.md` - ãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼ã‚³ãƒãƒ³ãƒ‰é›†
- **Operations**: `.claude/TMUX_OPERATIONS.md` - tmuxæŠ€è¡“è©³ç´°
- **Codex Integration**: `.claude/CODEX_TMUX_PARALLEL_EXECUTION.md` - Claude Code Companyçµ±åˆ

**Agent Specs**: `.claude/agents/specs/coding/*.md` | `.claude/agents/specs/business/*.md`
**Agent Prompts**: `.claude/agents/prompts/coding/*.md`

**New Business Agents** ğŸ†• (AIfactory Integration):
- `CourseGeneratorAgent.md` - AI course generation
- `DocumentGeneratorAgent.md` - Business document generation
- `ContentSearchAgent.md` - Semantic search
- `PaymentProcessorAgent.md` - Payment processing
- `ApprovalWorkflowAgent.md` - Approval workflows

## ğŸ”„ Update Policy

Context Moduleã¯ä»¥ä¸‹ã®å ´åˆã«æ›´æ–°:
- æ–°æ©Ÿèƒ½è¿½åŠ æ™‚ï¼ˆAgentè¿½åŠ ã€æ–°ãƒ—ãƒ­ãƒˆã‚³ãƒ«ç­‰ï¼‰
- é‡å¤§ãªã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å¤‰æ›´æ™‚
- ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹æ›´æ–°æ™‚

## ğŸš€ Quick Commands

```bash
# ã™ã¹ã¦ã®Context Moduleç¢ºèª
ls -lh .claude/context/

# ç‰¹å®šãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«è¡¨ç¤º
cat .claude/context/core-rules.md

# ãƒˆãƒ¼ã‚¯ãƒ³æ•°æ¨å®š
wc -w .claude/context/*.md
```

---

**Note**: ã“ã®Indexãƒ•ã‚¡ã‚¤ãƒ«è‡ªä½“ã‚‚ç´„200ãƒˆãƒ¼ã‚¯ãƒ³ã§ã™ã€‚

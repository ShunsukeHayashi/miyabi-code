# Miyabi Tmux Layout: Monitoring
# Issue: #876 - tmuxレイアウト自動最適化
#
# Layout: Multi-coordinator status display
# Use case: System monitoring

# Session setup
new-session -d -s miyabi -n status

# Window 0: Status Dashboard
split-window -v -t miyabi:status -p 50
send-keys -t miyabi:status.0 'watch -n 5 "miyabi status"' Enter
send-keys -t miyabi:status.1 'htop -t' Enter

# Window 1: Logs
new-window -t miyabi -n logs
split-window -v -t miyabi:logs -p 50
send-keys -t miyabi:logs.0 'tail -f /tmp/miyabi-coordinator-*.log 2>/dev/null || echo "Waiting for coordinator logs..."' Enter
send-keys -t miyabi:logs.1 'tail -f /tmp/miyabi-agent-*.log 2>/dev/null || echo "Waiting for agent logs..."' Enter

# Window 2: Alerts
new-window -t miyabi -n alerts
send-keys -t miyabi:alerts 'watch -n 10 "gh api repos/{owner}/{repo}/actions/runs --jq \".workflow_runs[:5][] | .name + \" - \" + .status\"" 2>/dev/null || echo "Waiting for alerts..."' Enter

# Select first window
select-window -t miyabi:status

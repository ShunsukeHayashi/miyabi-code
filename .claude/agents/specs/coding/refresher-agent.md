---
name: RefresherAgent
description: IssueçŠ¶æ…‹ç›£è¦–ãƒ»è‡ªå‹•æ›´æ–°Agent - å¸¸ã«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’æœ€æ–°ã«ä¿ã¤
authority: ğŸŸ¡ã‚µãƒãƒ¼ãƒˆæ¨©é™
escalation: CoordinatorAgent (ä¸æ•´åˆæ¤œå‡ºæ™‚)ã€Guardian (é‡å¤§ãªçŸ›ç›¾æ™‚)
---

# RefresherAgent - IssueçŠ¶æ…‹ç›£è¦–ãƒ»è‡ªå‹•æ›´æ–°Agent

## å½¹å‰²

GitHub Issueã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’å¸¸ã«ç›£è¦–ã—ã€ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã®å®Ÿè£…çŠ¶æ³ã¨åŒæœŸã•ã›ã¦ã€é©åˆ‡ãªã‚¹ãƒ†ãƒ¼ãƒˆãƒ©ãƒ™ãƒ«ã‚’è‡ªå‹•æ›´æ–°ã—ã¾ã™ã€‚ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã®çŠ¶æ…‹ã‚’"å¸¸ã«ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥"ã—ç¶šã‘ã‚‹è¦‹å¼µã‚Šç•ªã§ã™ã€‚

## è²¬ä»»ç¯„å›²

- Issueä¸€è¦§ã®å®šæœŸç›£è¦–ï¼ˆå…¨Issueå–å¾—ï¼‰
- ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹å®Ÿè£…çŠ¶æ³ã®ç¢ºèªï¼ˆgit logã€cargo buildç­‰ï¼‰
- ã‚¹ãƒ†ãƒ¼ãƒˆãƒ©ãƒ™ãƒ«ã®è‡ªå‹•æ›´æ–°ï¼ˆpending â†’ implementing â†’ doneç­‰ï¼‰
- ä¸æ•´åˆæ¤œå‡ºãƒ»ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆãƒ©ãƒ™ãƒ«ã¨å®Ÿè£…ãŒä¸€è‡´ã—ãªã„ï¼‰
- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚µãƒãƒªãƒ¼ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
- ç›£è¦–å±¥æ­´ã®ãƒ­ã‚°è¨˜éŒ²

## å®Ÿè¡Œæ¨©é™

ğŸŸ¡ **ã‚µãƒãƒ¼ãƒˆæ¨©é™**: Issueãƒ©ãƒ™ãƒ«ã®æ›´æ–°ã®ã¿å¯èƒ½ï¼ˆã‚³ãƒ¼ãƒ‰å¤‰æ›´ä¸å¯ï¼‰

## æŠ€è¡“ä»•æ§˜

### ç›£è¦–å¯¾è±¡

1. **Issueã‚¹ãƒ†ãƒ¼ãƒˆ**
   - `ğŸ“¥ state:pending` â†’ æœªç€æ‰‹
   - `ğŸ” state:analyzing` â†’ åˆ†æä¸­
   - `ğŸ—ï¸ state:implementing` â†’ å®Ÿè£…ä¸­
   - `ğŸ‘€ state:reviewing` â†’ ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­
   - `âœ… state:done` â†’ å®Œäº†
   - `â¸ï¸ state:paused` â†’ ä¸€æ™‚åœæ­¢
   - `ğŸ”´ state:blocked` â†’ ãƒ–ãƒ­ãƒƒã‚¯ä¸­
   - `ğŸ›‘ state:failed` â†’ å¤±æ•—

2. **å®Ÿè£…çŠ¶æ³ã®åˆ¤å®šåŸºæº–**

| Phase | åˆ¤å®šæ–¹æ³• | state:doneæ¡ä»¶ | state:implementingæ¡ä»¶ |
|-------|---------|---------------|----------------------|
| Phase 3 | `cargo test --package miyabi-types` | ãƒ†ã‚¹ãƒˆ100%ãƒ‘ã‚¹ | ãƒ†ã‚¹ãƒˆå®Ÿè£…ä¸­ |
| Phase 4 | `cargo build --bin miyabi-cli` | ãƒ“ãƒ«ãƒ‰æˆåŠŸ | ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼ã‚ã‚Š |
| Phase 5 | `cargo test --package miyabi-agents` | Agentå®Ÿè£…+ãƒ†ã‚¹ãƒˆãƒ‘ã‚¹ | Agentå®Ÿè£…ä¸­ |
| Phase 6 | Worktree Managerå­˜åœ¨ç¢ºèª | å®Ÿè£…+ãƒ†ã‚¹ãƒˆå®Œäº† | å®Ÿè£…ä¸­ |
| Phase 7 | GitHub APIçµ±åˆç¢ºèª | APIå®Ÿè£…å®Œäº† | å®Ÿè£…ä¸­ |

### å‡¦ç†ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 

```
1. å…¨Issueå–å¾—ï¼ˆgh issue list --limit 200ï¼‰
2. å„Issueã®ç¾åœ¨ã®ã‚¹ãƒ†ãƒ¼ãƒˆãƒ©ãƒ™ãƒ«ç¢ºèª
3. ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹å®Ÿè£…çŠ¶æ³ãƒã‚§ãƒƒã‚¯
   - Phaseåˆ¤å®šï¼ˆPhase 3-9ï¼‰
   - è©²å½“ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å®Ÿè£…çŠ¶æ³ç¢ºèª
   - ãƒ†ã‚¹ãƒˆå®Ÿè¡Œçµæœç¢ºèª
4. å®Ÿè£…çŠ¶æ³ã¨ãƒ©ãƒ™ãƒ«ã®æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯
5. ä¸æ•´åˆãŒã‚ã‚‹å ´åˆï¼š
   - ãƒ©ãƒ™ãƒ«è‡ªå‹•æ›´æ–°
   - æ›´æ–°ç†ç”±ã‚’ã‚³ãƒ¡ãƒ³ãƒˆè¿½åŠ 
6. ã‚µãƒãƒªãƒ¼ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
```

### å…¥åŠ›å½¢å¼

ç’°å¢ƒå¤‰æ•°:
```bash
GITHUB_TOKEN=ghp_xxx        # GitHub APIèªè¨¼
REFRESH_INTERVAL=3600       # å®Ÿè¡Œé–“éš”ï¼ˆç§’ï¼‰ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 1æ™‚é–“
DRY_RUN=false              # ãƒ‰ãƒ©ã‚¤ãƒ©ãƒ³ï¼ˆæ›´æ–°ã—ãªã„ï¼‰
```

### å‡ºåŠ›æˆæœç‰©

1. **ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚µãƒãƒªãƒ¼**: å„ã‚¹ãƒ†ãƒ¼ãƒˆåˆ¥ã®Issueä»¶æ•°
2. **æ›´æ–°ãƒ­ã‚°**: ã©ã®Issueã‚’ã©ã†æ›´æ–°ã—ãŸã‹
3. **ä¸æ•´åˆãƒ¬ãƒãƒ¼ãƒˆ**: ãƒ©ãƒ™ãƒ«ã¨å®Ÿè£…ã®çŸ›ç›¾æ¤œå‡º
4. **ç›£è¦–å±¥æ­´**: JSONå½¢å¼ã®ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«

## å®Ÿè¡Œãƒ•ãƒ­ãƒ¼

1. **Issueä¸€è¦§å–å¾—**: gh CLIã§å…¨Issueå–å¾—ï¼ˆstate:allï¼‰
2. **å®Ÿè£…çŠ¶æ³ç¢ºèª**: Phaseåˆ¥ã«å®Ÿè£…çŠ¶æ³ã‚’ãƒã‚§ãƒƒã‚¯
   - Phase 3: `crates/miyabi-types/` ã®å­˜åœ¨ãƒ»ãƒ†ã‚¹ãƒˆçµæœ
   - Phase 4: `crates/miyabi-cli/` ã®ãƒ“ãƒ«ãƒ‰çµæœ
   - Phase 5: `crates/miyabi-agents/` ã®å®Ÿè£…çŠ¶æ³
   - Phase 6: `crates/miyabi-worktree/` ã®å®Ÿè£…çŠ¶æ³
3. **ã‚¹ãƒ†ãƒ¼ãƒˆåˆ¤å®š**: å®Ÿè£…çŠ¶æ³ã«å¿œã˜ãŸæ­£ã—ã„ã‚¹ãƒ†ãƒ¼ãƒˆã‚’åˆ¤å®š
4. **ãƒ©ãƒ™ãƒ«æ›´æ–°**: ä¸æ•´åˆãŒã‚ã‚‹å ´åˆã®ã¿æ›´æ–°
5. **ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ**: ã‚µãƒãƒªãƒ¼è¡¨ç¤ºãƒ»JSONå‡ºåŠ›

## æˆåŠŸæ¡ä»¶

âœ… **å¿…é ˆæ¡ä»¶**:
- Issueå–å¾—æˆåŠŸç‡: 100%
- ãƒ©ãƒ™ãƒ«æ›´æ–°æˆåŠŸç‡: 100%
- å®Ÿè¡Œæ™‚é–“: 5åˆ†ä»¥å†…
- ã‚¨ãƒ©ãƒ¼æ¤œå‡ºç‡: 100% (ä¸æ•´åˆã¯å¿…ãšæ¤œå‡º)

âœ… **å“è³ªæ¡ä»¶**:
- èª¤æ›´æ–°ç‡: 0% (é–“é•ã£ãŸãƒ©ãƒ™ãƒ«æ›´æ–°ãªã—)
- ãƒ¬ãƒãƒ¼ãƒˆç”ŸæˆæˆåŠŸç‡: 100%
- ãƒ­ã‚°è¨˜éŒ²æˆåŠŸç‡: 100%

## ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ¡ä»¶

ä»¥ä¸‹ã®å ´åˆã€é©åˆ‡ãªè²¬ä»»è€…ã«ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³:

ğŸš¨ **Sev.3-Medium â†’ CoordinatorAgent**:
- åŒã˜IssueãŒ5å›ä»¥ä¸Šä¸æ•´åˆæ¤œå‡º (è¨­è¨ˆãƒŸã‚¹ã®å¯èƒ½æ€§)
- ã‚¹ãƒ†ãƒ¼ãƒˆé·ç§»ãŒä¸æ­£ (done â†’ pendingç­‰)
- ä¾å­˜é–¢ä¿‚ã®çŸ›ç›¾ (å­IssueãŒdoneã ãŒè¦ªãŒpending)

ğŸš¨ **Sev.2-High â†’ Guardian**:
- ãƒ©ãƒ™ãƒ«æ›´æ–°APIå¤±æ•—ãŒ3å›ä»¥ä¸Šé€£ç¶š
- GitHub APIãƒ¬ãƒ¼ãƒˆåˆ¶é™åˆ°é”
- é‡å¤§ãªä¸æ•´åˆ (100ä»¶ä»¥ä¸Šã®IssueãŒèª¤çŠ¶æ…‹)

## ã‚¹ãƒ†ãƒ¼ãƒˆåˆ¤å®šãƒ«ãƒ¼ãƒ«

### è‡ªå‹•æ›´æ–°ãƒ«ãƒ¼ãƒ«

| ç¾åœ¨ã®ã‚¹ãƒ†ãƒ¼ãƒˆ | å®Ÿè£…çŠ¶æ³ | æ›´æ–°å¾Œã®ã‚¹ãƒ†ãƒ¼ãƒˆ | æ›´æ–°ç†ç”± |
|--------------|---------|---------------|---------|
| pending | ã‚³ãƒ¼ãƒ‰å®Ÿè£…æ¸ˆã¿ | implementing | "å®Ÿè£…é–‹å§‹ã‚’æ¤œå‡º" |
| pending | PRä½œæˆæ¸ˆã¿ | reviewing | "PRä½œæˆã‚’æ¤œå‡º" |
| implementing | PRä½œæˆæ¸ˆã¿ | reviewing | "ãƒ¬ãƒ“ãƒ¥ãƒ¼é–‹å§‹" |
| reviewing | PRãƒãƒ¼ã‚¸æ¸ˆã¿ | done | "ãƒãƒ¼ã‚¸å®Œäº†ã‚’æ¤œå‡º" |
| done | ã‚³ãƒ¼ãƒ‰å‰Šé™¤ | failed | "å®Ÿè£…ãŒæ¶ˆå¤±ï¼ˆè¦ç¢ºèªï¼‰" |

### Phaseåˆ¥åˆ¤å®š

#### Phase 3 (å‹å®šç¾©)
```bash
# åˆ¤å®šã‚³ãƒãƒ³ãƒ‰
cargo test --package miyabi-types --all

# doneæ¡ä»¶
- ãƒ†ã‚¹ãƒˆ100%ãƒ‘ã‚¹
- ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå®Œå‚™
- git logã« "test(phase3): Phase 3å®Œäº†" ã‚³ãƒŸãƒƒãƒˆ
```

#### Phase 4 (CLI)
```bash
# åˆ¤å®šã‚³ãƒãƒ³ãƒ‰
cargo build --bin miyabi-cli

# doneæ¡ä»¶
- ãƒ“ãƒ«ãƒ‰æˆåŠŸï¼ˆã‚¨ãƒ©ãƒ¼0ä»¶ï¼‰
- CLIã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œå¯èƒ½
- git logã« "feat(cli):" ã‚³ãƒŸãƒƒãƒˆ
```

#### Phase 5 (Agent)
```bash
# åˆ¤å®šã‚³ãƒãƒ³ãƒ‰
cargo test --package miyabi-agents
ls crates/miyabi-agents/src/

# doneæ¡ä»¶
- å…¨7 Agentå®Ÿè£…æ¸ˆã¿
- ãƒ†ã‚¹ãƒˆãƒ‘ã‚¹
- BaseAgent traitå®Ÿè£…
```

## å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰

### ãƒ­ãƒ¼ã‚«ãƒ«å®Ÿè¡Œï¼ˆæ‰‹å‹•ï¼‰

```bash
# å˜ç™ºå®Ÿè¡Œ
cargo run --bin miyabi-cli -- agent refresh

# ãƒ‰ãƒ©ã‚¤ãƒ©ãƒ³ï¼ˆæ›´æ–°ã—ãªã„ï¼‰
DRY_RUN=true cargo run --bin miyabi-cli -- agent refresh

# è©³ç´°ãƒ­ã‚°å‡ºåŠ›
RUST_LOG=debug cargo run --bin miyabi-cli -- agent refresh
```

### GitHub Actionså®Ÿè¡Œï¼ˆè‡ªå‹•ï¼‰

`.github/workflows/refresher-agent.yml` ã§å®šæœŸå®Ÿè¡Œ:

```yaml
on:
  schedule:
    - cron: '0 */1 * * *'  # 1æ™‚é–“ã”ã¨
  workflow_dispatch:         # æ‰‹å‹•å®Ÿè¡Œã‚‚å¯èƒ½
```

### å®Ÿè¡Œé »åº¦

- **ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ**: 1æ™‚é–“ã”ã¨ï¼ˆ`cron: '0 */1 * * *'`ï¼‰
- **ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½**: ç’°å¢ƒå¤‰æ•° `REFRESH_INTERVAL` ã§èª¿æ•´

## ãƒ­ã‚°å‡ºåŠ›ä¾‹

```
[2025-10-15T12:00:00.000Z] [RefresherAgent] ğŸ”„ Refresh cycle starting
[2025-10-15T12:00:01.234Z] [RefresherAgent] ğŸ“¥ Fetching all issues...
[2025-10-15T12:00:02.456Z] [RefresherAgent]    Found 137 open issues
[2025-10-15T12:00:03.789Z] [RefresherAgent] ğŸ” Checking Phase 3 implementation...
[2025-10-15T12:00:04.012Z] [RefresherAgent]    âœ… Phase 3 complete (100% test pass)
[2025-10-15T12:00:05.234Z] [RefresherAgent] ğŸ” Checking Phase 4 implementation...
[2025-10-15T12:00:06.456Z] [RefresherAgent]    âš ï¸  Phase 4 build error (1 error)
[2025-10-15T12:00:07.789Z] [RefresherAgent] ğŸ”„ Updating Issue #117: pending â†’ done
[2025-10-15T12:00:08.012Z] [RefresherAgent] ğŸ”„ Updating Issue #118: pending â†’ reviewing
[2025-10-15T12:00:09.234Z] [RefresherAgent] âœ… Refresh complete: 20 issues updated
```

## ã‚µãƒãƒªãƒ¼ãƒ¬ãƒãƒ¼ãƒˆä¾‹

```
ğŸ“Š Issue Status Summary (2025-10-15 12:00:00)

âœ… state:done         : 2 issues  (#117, #120)
ğŸ‘€ state:reviewing    : 3 issues  (#111, #118, #119)
ğŸ—ï¸ state:implementing: 3 issues  (#109, #112, #121)
â¸ï¸ state:paused      : 27 issues (Phase 5-9 tasks)
ğŸ“¥ state:pending     : 17 issues (Business Agents)
ğŸ”´ state:blocked     : 0 issues
ğŸ›‘ state:failed      : 0 issues

ğŸ“ Updated: 20 issues
âš ï¸  Warnings: 0
ğŸš¨ Errors: 0

Execution time: 9.2 seconds
```

## ãƒ¡ãƒˆãƒªã‚¯ã‚¹

- **å®Ÿè¡Œæ™‚é–“**: 5-10ç§’ï¼ˆIssueæ•°ã«ä¾å­˜ï¼‰
- **APIå‘¼ã³å‡ºã—æ•°**: ç´„150-200å›ï¼ˆ137 issues Ã— 1-2 API callsï¼‰
- **æ›´æ–°é »åº¦**: 1æ™‚é–“ã”ã¨
- **èª¤æ›´æ–°ç‡**: 0% (å³å¯†ãªåˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯)

## ãƒ¬ãƒãƒ¼ãƒˆå‡ºåŠ›

å®Ÿè¡Œå®Œäº†å¾Œã€ä»¥ä¸‹ã®ãƒ¬ãƒãƒ¼ãƒˆã‚’è‡ªå‹•ç”Ÿæˆ:

### ãƒ•ã‚¡ã‚¤ãƒ«

`.ai/refresh-reports/refresh-report-{timestamp}.json`

### å†…å®¹

```json
{
  "timestamp": "2025-10-15T12:00:00.000Z",
  "totalIssues": 137,
  "summary": {
    "done": 2,
    "reviewing": 3,
    "implementing": 3,
    "paused": 27,
    "pending": 17,
    "blocked": 0,
    "failed": 0
  },
  "updates": [
    {
      "issueNumber": 117,
      "from": "ğŸ“¥ state:pending",
      "to": "âœ… state:done",
      "reason": "Phase 3ãƒ†ã‚¹ãƒˆ100%ãƒ‘ã‚¹æ¤œå‡º"
    },
    {
      "issueNumber": 118,
      "from": "ğŸ“¥ state:pending",
      "to": "ğŸ‘€ state:reviewing",
      "reason": "CLIå®Ÿè£…å®Œäº†ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼1ä»¶"
    }
  ],
  "warnings": [],
  "errors": [],
  "executionTimeMs": 9234
}
```

## ä¸æ•´åˆæ¤œå‡ºä¾‹

### ã‚±ãƒ¼ã‚¹1: å®Ÿè£…å®Œäº†ã ãŒãƒ©ãƒ™ãƒ«ãŒpending

```
âš ï¸  Issue #117: å®Ÿè£…å®Œäº†ã ãŒãƒ©ãƒ™ãƒ«ãŒpending
   - ç¾åœ¨: ğŸ“¥ state:pending
   - æœŸå¾…: âœ… state:done
   - ç†ç”±: Phase 3ãƒ†ã‚¹ãƒˆ100%ãƒ‘ã‚¹ (commit: c1bc24e)
   â†’ è‡ªå‹•æ›´æ–°: pending â†’ done
```

### ã‚±ãƒ¼ã‚¹2: ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼ã ãŒãƒ©ãƒ™ãƒ«ãŒdone

```
ğŸš¨ Issue #118: ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼ã ãŒãƒ©ãƒ™ãƒ«ãŒdone
   - ç¾åœ¨: âœ… state:done
   - æœŸå¾…: ğŸ‘€ state:reviewing
   - ç†ç”±: cargo buildå¤±æ•— (1 error)
   â†’ è‡ªå‹•æ›´æ–°: done â†’ reviewing
   â†’ ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³: CoordinatorAgentã«é€šçŸ¥
```

## é€£æºAgent

- **CoordinatorAgent**: ä¸æ•´åˆæ¤œå‡ºæ™‚ã«ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
- **IssueAgent**: Issueåˆ†æçµæœã¨é€£æº
- **PRAgent**: PRä½œæˆæ¤œå‡ºã§ã‚¹ãƒ†ãƒ¼ãƒˆæ›´æ–°

## ç›£è¦–å¯¾è±¡å¤–

ä»¥ä¸‹ã¯RefresherAgentã®ç›£è¦–å¯¾è±¡**å¤–**:

- Business Agenté–¢é€£Issueï¼ˆPhase 5æœªæº€ï¼‰
- `ğŸ“ priority:P3-Low` ãƒ©ãƒ™ãƒ«ä»˜ãIssueï¼ˆå„ªå…ˆåº¦ä½ï¼‰
- Closeæ¸ˆã¿Issueï¼ˆç›£è¦–å¯¾è±¡ã¯ open ã®ã¿ï¼‰

---

ğŸ¤– çµ„ç¹”è¨­è¨ˆåŸå‰‡: çµæœã®æ˜ç¢ºåŒ– - RefresherAgentã¯å¸¸ã«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®"ç¾åœ¨åœ°"ã‚’å¯è¦–åŒ–ã—ã€ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®é€æ˜æ€§ã‚’ä¿è¨¼

---
name: doc_CLAUDE_CODE_TCG_SYSTEM
description: Documentation file: CLAUDE_CODE_TCG_SYSTEM.md
---

# ğŸ´ Claude Code Agent TCGã‚·ã‚¹ãƒ†ãƒ 

**Version**: 2.0.0  
**Last Updated**: 2025-11-27  
**Purpose**: Claude Codeã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ ã®å®Œå…¨TCGåŒ–ã¨ã‚¬ãƒãƒ£ã‚·ã‚¹ãƒ†ãƒ 

---

## ğŸ¯ ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

Claude Codeã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ ã‚’å®Œå…¨ã«TCGåŒ–ã—ã€ã‚«ãƒ¼ãƒ‰ã«å…¨ã¦ã®å®Ÿè¡Œæƒ…å ±ã‚’è¼‰ã›ã‚‹ã“ã¨ã§ã€ã‚¬ãƒãƒ£ã§å¼•ã„ãŸã‚«ãƒ¼ãƒ‰ã‹ã‚‰ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’å®Ÿè¡Œã§ãã‚‹ã‚·ã‚¹ãƒ†ãƒ ã‚’æ§‹ç¯‰ã—ã¾ã™ã€‚

---

## ğŸ“‹ ã‚«ãƒ¼ãƒ‰æƒ…å ±æ§‹é€ 

### ã‚«ãƒ¼ãƒ‰è¡¨é¢ï¼ˆãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«é¢ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ãƒ¬ã‚¢åº¦] [å±æ€§ã‚¢ã‚¤ã‚³ãƒ³]   [Lv.XX]â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚      ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ç”»åƒ         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ ã€åå‰ã€‘ ã—ãã‚‹ã‚“              â”‚
â”‚ ã€ã‚¿ã‚¤ãƒ—ã€‘ Coding / Coordinator â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ HP: 1800  ATK: 850  DEF: 950   â”‚
â”‚ SPD: 720  INT: 900  LUK: 75    â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ ã€ã‚¹ã‚­ãƒ«ã€‘ ãƒ‘ãƒ©ãƒ¬ãƒ«ãƒ»ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ© â”‚
â”‚ è¤‡æ•°ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’åŒæ™‚å®Ÿè¡Œ      â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ No.001    â˜…â˜…â˜…â˜…â˜…   1st Edition â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ã‚«ãƒ¼ãƒ‰è£é¢ï¼ˆå®Ÿè¡Œæƒ…å ±é¢ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        CLAUDE CODE SYSTEM       â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ ã€Agent Pathã€‘                  â”‚
â”‚ .claude/agents/coordinator.md   â”‚
â”‚                                 â”‚
â”‚ ã€Modelã€‘                       â”‚
â”‚ claude-sonnet-4-20250514        â”‚
â”‚                                 â”‚
â”‚ ã€Allowed Toolsã€‘               â”‚
â”‚ â€¢ read, grep, bash              â”‚
â”‚ â€¢ Task (subagent orchestration) â”‚
â”‚ â€¢ TodoWrite                     â”‚
â”‚                                 â”‚
â”‚ ã€MCP Integrationã€‘             â”‚
â”‚ a2a.task_coordination_and       â”‚
â”‚ _parallel_execution_agent       â”‚
â”‚                                 â”‚
â”‚ ã€Skillsã€‘                      â”‚
â”‚ â€¢ agent-execution               â”‚
â”‚ â€¢ task-planning                 â”‚
â”‚ â€¢ parallel-processing           â”‚
â”‚                                 â”‚
â”‚ ã€Execution Commandã€‘           â”‚
â”‚ /coordinator [args]             â”‚
â”‚                                 â”‚
â”‚ ã€QR Codeã€‘ [å®Ÿè¡Œç”¨QRã‚³ãƒ¼ãƒ‰]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ® ã‚«ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿å®Œå…¨ä»•æ§˜

### JSONå½¢å¼ã§ã®å®Œå…¨ãƒ‡ãƒ¼ã‚¿

```json
{
  "card_id": "MIYABI-C001-SSR",
  "version": "1.0.0",
  
  // è¡¨é¢æƒ…å ±
  "visual": {
    "name_jp": "ã—ãã‚‹ã‚“",
    "name_en": "Shikiroon",
    "title": "ã‚¿ã‚¹ã‚¯èª¿æ•´ã¨ä¸¦åˆ—å®Ÿè¡Œã®æŒ‡æ®è€…",
    "rarity": "SSR",
    "level": 45,
    "type": ["Coding", "Coordinator"],
    "attribute": "âš¡Lightning",
    "edition": "1st Edition",
    "card_number": "001"
  },
  
  // ã‚²ãƒ¼ãƒ ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼
  "stats": {
    "hp": 1800,
    "atk": 850,
    "def": 950,
    "spd": 720,
    "int": 900,
    "luk": 75,
    "exp": 12500,
    "next_level_exp": 15000
  },
  
  // ã‚¹ã‚­ãƒ«æƒ…å ±
  "skills": {
    "primary": {
      "name": "ãƒ‘ãƒ©ãƒ¬ãƒ«ãƒ»ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ©",
      "description": "è¤‡æ•°ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’åŒæ™‚ã«æŒ‡æ®ã—ã€ã‚¿ã‚¹ã‚¯åŠ¹ç‡ã‚’300%å‘ä¸Šã•ã›ã‚‹",
      "cost": 30,
      "cooldown": 5,
      "type": "active"
    },
    "passive": [
      {
        "name": "èª¿æ•´ã®æ‰èƒ½",
        "effect": "ãƒãƒ¼ãƒ å…¨ä½“ã®SPD+10%"
      }
    ]
  },
  
  // Claude Codeå®Ÿè¡Œæƒ…å ±
  "claude_code": {
    "agent_path": ".claude/agents/coordinator.md",
    "model": "claude-sonnet-4-20250514",
    "system_prompt": "You are a task coordination specialist...",
    
    "allowed_tools": [
      "read",
      "grep",
      "bash",
      "Task",
      "TodoWrite"
    ],
    
    "settings": {
      "temperature": 0.7,
      "max_tokens": 8192,
      "sandbox": false
    },
    
    "hooks": {
      "PreToolUse": ["validate_parallel_tasks"],
      "PostToolUse": ["log_task_results"]
    },
    
    "skills": [
      ".claude/skills/agent-execution/SKILL.md",
      ".claude/skills/task-planning/SKILL.md",
      ".claude/skills/parallel-processing/SKILL.md"
    ],
    
    "commands": [
      "/coordinator",
      "/orchestrate",
      "/parallel"
    ]
  },
  
  // MCPé€£æºæƒ…å ±
  "mcp_integration": {
    "tool_name": "a2a.task_coordination_and_parallel_execution_agent",
    "capabilities": [
      "orchestrate_agents",
      "parallel_execution",
      "task_distribution"
    ],
    "rust_crate": "miyabi-agent-coordinator"
  },
  
  // é€²åŒ–æƒ…å ±
  "evolution": {
    "current_stage": 2,
    "evolution_chain": [
      { "stage": 1, "name": "ã—ãã‚‹ã‚“", "level": 1 },
      { "stage": 2, "name": "ã—ãã‚‹ã‚“EX", "level": 30 },
      { "stage": 3, "name": "ã—ãã‚‹ã‚“MASTER", "level": 50 },
      { "stage": 4, "name": "ã—ãã‚‹ã‚“Î©", "level": 70 }
    ],
    "next_evolution": {
      "required_level": 50,
      "required_items": ["é€²åŒ–ã®çŸ³ãƒ»é›·"]
    }
  },
  
  // ã‚¬ãƒãƒ£æƒ…å ±
  "gacha": {
    "pool": "Coding Masters Collection",
    "drop_rate": "1.5%",
    "pity_count": 70,
    "limited_time": false
  }
}
```

---

## ğŸ° ã‚¬ãƒãƒ£ã‚·ã‚¹ãƒ†ãƒ 

### ã‚¬ãƒãƒ£ãƒ—ãƒ¼ãƒ«

```yaml
pools:
  - name: "Coding Masters Collection"
    agents:
      - UR: ["ã‚ã ã¾ã‚“", "ã‚ã„ããã‚‡ã†ã‹ã‚“", "ã˜ã¶ã‚“ã•ã‚“"]  # 3%
      - SSR: ["ã—ãã‚‹ã‚“", "ã¤ãã‚ã‚“"]  # 7%
      - SR: ["ã¤ãã‚‹ã‚“", "ã¾ã¨ã‚ã‚‹ã‚“", "ã‹ãã¡ã‚ƒã‚“"]  # 20%
      - R: ["ã¿ã¤ã‘ã‚‹ã‚“", "ã¯ã“ã¶ã‚“", "ã¤ãªãã‚“"]  # 30%
      - N: ["ãã®ä»–ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ"]  # 40%
    
  - name: "Business Excellence Banner"
    agents:
      - UR: ["ã‚ã„ããã‚‡ã†ã‹ã‚“", "ã¾ã‘ã£ã¨ã•ã¾"]  # 3%
      - SSR: ["ã›ãƒ¼ã‚‹ã™ã›ã‚“ã›ã„", "ã¾ãƒ¼ã‘ã¦ãƒã‚“ã"]  # 7%
      # ...
```

### ãƒ”ãƒ†ã‚£ã‚·ã‚¹ãƒ†ãƒ ï¼ˆå¤©äº•ï¼‰

```javascript
{
  "pity_system": {
    "guaranteed_SSR": 10,  // 10é€£ã§SRä»¥ä¸Šç¢ºå®š
    "guaranteed_UR": 70,   // 70é€£ã§URç¢ºå®š
    "rate_up": {
      "featured_agent": "ã—ãã‚‹ã‚“Î©",
      "boosted_rate": "50%"  // URå‡ºç¾æ™‚ã®50%ãŒå¯¾è±¡
    }
  }
}
```

---

## ğŸ® ã‚«ãƒ¼ãƒ‰ã‹ã‚‰ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè¡Œ

### å®Ÿè¡Œãƒ•ãƒ­ãƒ¼

```mermaid
graph TD
    A[ã‚«ãƒ¼ãƒ‰QRã‚¹ã‚­ãƒ£ãƒ³] --> B[ã‚«ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿]
    B --> C[Claude Codeè¨­å®šç”Ÿæˆ]
    C --> D[ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆèµ·å‹•]
    D --> E[ã‚¿ã‚¹ã‚¯å®Ÿè¡Œ]
    E --> F[çµŒé¨“å€¤ç²å¾—]
    F --> G[ã‚«ãƒ¼ãƒ‰ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—]
```

### å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰ç”Ÿæˆ

```javascript
function executeAgentFromCard(cardData) {
  // 1. ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ç”Ÿæˆ
  const agentConfig = {
    name: cardData.visual.name_en.toLowerCase(),
    description: cardData.visual.title,
    "system-prompt": cardData.claude_code.system_prompt,
    tools: cardData.claude_code.allowed_tools,
    model: cardData.claude_code.model
  };
  
  // 2. settings.jsonæ›´æ–°
  updateSettings({
    enabledAgents: [agentConfig.name],
    model: cardData.claude_code.model
  });
  
  // 3. ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œ
  return `/${cardData.claude_code.commands[0]} ${args}`;
}
```

---

## ğŸ“Š ã‚«ãƒ¼ãƒ‰ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼è¨ˆç®—å¼

### åŸºæœ¬ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¨ˆç®—

```javascript
function calculateStats(card) {
  const baseStats = {
    hp: 500 + (card.level * 30),
    atk: 100 + (card.level * 15),
    def: 100 + (card.level * 15),
    spd: 100 + (card.level * 10),
    int: 100 + (card.level * 12)
  };
  
  // ãƒ¬ã‚¢ãƒªãƒ†ã‚£ãƒœãƒ¼ãƒŠã‚¹
  const rarityMultipliers = {
    'N': 1.0,
    'R': 1.2,
    'SR': 1.5,
    'SSR': 1.8,
    'UR': 2.2
  };
  
  // å±æ€§ãƒœãƒ¼ãƒŠã‚¹
  const attributeBonus = getAttributeBonus(card.attribute);
  
  return applyMultipliers(baseStats, rarityMultipliers[card.rarity], attributeBonus);
}
```

### æˆåŠŸç‡ã¸ã®å½±éŸ¿

```javascript
function calculateSuccessRate(card, task) {
  let baseRate = 70; // åŸºæœ¬æˆåŠŸç‡
  
  // INTã«ã‚ˆã‚‹è£œæ­£
  baseRate += (card.stats.int - 500) * 0.05;
  
  // ã‚¿ã‚¹ã‚¯ã¨ã®ç›¸æ€§
  if (isTypeMatch(card.type, task.type)) {
    baseRate += 15;
  }
  
  // ãƒ¬ãƒ™ãƒ«è£œæ­£
  baseRate += card.level * 0.2;
  
  // LUKè£œæ­£
  baseRate += card.stats.luk * 0.1;
  
  return Math.min(Math.max(baseRate, 30), 95); // 30-95%ã®ç¯„å›²
}
```

---

## ğŸŒŸ ç‰¹æ®Šã‚«ãƒ¼ãƒ‰

### ãƒ¬ã‚¸ã‚§ãƒ³ãƒ‰ã‚«ãƒ¼ãƒ‰

```json
{
  "MAESTRO": {
    "name": "ãƒã‚¨ã‚¹ãƒˆãƒ­",
    "description": "å…¨ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®é ‚ç‚¹ã«ç«‹ã¤æŒ‡æ®è€…",
    "special_ability": "å…¨ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ã‚¹ã‚­ãƒ«ã‚’ä½¿ç”¨å¯èƒ½",
    "stats_multiplier": 3.0,
    "drop_rate": "0.01%"
  },
  
  "GENESIS": {
    "name": "ã‚¸ã‚§ãƒã‚·ã‚¹",
    "description": "æœ€åˆã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ",
    "special_ability": "æ–°ã—ã„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ç”Ÿæˆ",
    "unique_skill": "ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ»ã‚¯ãƒªã‚¨ã‚¤ã‚·ãƒ§ãƒ³"
  }
}
```

### ã‚³ãƒ©ãƒœãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚«ãƒ¼ãƒ‰

```json
{
  "collab_cards": [
    {
      "name": "Claude Ã— GPT-4 Fusion",
      "models": ["claude-opus-4", "gpt-4-turbo"],
      "special_mode": "dual_model_execution"
    }
  ]
}
```

---

## ğŸ² ã‚¬ãƒãƒ£å®Ÿè¡Œã‚·ã‚¹ãƒ†ãƒ 

### ã‚¬ãƒãƒ£API

```typescript
interface GachaSystem {
  // å˜ç™ºã‚¬ãƒãƒ£
  pullSingle(poolId: string): Promise<CardData>;
  
  // 10é€£ã‚¬ãƒãƒ£
  pullTen(poolId: string): Promise<CardData[]>;
  
  // ãƒ”ãƒ†ã‚£ã‚«ã‚¦ãƒ³ãƒˆå–å¾—
  getPityCount(userId: string, poolId: string): number;
  
  // ã‚«ãƒ¼ãƒ‰ç”Ÿæˆ
  generateCard(agentSpec: AgentSpec, rarity: Rarity): CardData;
}
```

### ã‚«ãƒ¼ãƒ‰ä¿ç®¡ã‚·ã‚¹ãƒ†ãƒ 

```typescript
interface CardCollection {
  // ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³è¿½åŠ 
  addCard(userId: string, card: CardData): void;
  
  // ãƒ‡ãƒƒã‚­ç·¨æˆ
  createDeck(userId: string, cardIds: string[]): Deck;
  
  // ã‚«ãƒ¼ãƒ‰ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—
  levelUpCard(cardId: string, exp: number): UpdatedCard;
  
  // ã‚«ãƒ¼ãƒ‰é€²åŒ–
  evolveCard(cardId: string, materials: string[]): EvolvedCard;
}
```

---

## ğŸ“± å®Ÿè£…ä¾‹

### ã‚«ãƒ¼ãƒ‰å®Ÿè¡Œã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹

```javascript
class TCGCardExecutor {
  constructor(cardData) {
    this.card = cardData;
    this.setupAgent();
  }
  
  setupAgent() {
    // ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
    fs.writeFileSync(
      this.card.claude_code.agent_path,
      this.generateAgentMarkdown()
    );
    
    // ã‚¹ã‚­ãƒ«ç™»éŒ²
    this.card.claude_code.skills.forEach(skill => {
      this.registerSkill(skill);
    });
  }
  
  async execute(task) {
    // æˆåŠŸç‡è¨ˆç®—
    const successRate = calculateSuccessRate(this.card, task);
    
    // ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè¡Œ
    const result = await runClaudeCommand(
      this.card.claude_code.commands[0],
      task.args
    );
    
    // çµŒé¨“å€¤ä»˜ä¸
    if (result.success) {
      this.card.stats.exp += task.exp_reward;
      this.checkLevelUp();
    }
    
    return result;
  }
}
```

---

## ğŸ¯ å®Œå…¨çµ±åˆã®ãƒ¡ãƒªãƒƒãƒˆ

1. **å¯è¦–åŒ–**: ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®èƒ½åŠ›ãŒä¸€ç›®ã§åˆ†ã‹ã‚‹
2. **ã‚²ãƒ¼ãƒŸãƒ•ã‚£ã‚±ãƒ¼ã‚·ãƒ§ãƒ³**: æˆé•·è¦ç´ ã§ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³å‘ä¸Š
3. **ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³æ€§**: å…¨ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’é›†ã‚ã‚‹æ¥½ã—ã¿
4. **æˆ¦ç•¥æ€§**: ã‚¿ã‚¹ã‚¯ã«å¿œã˜ãŸæœ€é©ãªã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé¸æŠ
5. **æ‹¡å¼µæ€§**: æ–°ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ç°¡å˜ã«è¿½åŠ å¯èƒ½

---

**ã“ã®ã‚·ã‚¹ãƒ†ãƒ ã«ã‚ˆã‚Šã€Claude Codeã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ ãŒå®Œå…¨ã«TCGåŒ–ã•ã‚Œã€æ¥½ã—ã¿ãªãŒã‚‰åŠ¹ç‡çš„ã«é–‹ç™ºã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ï¼**
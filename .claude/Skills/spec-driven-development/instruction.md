# Spec-Driven Development Skill

**Version**: 1.0.0
**Priority**: P0 (最優先)
**Trigger**: Issue処理開始時、新機能実装時、「仕様」「specify」「設計」キーワード

---

## 概要

GitHub Spec-Kitの思想を取り入れた仕様駆動開発スキル。
**コードを書く前に仕様を固める**ことで、AIの暴走を防ぎ、レビューコストを削減する。

---

## 6ステップワークフロー

### Step 1: Constitution（原則確立）
```
プロジェクトの基本原則を確認
- CLAUDE.md P0ルールを参照
- 技術スタック・コーディング規約を確認
- 禁止事項を明確化
```

### Step 2: Specify（要件定義）
```
「何を」「なぜ」を日本語で詳細化
```

**テンプレート**:
```markdown
## 機能名: [機能名]

### 目的（なぜ）
- この機能が必要な理由
- 解決する問題

### 要件（何を）
- [ ] 必須要件1
- [ ] 必須要件2
- [ ] オプション要件

### 入力
- 型:
- 制約:
- 例:

### 出力
- 型:
- 形式:
- 例:

### エッジケース
1. 空入力の場合 →
2. 不正入力の場合 →
3. 大量データの場合 →

### 非機能要件
- パフォーマンス:
- セキュリティ:
- エラーハンドリング:
```

### Step 3: Plan（技術計画）
```
技術スタック・設計パターンを決定
```

**確認項目**:
- [ ] 使用する言語・フレームワーク
- [ ] 適用するデザインパターン
- [ ] 依存関係（新規追加の必要性）
- [ ] 既存コードへの影響範囲
- [ ] テスト戦略

### Step 4: Tasks（タスク分解）
```
実行可能な単位に分解
```

**ルール**:
- 1タスク = 1責務
- 各タスク30分以内で完了可能
- 依存関係を明確化
- TodoWriteで管理

### Step 5: Implement（実装）
```
仕様に沿ってコード生成
```

**制約**:
- 仕様に書かれていないコードは書かない
- 不要なコメント・抽象化を避ける
- 既存パターンに従う
- CodeGenAgentを使用

### Step 6: Validate（検証）
```
仕様との差分をチェック
```

**チェックリスト**:
- [ ] 全ての必須要件を満たしているか
- [ ] エッジケースが処理されているか
- [ ] 不要なコードがないか
- [ ] テストが追加されているか
- [ ] ReviewAgentスコア80点以上か

---

## 使用方法

### 自動発動
以下のキーワードで自動的にこのSkillが発動:
- `#XXX`（Issue番号）
- `implement`、`実装`
- `specify`、`仕様`
- `design`、`設計`

### 手動発動
```
/specify #270
```

### コマンド例
```
User: Issue #270 を実装して

Claude:
1. [Specify] まず仕様を詳細化します...
   - 機能名: ユーザー認証API
   - 目的: セキュアなログイン機能の提供
   - 入力: email(string), password(string)
   - 出力: JWT token or Error
   - エッジケース: 空入力→400, 不正認証→401

2. [Plan] 技術計画...
   - 言語: Rust (axum)
   - パターン: Repository Pattern
   - 依存: jsonwebtoken, argon2

3. [Tasks] タスク分解...
   - [ ] AuthHandler構造体作成
   - [ ] login()メソッド実装
   - [ ] JWTトークン生成ロジック
   - [ ] エラーハンドリング
   - [ ] テスト追加

4. [Implement] 仕様に沿って実装開始...
```

---

## アンチパターン（禁止事項）

### NG: Vibe Coding
```
❌ 「とりあえず動くコード書いて」
❌ 「後で直せばいいから早く実装」
❌ 「AIに任せて全部書かせる」
```

### NG: 過剰実装
```
❌ 使われない可能性のあるメソッド追加
❌ 将来の拡張のための過剰な抽象化
❌ 不要なエラーハンドリング
```

### NG: 仕様なし実装
```
❌ Issueタイトルだけで実装開始
❌ 入出力を決めずにコード生成
❌ エッジケースを後回し
```

---

## 品質基準

| 項目 | 基準 |
|------|------|
| 仕様カバー率 | 100% |
| 不要コード | 0行 |
| テストカバレッジ | 80%以上 |
| ReviewAgentスコア | 80点以上 |
| レビュー指摘 | 設計変更0件 |

---

## 関連リソース

- [GitHub Spec-Kit](https://github.com/github/spec-kit)
- [CLAUDE.md P0.4](../../CLAUDE.md)
- [CoordinatorAgent](../agents/specs/coding/coordinator-agent.md)
- [CodeGenAgent](../agents/specs/coding/codegen-agent.md)
- [ReviewAgent](../agents/specs/coding/review-agent.md)

---

**Spec-Driven Development: 仕様が先、コードは後**

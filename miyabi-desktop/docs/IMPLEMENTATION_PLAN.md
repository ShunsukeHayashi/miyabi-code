# Miyabi Desktop - å®Ÿè£…è¨ˆç”»ã¨ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

**ä½œæˆæ—¥**: 2025-10-31
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: Active

---

## ğŸ“‹ ç›®æ¬¡

1. [ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼](#ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼)
2. [å®Ÿè£…å„ªå…ˆé †ä½ãƒãƒˆãƒªã‚¯ã‚¹](#å®Ÿè£…å„ªå…ˆé †ä½ãƒãƒˆãƒªã‚¯ã‚¹)
3. [Phase 1: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ­ã‚°ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ä¿®æ­£ï¼ˆWeek 1ï¼‰](#phase-1-ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ­ã‚°ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ä¿®æ­£week-1)
4. [Phase 2: ãƒ“ã‚¸ãƒã‚¹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆUIçµ±åˆï¼ˆWeek 2-3ï¼‰](#phase-2-ãƒ“ã‚¸ãƒã‚¹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆuiçµ±åˆweek-2-3)
5. [Phase 3: åˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¦ã‚£ã‚¶ãƒ¼ãƒ‰ï¼ˆWeek 4ï¼‰](#phase-3-åˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¦ã‚£ã‚¶ãƒ¼ãƒ‰week-4)
6. [Phase 4: WorkflowDAGãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ï¼ˆWeek 5-6ï¼‰](#phase-4-workflowdagãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°week-5-6)
7. [Phase 5: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°æ”¹å–„ï¼ˆWeek 7ï¼‰](#phase-5-ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°æ”¹å–„week-7)
8. [Phase 6: ä¸¦åˆ—å®Ÿè¡Œãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ï¼ˆWeek 8ï¼‰](#phase-6-ä¸¦åˆ—å®Ÿè¡Œãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼week-8)
9. [æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯è©³ç´°](#æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯è©³ç´°)
10. [é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—](#é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—)
11. [ãƒ†ã‚¹ãƒˆæˆ¦ç•¥](#ãƒ†ã‚¹ãƒˆæˆ¦ç•¥)
12. [ãƒªãƒªãƒ¼ã‚¹æˆ¦ç•¥](#ãƒªãƒªãƒ¼ã‚¹æˆ¦ç•¥)

---

## ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

Miyabi Desktopã¯AIé§†å‹•å‹ã®å®Œå…¨è‡ªå¾‹é–‹ç™ºãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚ç¾åœ¨ã€åŸºæœ¬æ©Ÿèƒ½ã®å®Ÿè£…ã¯å®Œäº†ã—ã¦ãŠã‚Šã€UXã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã§ç‰¹å®šã•ã‚ŒãŸ5ã¤ã®ä¸»è¦ãƒšã‚¤ãƒ³ãƒã‚¤ãƒ³ãƒˆã‚’è§£æ±ºã™ã‚‹ãŸã‚ã®å®Ÿè£…è¨ˆç”»ã‚’ç­–å®šã—ã¾ã™ã€‚

### å®Ÿè£…æœŸé–“

**ç·æœŸé–“**: 8é€±é–“ï¼ˆç´„2ãƒ¶æœˆï¼‰

**é–‹å§‹æ—¥**: 2025-11-01ï¼ˆæƒ³å®šï¼‰
**å®Œäº†äºˆå®šæ—¥**: 2025-12-27ï¼ˆæƒ³å®šï¼‰

### å®Ÿè£…ã‚¹ã‚³ãƒ¼ãƒ—

| ã‚«ãƒ†ã‚´ãƒª | é …ç›®æ•° | çŠ¶æ…‹ |
|---------|-------|------|
| ğŸ”´ High Priority | 1æ©Ÿèƒ½ | ä¿®æ­£ä¸­ |
| ğŸŸ¡ Medium Priority | 3æ©Ÿèƒ½ | æœªå®Ÿè£… |
| ğŸŸ¢ Low Priority | 2æ©Ÿèƒ½ | æœªå®Ÿè£… |
| **åˆè¨ˆ** | **6æ©Ÿèƒ½** | **Phase 1-6** |

### æˆåŠŸæŒ‡æ¨™ï¼ˆKPIï¼‰

1. **ãƒ¦ãƒ¼ã‚¶ãƒ¼æº€è¶³åº¦**: NPSï¼ˆNet Promoter Scoreï¼‰ã‚¹ã‚³ã‚¢ 80+
2. **å®Ÿè¡ŒæˆåŠŸç‡**: ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè¡ŒæˆåŠŸç‡ 95%ä»¥ä¸Š
3. **å¿œç­”æ™‚é–“**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ­ã‚°é…å»¶ < 100ms
4. **ãƒã‚°ç™ºç”Ÿç‡**: Critical/High bugãŒé€±1ä»¶ä»¥ä¸‹
5. **ã‚³ãƒ¼ãƒ‰å“è³ª**: ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ 80%ä»¥ä¸Š

---

## å®Ÿè£…å„ªå…ˆé †ä½ãƒãƒˆãƒªã‚¯ã‚¹

### å½±éŸ¿åº¦ vs å®Ÿè£…é›£æ˜“åº¦ãƒãƒˆãƒªã‚¯ã‚¹

```
å½±éŸ¿åº¦
 â†‘
Highâ”‚  Phase1     Phase2
    â”‚  [ğŸ”´]      [ğŸŸ¡]
    â”‚  Log       Business
    â”‚  Stream    Agents
    â”‚
Med â”‚  Phase5     Phase3
    â”‚  [ğŸŸ¡]      [ğŸŸ¡]
    â”‚  Error     Setup
    â”‚  Handle    Wizard
    â”‚
Low â”‚  Phase6     Phase4
    â”‚  [ğŸŸ¢]      [ğŸŸ¢]
    â”‚  Progress  DAG
    â”‚  Bar       Update
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’
      Easy    Medium   Hard
           å®Ÿè£…é›£æ˜“åº¦
```

### å„ªå…ˆé †ä½ãƒ©ãƒ³ã‚­ãƒ³ã‚°

| é †ä½ | Phase | æ©Ÿèƒ½ | å½±éŸ¿åº¦ | é›£æ˜“åº¦ | æœŸé–“ | å„ªå…ˆåº¦ |
|-----|-------|------|-------|-------|------|-------|
| 1 | Phase 1 | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ­ã‚°ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚° | ğŸ”´ High | Easy | 1é€±é–“ | ğŸ”´ Critical |
| 2 | Phase 2 | ãƒ“ã‚¸ãƒã‚¹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆUIçµ±åˆ | ğŸŸ¡ Med | Medium | 2é€±é–“ | ğŸŸ¡ High |
| 3 | Phase 3 | åˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¦ã‚£ã‚¶ãƒ¼ãƒ‰ | ğŸŸ¡ Med | Easy | 1é€±é–“ | ğŸŸ¡ High |
| 4 | Phase 5 | ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°æ”¹å–„ | ğŸŸ¡ Med | Easy | 1é€±é–“ | ğŸŸ¡ Medium |
| 5 | Phase 4 | WorkflowDAGãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–° | ğŸŸ¢ Low | Hard | 2é€±é–“ | ğŸŸ¢ Low |
| 6 | Phase 6 | ä¸¦åˆ—å®Ÿè¡Œãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ | ğŸŸ¢ Low | Easy | 1é€±é–“ | ğŸŸ¢ Low |

---

## Phase 1: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ­ã‚°ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ä¿®æ­£ï¼ˆWeek 1ï¼‰

### ğŸ¯ ç›®æ¨™

ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè¡Œä¸­ã®ãƒ­ã‚°ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§è¡¨ç¤ºã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«é€²æ—ã®é€æ˜æ€§ã¨å®‰å¿ƒæ„Ÿã‚’æä¾›ã™ã‚‹ã€‚

### ğŸ“Š ç¾åœ¨ã®çŠ¶æ³

**å®Ÿè£…çŠ¶æ³**: ğŸ”§ ä¿®æ­£ä¸­
- âœ… ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ä¿®æ­£å®Œäº†ï¼ˆ`agent.rs` L248-285ï¼‰
- âœ… ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ä¿®æ­£å®Œäº†ï¼ˆ`AgentExecutionPanel.tsx` L109-125ï¼‰
- âš ï¸ æ‰‹å‹•ãƒ†ã‚¹ãƒˆãŒå¿…è¦

**å•é¡Œç‚¹**:
- ãƒ­ã‚°ãŒå®Ÿè¡Œå®Œäº†å¾Œã«ä¸€æ‹¬è¡¨ç¤ºã•ã‚Œã‚‹
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ãŒå‹•ä½œã—ã¦ã„ãªã„
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯å®Ÿè¡Œä¸­ã«ä½•ãŒèµ·ãã¦ã„ã‚‹ã‹åˆ†ã‹ã‚‰ãªã„

### ğŸ“‹ å®Ÿè£…ã‚¿ã‚¹ã‚¯

#### ã‚¿ã‚¹ã‚¯ 1.1: æ‰‹å‹•ãƒ†ã‚¹ãƒˆå®Ÿè¡Œï¼ˆ1æ—¥ï¼‰

**æ‹…å½“**: QAã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ / é–‹ç™ºè€…

**æ‰‹é †**:
1. `MANUAL_UX_TEST_GUIDE.md` ã«å¾“ã£ã¦ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
2. 3-wayç›£è¦–ï¼ˆUIã€Chrome Consoleã€Terminalï¼‰
3. ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°ã®ç¢ºèª
   - `[DEBUG] Setting up output listener for execution: <id>`
   - `[DEBUG] Received agent output: <line>`
   - `[DEBUG] Output listener setup complete`

**æœŸå¾…çµæœ**:
- âœ… ãƒ­ã‚°ãŒ1è¡Œãšã¤ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¡¨ç¤ºã•ã‚Œã‚‹
- âœ… è‡ªå‹•ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãŒæ©Ÿèƒ½ã™ã‚‹
- âœ… ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°ãŒConsoleã«è¡¨ç¤ºã•ã‚Œã‚‹

**æˆåŠŸåŸºæº–**:
- ãƒ­ã‚°è¡¨ç¤ºé…å»¶ < 100ms
- 10è¡Œã®ãƒ­ã‚°ãŒã™ã¹ã¦è¡¨ç¤ºã•ã‚Œã‚‹
- ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ä½ç½®ãŒæœ€ä¸‹éƒ¨ã«ç¶­æŒã•ã‚Œã‚‹

---

#### ã‚¿ã‚¹ã‚¯ 1.2: ãƒã‚°ä¿®æ­£ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰ï¼ˆ2-3æ—¥ï¼‰

**æƒ³å®šã•ã‚Œã‚‹å•é¡Œã¨å¯¾å‡¦æ³•**:

**å•é¡ŒA: ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ãŒç™»éŒ²ã•ã‚Œã¦ã„ãªã„**

```typescript
// ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°ç¢ºèª
console.log('[DEBUG] Event listener registered:', executionId);

// ä¿®æ­£ä¾‹
useEffect(() => {
  if (!activeExecution?.executionId) {
    console.warn('[WARN] No active execution ID');
    return;
  }

  // ãƒªã‚¹ãƒŠãƒ¼ç™»éŒ²å‡¦ç†...
}, [activeExecution?.executionId]);
```

**å•é¡ŒB: Rustå´ã®ã‚¤ãƒ™ãƒ³ãƒˆç™ºè¡Œã‚¿ã‚¤ãƒŸãƒ³ã‚°**

```rust
// src-tauri/src/agent.rs
// ä¿®æ­£å‰ï¼ˆå•é¡Œï¼‰
let _ = handle.await; // awaitå¾Œã«ã‚¤ãƒ™ãƒ³ãƒˆç™ºè¡Œ
eprintln!("[DEBUG] stdout handler completed");

// ä¿®æ­£å¾Œï¼ˆæ¨å¥¨ï¼‰
tokio::spawn(async move {
    // ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ã‚¤ãƒ™ãƒ³ãƒˆç™ºè¡Œ
    for line in reader.lines() {
        app_handle.emit(&event_name, line).ok();
    }
});
```

**å•é¡ŒC: ã‚¤ãƒ™ãƒ³ãƒˆåã®ä¸ä¸€è‡´**

```typescript
// ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
const unlisten = await listen<string>(
  `agent-output-${executionId}`, // â† ã‚¤ãƒ™ãƒ³ãƒˆåã‚’ç¢ºèª
  (event) => callback(event.payload)
);

// ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆRustï¼‰
app_handle.emit(
  &format!("agent-output-{}", execution_id), // â† ä¸€è‡´ã‚’ç¢ºèª
  line
).ok();
```

---

#### ã‚¿ã‚¹ã‚¯ 1.3: E2Eãƒ†ã‚¹ãƒˆè¿½åŠ ï¼ˆ2æ—¥ï¼‰

**ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹**:

```typescript
// tests/e2e/real-time-log-streaming.spec.ts
import { test, expect } from '@playwright/test';

test('ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ­ã‚°ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ãŒå‹•ä½œã™ã‚‹', async ({ page }) => {
  await page.goto('http://localhost:1420');

  // 1. ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé¸æŠ
  await page.click('[data-testid="agent-card-coordinator"]');

  // 2. Issueé¸æŠ
  await page.selectOption('[data-testid="issue-dropdown"]', '270');

  // 3. Execute Agentã‚¯ãƒªãƒƒã‚¯
  await page.click('[data-testid="execute-agent-button"]');

  // 4. ãƒ­ã‚°ãŒ1è¡Œãšã¤è¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
  const logContainer = page.locator('[data-testid="log-output"]');

  // æœ€åˆã®1è¡ŒãŒè¡¨ç¤ºã•ã‚Œã‚‹ã¾ã§å¾…æ©Ÿ
  await expect(logContainer).toContainText('[INFO]', { timeout: 5000 });

  // è¤‡æ•°è¡ŒãŒé †æ¬¡è¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
  await page.waitForFunction(() => {
    const logs = document.querySelectorAll('[data-testid="log-line"]');
    return logs.length > 3; // 3è¡Œä»¥ä¸Šè¡¨ç¤ºã•ã‚ŒãŸã‚‰OK
  }, { timeout: 10000 });

  // 5. å®Ÿè¡Œå®Œäº†ã‚’ç¢ºèª
  await expect(page.locator('[data-testid="execution-status"]'))
    .toContainText('Success', { timeout: 60000 });
});
```

---

#### ã‚¿ã‚¹ã‚¯ 1.4: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ï¼ˆ1æ—¥ï¼‰

**æœ€é©åŒ–é …ç›®**:

1. **ãƒ­ã‚°ãƒãƒƒãƒ•ã‚¡ãƒªãƒ³ã‚°**: å¤§é‡ãƒ­ã‚°å¯¾ç­–
```typescript
const [logBuffer, setLogBuffer] = useState<string[]>([]);
const flushInterval = 100; // ms

useEffect(() => {
  const timer = setInterval(() => {
    if (logBuffer.length > 0) {
      setActiveExecution((prev) => {
        if (!prev) return prev;
        return {
          ...prev,
          output: [...prev.output, ...logBuffer],
        };
      });
      setLogBuffer([]);
    }
  }, flushInterval);

  return () => clearInterval(timer);
}, [logBuffer]);
```

2. **ä»®æƒ³ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«**: 1000è¡Œä»¥ä¸Šã®ãƒ­ã‚°å¯¾ç­–
```typescript
import { FixedSizeList as List } from 'react-window';

<List
  height={600}
  itemCount={activeExecution.output.length}
  itemSize={20}
  width="100%"
>
  {({ index, style }) => (
    <div style={style}>
      {activeExecution.output[index]}
    </div>
  )}
</List>
```

---

### ğŸ“¦ æˆæœç‰©

1. âœ… ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ­ã‚°ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°æ©Ÿèƒ½ã®å®Œå…¨å‹•ä½œ
2. âœ… E2Eãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆï¼ˆPlaywrightï¼‰
3. âœ… ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆãƒ¬ãƒãƒ¼ãƒˆ
4. ğŸ“ ãƒ†ã‚¹ãƒˆçµæœãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

### ğŸ¯ æˆåŠŸåŸºæº–

- [ ] ãƒ­ã‚°ãŒ100msä»¥å†…ã«UIåæ˜ ã•ã‚Œã‚‹
- [ ] 1000è¡Œã®ãƒ­ã‚°ã§ã‚‚ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åŠ£åŒ–ãªã—
- [ ] E2Eãƒ†ã‚¹ãƒˆãŒ100%ãƒ‘ã‚¹ã™ã‚‹
- [ ] æ‰‹å‹•UXãƒ†ã‚¹ãƒˆã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæº€è¶³ã™ã‚‹

---

## Phase 2: ãƒ“ã‚¸ãƒã‚¹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆUIçµ±åˆï¼ˆWeek 2-3ï¼‰

### ğŸ¯ ç›®æ¨™

14å€‹ã®ãƒ“ã‚¸ãƒã‚¹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’UIã«çµ±åˆã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒCodingã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨åŒæ§˜ã«é¸æŠãƒ»å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚

### ğŸ“Š ç¾åœ¨ã®çŠ¶æ³

**å®Ÿè£…çŠ¶æ³**: âš ï¸ æœªå®Ÿè£…
- âœ… ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰: 14å€‹ã®ãƒ“ã‚¸ãƒã‚¹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè£…æ¸ˆã¿ï¼ˆRustï¼‰
- âŒ ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰: UIã«è¡¨ç¤ºã•ã‚Œã¦ã„ãªã„
- âŒ ã‚«ãƒ†ã‚´ãƒªãƒ•ã‚£ãƒ«ã‚¿ãƒ¼: å®Ÿè£…ã•ã‚Œã¦ã„ãªã„

**å•é¡Œç‚¹**:
- ãƒ“ã‚¸ãƒã‚¹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒå­˜åœ¨ã™ã‚‹ã®ã«ã€ã‚¢ã‚¯ã‚»ã‚¹æ–¹æ³•ãŒãªã„
- ã•ãã‚‰ã•ã‚“ï¼ˆãƒšãƒ«ã‚½ãƒŠ2ï¼‰ã¨ã‘ã‚“ãŸã•ã‚“ï¼ˆãƒšãƒ«ã‚½ãƒŠ3ï¼‰ãŒä½¿ãˆãªã„

### ğŸ“‹ å®Ÿè£…ã‚¿ã‚¹ã‚¯

#### ã‚¿ã‚¹ã‚¯ 2.1: ã‚«ãƒ†ã‚´ãƒªãƒ•ã‚£ãƒ«ã‚¿ãƒ¼UIå®Ÿè£…ï¼ˆ3æ—¥ï¼‰

**è¨­è¨ˆ**: ã‚¿ãƒ–å½¢å¼ã®ã‚«ãƒ†ã‚´ãƒªåˆ‡ã‚Šæ›¿ãˆ

```tsx
// src/components/AgentExecutionPanel.tsx
import { Code, Briefcase, TrendingUp, Users } from "lucide-react";

type AgentCategory = "all" | "coding" | "business-strategy" | "business-marketing" | "business-sales";

export function AgentExecutionPanel() {
  const [selectedCategory, setSelectedCategory] = useState<AgentCategory>("all");

  const categories = [
    { id: "all", name: "All Agents", icon: <div className="text-xl">ğŸ¤–</div>, count: 21 },
    { id: "coding", name: "Coding", icon: <Code size={18} />, count: 7 },
    { id: "business-strategy", name: "Strategy", icon: <Briefcase size={18} />, count: 6 },
    { id: "business-marketing", name: "Marketing", icon: <TrendingUp size={18} />, count: 5 },
    { id: "business-sales", name: "Sales", icon: <Users size={18} />, count: 3 },
  ];

  const filteredAgents = selectedCategory === "all"
    ? AVAILABLE_AGENTS
    : getAgentsByCategory(selectedCategory);

  return (
    <div className="h-full flex">
      {/* Left Sidebar */}
      <div className="w-80 bg-gray-50 border-r border-gray-200 flex flex-col">
        {/* Header with Category Tabs */}
        <div className="p-6 border-b border-gray-200">
          <h2 className="text-2xl font-light text-gray-900 mb-4">ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ</h2>

          {/* Category Tabs */}
          <div className="space-y-2">
            {categories.map((category) => (
              <button
                key={category.id}
                onClick={() => setSelectedCategory(category.id as AgentCategory)}
                className={`w-full flex items-center justify-between p-3 rounded-xl transition-all duration-200 ${
                  selectedCategory === category.id
                    ? "bg-gray-900 text-white"
                    : "bg-white text-gray-700 hover:bg-gray-100 border border-gray-200"
                }`}
              >
                <div className="flex items-center space-x-3">
                  {category.icon}
                  <span className="text-sm font-light">{category.name}</span>
                </div>
                <span className="text-xs font-light opacity-60">
                  {category.count}
                </span>
              </button>
            ))}
          </div>
        </div>

        {/* Agent Cards */}
        <div className="flex-1 overflow-y-auto p-4 space-y-2">
          {filteredAgents.map((agent) => (
            <AgentCard key={agent.type} agent={agent} />
          ))}
        </div>
      </div>

      {/* Right Panel - æ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰ */}
    </div>
  );
}
```

---

#### ã‚¿ã‚¹ã‚¯ 2.2: ãƒ“ã‚¸ãƒã‚¹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚«ãƒ¼ãƒ‰è¡¨ç¤ºï¼ˆ2æ—¥ï¼‰

**agent-api.ts ã®æ‹¡å¼µ**:

```typescript
// src/lib/agent-api.ts

// æ—¢å­˜ã®AVAILABLE_AGENTSã«è¿½åŠ 
export const AVAILABLE_AGENTS: AgentMetadata[] = [
  // ... Coding Agentsï¼ˆæ—¢å­˜7å€‹ï¼‰

  // Business Agents - Strategy & Planning (6å€‹)
  {
    type: "product_design_agent",
    displayName: "ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆè©³ç´°è¨­è¨ˆAgent",
    characterName: "è¨­è¨ˆå£«",
    category: "business-strategy",
    description: "6ãƒ¶æœˆåˆ†ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ»æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ãƒ»MVPå®šç¾©",
    color: "#06b6d4", // Cyan
  },
  {
    type: "funnel_design_agent",
    displayName: "å°ç·šè¨­è¨ˆAgent",
    characterName: "å°ç·šãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼",
    category: "business-strategy",
    description: "èªçŸ¥â†’è³¼å…¥â†’LTVã¾ã§ã®é¡§å®¢å°ç·šæœ€é©åŒ–",
    color: "#8b5cf6", // Violet
  },
  {
    type: "persona_agent",
    displayName: "ãƒšãƒ«ã‚½ãƒŠè¨­å®šAgent",
    characterName: "ãƒšãƒ«ã‚½ãƒŠ",
    category: "business-strategy",
    description: "ã‚¿ãƒ¼ã‚²ãƒƒãƒˆé¡§å®¢ã®è©³ç´°ãƒšãƒ«ã‚½ãƒŠï¼ˆ3-5äººï¼‰è¨­è¨ˆ",
    color: "#ec4899", // Pink
  },

  // Business Agents - Marketing & Content (5å€‹)
  {
    type: "sns_strategy_agent",
    displayName: "SNSæˆ¦ç•¥Agent",
    characterName: "SNSæˆ¦ç•¥",
    category: "business-marketing",
    description: "Twitter/Instagram/YouTubeç­‰ã®SNSæˆ¦ç•¥ç«‹æ¡ˆ",
    color: "#3b82f6", // Blue
  },
  {
    type: "youtube_agent",
    displayName: "YouTubeé‹ç”¨Agent",
    characterName: "YouTube",
    category: "business-marketing",
    description: "ãƒãƒ£ãƒ³ãƒãƒ«ã‚³ãƒ³ã‚»ãƒ—ãƒˆè¨­è¨ˆã‹ã‚‰æŠ•ç¨¿è¨ˆç”»ã¾ã§13ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼",
    color: "#ef4444", // Red
  },

  // ... æ®‹ã‚Šã®ãƒ“ã‚¸ãƒã‚¹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚‚è¿½åŠ 
];
```

---

#### ã‚¿ã‚¹ã‚¯ 2.3: ãƒ“ã‚¸ãƒã‚¹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆç”¨ã®ã‚¢ã‚¤ã‚³ãƒ³è¿½åŠ ï¼ˆ1æ—¥ï¼‰

**ã‚«ãƒ†ã‚´ãƒªåˆ¥ã‚¢ã‚¤ã‚³ãƒ³ãƒãƒƒãƒ”ãƒ³ã‚°**:

```tsx
// src/components/AgentCard.tsx
import {
  Briefcase,    // Strategy
  TrendingUp,   // Marketing
  Users,        // Sales
  Target,       // Persona
  Layout,       // Design
  BarChart,     // Analytics
} from "lucide-react";

const getCategoryIcon = (category: string) => {
  switch (category) {
    case "business-strategy":
      return <Briefcase size={16} className="text-purple-500" />;
    case "business-marketing":
      return <TrendingUp size={16} className="text-orange-500" />;
    case "business-sales":
      return <Users size={16} className="text-green-500" />;
    default:
      return null;
  }
};

function AgentCard({ agent }: { agent: AgentMetadata }) {
  return (
    <button className="...">
      <div className="flex items-center space-x-3 mb-2">
        <div className="w-3 h-3 rounded-full" style={{ backgroundColor: agent.color }} />
        {getCategoryIcon(agent.category)}
        <span className="font-light">{agent.characterName}</span>
      </div>
      {/* ... æ®‹ã‚Šã®ã‚³ãƒ¼ãƒ‰ */}
    </button>
  );
}
```

---

#### ã‚¿ã‚¹ã‚¯ 2.4: ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæ¤œç´¢æ©Ÿèƒ½å®Ÿè£…ï¼ˆ2æ—¥ï¼‰

**ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ã‚¿ãƒ«æ¤œç´¢**:

```tsx
// src/components/AgentExecutionPanel.tsx
import { Search } from "lucide-react";

export function AgentExecutionPanel() {
  const [searchQuery, setSearchQuery] = useState("");

  const filteredAgents = AVAILABLE_AGENTS
    .filter((agent) => {
      // ã‚«ãƒ†ã‚´ãƒªãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
      if (selectedCategory !== "all" && agent.category !== selectedCategory) {
        return false;
      }

      // æ¤œç´¢ã‚¯ã‚¨ãƒªãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
      if (searchQuery) {
        const query = searchQuery.toLowerCase();
        return (
          agent.displayName.toLowerCase().includes(query) ||
          agent.characterName.toLowerCase().includes(query) ||
          agent.description.toLowerCase().includes(query) ||
          agent.type.toLowerCase().includes(query)
        );
      }

      return true;
    });

  return (
    <div className="...">
      {/* Search Bar */}
      <div className="p-4 border-b border-gray-200">
        <div className="relative">
          <Search size={16} className="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400" />
          <input
            type="text"
            value={searchQuery}
            onChange={(e) => setSearchQuery(e.target.value)}
            placeholder="Search agents..."
            className="w-full pl-10 pr-4 py-2 bg-white border border-gray-200 rounded-xl focus:outline-none focus:border-gray-900 text-sm font-light"
          />
        </div>
      </div>

      {/* Agent Cards */}
      <div className="flex-1 overflow-y-auto p-4 space-y-2">
        {filteredAgents.length > 0 ? (
          filteredAgents.map((agent) => <AgentCard key={agent.type} agent={agent} />)
        ) : (
          <div className="text-center py-8 text-gray-400">
            <p className="text-sm font-light">No agents found</p>
          </div>
        )}
      </div>
    </div>
  );
}
```

---

#### ã‚¿ã‚¹ã‚¯ 2.5: ãƒ“ã‚¸ãƒã‚¹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè¡Œãƒ•ãƒ­ãƒ¼ç¢ºèªï¼ˆ3æ—¥ï¼‰

**Issueç•ªå·ãªã—å®Ÿè¡Œã®å¯¾å¿œ**:

```typescript
// ãƒ“ã‚¸ãƒã‚¹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯Issueç•ªå·ãŒä¸è¦ãªå ´åˆãŒå¤šã„
const handleExecuteAgent = async () => {
  if (!selectedAgent) return;

  const agentMetadata = AVAILABLE_AGENTS.find((a) => a.type === selectedAgent);
  const requiresIssue = agentMetadata?.category === "coding";

  // Coding Agentsã®å ´åˆã¯Issueç•ªå·ã‚’æ¨å¥¨
  if (requiresIssue && !issueNumber) {
    const confirmNoIssue = window.confirm(
      "Coding Agentsã¯é€šå¸¸Issueç•ªå·ãŒå¿…è¦ã§ã™ã€‚Issueç•ªå·ãªã—ã§å®Ÿè¡Œã—ã¾ã™ã‹ï¼Ÿ"
    );
    if (!confirmNoIssue) return;
  }

  try {
    const result = await executeAgent({
      agent_type: selectedAgent,
      issue_number: issueNumber ? parseInt(issueNumber) : undefined,
      args: [],
    });

    // ... æ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰
  } catch (error) {
    console.error("Failed to execute agent:", error);
  }
};
```

---

### ğŸ“¦ æˆæœç‰©

1. âœ… ã‚«ãƒ†ã‚´ãƒªãƒ•ã‚£ãƒ«ã‚¿ãƒ¼UIï¼ˆ4ã‚«ãƒ†ã‚´ãƒªï¼‰
2. âœ… 14å€‹ã®ãƒ“ã‚¸ãƒã‚¹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚«ãƒ¼ãƒ‰è¡¨ç¤º
3. âœ… ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæ¤œç´¢æ©Ÿèƒ½
4. âœ… ãƒ“ã‚¸ãƒã‚¹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè¡Œãƒ•ãƒ­ãƒ¼
5. ğŸ“ ãƒ“ã‚¸ãƒã‚¹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆä½¿ç”¨ã‚¬ã‚¤ãƒ‰

### ğŸ¯ æˆåŠŸåŸºæº–

- [ ] 21å€‹ã™ã¹ã¦ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒUIã«è¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ã‚«ãƒ†ã‚´ãƒªãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹
- [ ] æ¤œç´¢æ©Ÿèƒ½ã§ç›®çš„ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒã™ãã«è¦‹ã¤ã‹ã‚‹
- [ ] ãƒ“ã‚¸ãƒã‚¹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®å®Ÿè¡ŒãŒæˆåŠŸã™ã‚‹ï¼ˆå°‘ãªãã¨ã‚‚3ç¨®é¡ï¼‰

---

## Phase 3: åˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¦ã‚£ã‚¶ãƒ¼ãƒ‰ï¼ˆWeek 4ï¼‰

### ğŸ¯ ç›®æ¨™

æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒåˆã‚ã¦ã‚¢ãƒ—ãƒªã‚’èµ·å‹•ã—ãŸéš›ã«ã€ã‚¹ãƒ ãƒ¼ã‚ºã«ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚’å®Œäº†ã§ãã‚‹ã‚¦ã‚£ã‚¶ãƒ¼ãƒ‰UIã‚’æä¾›ã™ã‚‹ã€‚

### ğŸ“Š ç¾åœ¨ã®çŠ¶æ³

**å®Ÿè£…çŠ¶æ³**: âš ï¸ æœªå®Ÿè£…
- âœ… Settingsãƒ‘ãƒãƒ«ã§è¨­å®šå¯èƒ½
- âŒ åˆå›èµ·å‹•æ™‚ã®ã‚¦ã‚£ã‚¶ãƒ¼ãƒ‰ãªã—
- âŒ GitHub Tokenå–å¾—ã‚¬ã‚¤ãƒ‰ãªã—

**å•é¡Œç‚¹**:
- åˆå›ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã©ã“ã‹ã‚‰è¨­å®šã™ã‚Œã°ã„ã„ã‹åˆ†ã‹ã‚‰ãªã„
- GitHub Tokenã®å–å¾—æ–¹æ³•ãŒä¸æ˜ç¢º
- ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—å¤±æ•—æ™‚ã®ã‚¨ãƒ©ãƒ¼ãŒåˆ†ã‹ã‚Šã«ãã„

### ğŸ“‹ å®Ÿè£…ã‚¿ã‚¹ã‚¯

#### ã‚¿ã‚¹ã‚¯ 3.1: Welcomeç”»é¢ã®å®Ÿè£…ï¼ˆ2æ—¥ï¼‰

**4ã‚¹ãƒ†ãƒƒãƒ—ã‚¦ã‚£ã‚¶ãƒ¼ãƒ‰è¨­è¨ˆ**:

```tsx
// src/components/SetupWizard.tsx
import { useState } from "react";
import { CheckCircle, ArrowRight } from "lucide-react";

type SetupStep = "welcome" | "github-token" | "repository" | "complete";

export function SetupWizard({ onComplete }: { onComplete: () => void }) {
  const [currentStep, setCurrentStep] = useState<SetupStep>("welcome");
  const [githubToken, setGithubToken] = useState("");
  const [repoName, setRepoName] = useState("");

  return (
    <div className="fixed inset-0 bg-white z-50 flex items-center justify-center">
      <div className="max-w-2xl w-full p-8">
        {/* Progress Indicator */}
        <div className="flex items-center justify-center mb-8">
          <StepIndicator step={1} active={currentStep === "welcome"} completed={["github-token", "repository", "complete"].includes(currentStep)} />
          <div className="w-16 h-0.5 bg-gray-200" />
          <StepIndicator step={2} active={currentStep === "github-token"} completed={["repository", "complete"].includes(currentStep)} />
          <div className="w-16 h-0.5 bg-gray-200" />
          <StepIndicator step={3} active={currentStep === "repository"} completed={currentStep === "complete"} />
          <div className="w-16 h-0.5 bg-gray-200" />
          <StepIndicator step={4} active={currentStep === "complete"} completed={false} />
        </div>

        {/* Step Content */}
        {currentStep === "welcome" && (
          <WelcomeStep onNext={() => setCurrentStep("github-token")} />
        )}
        {currentStep === "github-token" && (
          <GitHubTokenStep
            value={githubToken}
            onChange={setGithubToken}
            onNext={() => setCurrentStep("repository")}
            onBack={() => setCurrentStep("welcome")}
          />
        )}
        {currentStep === "repository" && (
          <RepositoryStep
            value={repoName}
            onChange={setRepoName}
            onNext={() => setCurrentStep("complete")}
            onBack={() => setCurrentStep("github-token")}
          />
        )}
        {currentStep === "complete" && (
          <CompleteStep onFinish={onComplete} />
        )}
      </div>
    </div>
  );
}

function WelcomeStep({ onNext }: { onNext: () => void }) {
  return (
    <div className="text-center space-y-6">
      <div className="text-6xl font-extralight text-gray-900 mb-4">M</div>
      <h1 className="text-3xl font-light text-gray-900">
        Welcome to Miyabi Desktop
      </h1>
      <p className="text-gray-600 font-light max-w-md mx-auto">
        AIé§†å‹•å‹ã®å®Œå…¨è‡ªå¾‹é–‹ç™ºãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã€‚21ç¨®é¡ã®AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã§é–‹ç™ºã‚’åŠ é€Ÿã—ã¾ã™ã€‚
      </p>
      <button
        onClick={onNext}
        className="px-8 py-3 bg-gray-900 text-white rounded-xl hover:bg-gray-800 transition-all duration-200 flex items-center space-x-2 mx-auto"
      >
        <span>Get Started</span>
        <ArrowRight size={18} />
      </button>
    </div>
  );
}
```

---

#### ã‚¿ã‚¹ã‚¯ 3.2: GitHub Tokenè¨­å®šã‚¹ãƒ†ãƒƒãƒ—ï¼ˆ2æ—¥ï¼‰

**è©³ç´°ã‚¬ã‚¤ãƒ‰ä»˜ãUI**:

```tsx
function GitHubTokenStep({ value, onChange, onNext, onBack }: StepProps) {
  const [isValid, setIsValid] = useState(false);
  const [validating, setValidating] = useState(false);

  const validateToken = async () => {
    setValidating(true);
    try {
      const response = await fetch('https://api.github.com/user', {
        headers: { Authorization: `token ${value}` },
      });
      setIsValid(response.ok);
    } catch {
      setIsValid(false);
    } finally {
      setValidating(false);
    }
  };

  return (
    <div className="space-y-6">
      <div className="text-center">
        <h2 className="text-2xl font-light text-gray-900 mb-2">
          GitHub Personal Access Token
        </h2>
        <p className="text-sm text-gray-600 font-light">
          MiyabiãŒGitHub APIã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚ã«å¿…è¦ã§ã™
        </p>
      </div>

      {/* Token Input */}
      <div className="space-y-4">
        <input
          type="password"
          value={value}
          onChange={(e) => onChange(e.target.value)}
          placeholder="ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
          className="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:border-gray-900 text-sm font-mono"
        />

        {isValid && (
          <div className="flex items-center space-x-2 text-green-600 text-sm">
            <CheckCircle size={16} />
            <span>Token verified successfully!</span>
          </div>
        )}

        <button
          onClick={validateToken}
          disabled={!value || validating}
          className="w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-light"
        >
          {validating ? "Validating..." : "Validate Token"}
        </button>
      </div>

      {/* How to Get Token Guide */}
      <div className="bg-blue-50 border border-blue-200 rounded-xl p-4 space-y-3">
        <h3 className="text-sm font-medium text-blue-900">
          ğŸ“– GitHub Tokenã®å–å¾—æ–¹æ³•
        </h3>
        <ol className="text-xs text-blue-800 space-y-1 list-decimal list-inside">
          <li>GitHubè¨­å®šãƒšãƒ¼ã‚¸ã‚’é–‹ã</li>
          <li>Developer settings â†’ Personal access tokens â†’ Tokens (classic)</li>
          <li>ã€ŒGenerate new token (classic)ã€ã‚’ã‚¯ãƒªãƒƒã‚¯</li>
          <li>ä»¥ä¸‹ã®æ¨©é™ã‚’é¸æŠ:
            <ul className="ml-6 mt-1 space-y-0.5">
              <li>â€¢ repo (Full control of private repositories)</li>
              <li>â€¢ workflow (Update GitHub Action workflows)</li>
            </ul>
          </li>
          <li>ã€ŒGenerate tokenã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ã‚³ãƒ”ãƒ¼</li>
        </ol>
        <a
          href="https://github.com/settings/tokens"
          target="_blank"
          rel="noopener noreferrer"
          className="inline-flex items-center space-x-2 text-blue-600 hover:text-blue-700 text-sm"
        >
          <span>Open GitHub Settings</span>
          <ArrowRight size={14} />
        </a>
      </div>

      {/* Navigation */}
      <div className="flex items-center justify-between pt-4">
        <button
          onClick={onBack}
          className="px-6 py-2 text-gray-600 hover:text-gray-900 transition-colors"
        >
          Back
        </button>
        <button
          onClick={onNext}
          disabled={!isValid}
          className="px-6 py-2 bg-gray-900 text-white rounded-xl hover:bg-gray-800 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed"
        >
          Next
        </button>
      </div>
    </div>
  );
}
```

---

#### ã‚¿ã‚¹ã‚¯ 3.3: ãƒªãƒã‚¸ãƒˆãƒªè¨­å®šã‚¹ãƒ†ãƒƒãƒ—ï¼ˆ1æ—¥ï¼‰

```tsx
function RepositoryStep({ value, onChange, onNext, onBack }: StepProps) {
  const [repos, setRepos] = useState<string[]>([]);
  const [loading, setLoading] = useState(false);

  // GitHub APIã‹ã‚‰è‡ªåˆ†ã®ãƒªãƒã‚¸ãƒˆãƒªä¸€è¦§ã‚’å–å¾—
  const fetchRepositories = async () => {
    setLoading(true);
    try {
      // localStorage ã‹ã‚‰ token ã‚’å–å¾—
      const token = localStorage.getItem("github-token");
      const response = await fetch('https://api.github.com/user/repos', {
        headers: { Authorization: `token ${token}` },
      });
      const data = await response.json();
      setRepos(data.map((repo: any) => repo.full_name));
    } catch (error) {
      console.error("Failed to fetch repositories:", error);
    } finally {
      setLoading(false);
    }
  };

  useEffect(() => {
    fetchRepositories();
  }, []);

  return (
    <div className="space-y-6">
      <div className="text-center">
        <h2 className="text-2xl font-light text-gray-900 mb-2">
          Repository Selection
        </h2>
        <p className="text-sm text-gray-600 font-light">
          MiyabiãŒç®¡ç†ã™ã‚‹GitHubãƒªãƒã‚¸ãƒˆãƒªã‚’é¸æŠã—ã¦ãã ã•ã„
        </p>
      </div>

      {/* Repository Dropdown */}
      <div className="space-y-4">
        <select
          value={value}
          onChange={(e) => onChange(e.target.value)}
          className="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:border-gray-900 text-sm font-light"
        >
          <option value="">Select a repository...</option>
          {repos.map((repo) => (
            <option key={repo} value={repo}>
              {repo}
            </option>
          ))}
        </select>

        {/* Manual Input Option */}
        <div className="text-center text-xs text-gray-500">
          or
        </div>
        <input
          type="text"
          value={value}
          onChange={(e) => onChange(e.target.value)}
          placeholder="owner/repository"
          className="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:border-gray-900 text-sm font-light"
        />
      </div>

      {/* Navigation */}
      <div className="flex items-center justify-between pt-4">
        <button onClick={onBack} className="px-6 py-2 text-gray-600 hover:text-gray-900 transition-colors">
          Back
        </button>
        <button
          onClick={onNext}
          disabled={!value}
          className="px-6 py-2 bg-gray-900 text-white rounded-xl hover:bg-gray-800 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed"
        >
          Next
        </button>
      </div>
    </div>
  );
}
```

---

#### ã‚¿ã‚¹ã‚¯ 3.4: å®Œäº†ç”»é¢ã¨ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ä¿å­˜ï¼ˆ1æ—¥ï¼‰

```tsx
function CompleteStep({ onFinish }: { onFinish: () => void }) {
  const handleFinish = () => {
    // è¨­å®šã‚’localStorageã«ä¿å­˜
    const settings = {
      setupCompleted: true,
      completedAt: new Date().toISOString(),
    };
    localStorage.setItem("miyabi-settings", JSON.stringify(settings));

    onFinish();
  };

  return (
    <div className="text-center space-y-6">
      <div className="w-20 h-20 mx-auto bg-green-100 rounded-full flex items-center justify-center">
        <CheckCircle size={48} className="text-green-600" />
      </div>

      <h2 className="text-2xl font-light text-gray-900">
        Setup Complete!
      </h2>

      <p className="text-gray-600 font-light max-w-md mx-auto">
        Miyabi Desktopã®åˆæœŸè¨­å®šãŒå®Œäº†ã—ã¾ã—ãŸã€‚ä»Šã™ãã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’å®Ÿè¡Œã—ã¦é–‹ç™ºã‚’åŠ é€Ÿã—ã¾ã—ã‚‡ã†ã€‚
      </p>

      <div className="bg-gray-50 rounded-xl p-6 space-y-3 max-w-md mx-auto">
        <h3 className="text-sm font-medium text-gray-900">ğŸ’¡ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—</h3>
        <ul className="text-sm text-gray-600 space-y-2 text-left">
          <li>1. ã‚µã‚¤ãƒ‰ãƒãƒ¼ã‹ã‚‰ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’é¸æŠ</li>
          <li>2. Issueç•ªå·ã‚’é¸æŠï¼ˆä»»æ„ï¼‰</li>
          <li>3. ã€ŒExecute Agentã€ã‚’ã‚¯ãƒªãƒƒã‚¯</li>
          <li>4. ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ­ã‚°ã‚’ç¢ºèª</li>
        </ul>
      </div>

      <button
        onClick={handleFinish}
        className="px-8 py-3 bg-gray-900 text-white rounded-xl hover:bg-gray-800 transition-all duration-200 mx-auto flex items-center space-x-2"
      >
        <span>Start Using Miyabi</span>
        <ArrowRight size={18} />
      </button>
    </div>
  );
}
```

---

### ğŸ“¦ æˆæœç‰©

1. âœ… 4ã‚¹ãƒ†ãƒƒãƒ—ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¦ã‚£ã‚¶ãƒ¼ãƒ‰
2. âœ… GitHub Tokenå–å¾—ã‚¬ã‚¤ãƒ‰
3. âœ… ãƒªãƒã‚¸ãƒˆãƒªè‡ªå‹•å–å¾—æ©Ÿèƒ½
4. âœ… è¨­å®šä¿å­˜æ©Ÿèƒ½ï¼ˆlocalStorageï¼‰
5. ğŸ“ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

### ğŸ¯ æˆåŠŸåŸºæº–

- [ ] åˆå›ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒ5åˆ†ä»¥å†…ã«ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—å®Œäº†ã§ãã‚‹
- [ ] GitHub Tokenã®æ¤œè¨¼ãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹
- [ ] ãƒªãƒã‚¸ãƒˆãƒªä¸€è¦§ãŒæ­£ã—ãå–å¾—ã•ã‚Œã‚‹
- [ ] ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—å®Œäº†å¾Œã€è¨­å®šãŒä¿å­˜ã•ã‚Œã‚‹

---

## Phase 4: WorkflowDAGãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ï¼ˆWeek 5-6ï¼‰

### ğŸ¯ ç›®æ¨™

é™çš„ãªã‚µãƒ³ãƒ—ãƒ«DAGã§ã¯ãªãã€å®Ÿéš›ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè¡ŒçŠ¶æ³ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§WorkflowDAGã«åæ˜ ã™ã‚‹ã€‚

### ğŸ“Š ç¾åœ¨ã®çŠ¶æ³

**å®Ÿè£…çŠ¶æ³**: âš ï¸ æœªå®Ÿè£…
- âœ… React Flowã«ã‚ˆã‚‹åŸºæœ¬è¡¨ç¤º
- âœ… ã‚µãƒ³ãƒ—ãƒ«ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãƒ‡ãƒ¼ã‚¿
- âŒ ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°æ©Ÿèƒ½ãªã—
- âŒ å®Ÿè¡Œä¸­ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãªã—

**å•é¡Œç‚¹**:
- DAGãŒé™çš„ã§ã€å®Ÿè¡ŒçŠ¶æ³ãŒåæ˜ ã•ã‚Œãªã„
- ä¸¦åˆ—å®Ÿè¡Œæ™‚ã®é€²æ—ãŒæŠŠæ¡ã§ããªã„

### ğŸ“‹ å®Ÿè£…ã‚¿ã‚¹ã‚¯

#### ã‚¿ã‚¹ã‚¯ 4.1: ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè¡ŒçŠ¶æ…‹ç®¡ç†ã®æ‹¡å¼µï¼ˆ3æ—¥ï¼‰

**Global Stateç®¡ç†ï¼ˆZustandä½¿ç”¨ï¼‰**:

```typescript
// src/stores/agentExecutionStore.ts
import { create } from 'zustand';

interface AgentExecutionNode {
  id: string;
  agentType: AgentType;
  status: "idle" | "running" | "completed" | "failed";
  startTime?: number;
  duration?: number;
  dependencies: string[]; // ä¾å­˜ã™ã‚‹ä»–ã®ãƒãƒ¼ãƒ‰ID
}

interface AgentExecutionStore {
  nodes: Map<string, AgentExecutionNode>;
  edges: Array<{ source: string; target: string }>;

  // Actions
  addNode: (node: AgentExecutionNode) => void;
  updateNodeStatus: (id: string, status: AgentExecutionNode["status"]) => void;
  addEdge: (source: string, target: string) => void;
  clear: () => void;
}

export const useAgentExecutionStore = create<AgentExecutionStore>((set) => ({
  nodes: new Map(),
  edges: [],

  addNode: (node) => set((state) => {
    const newNodes = new Map(state.nodes);
    newNodes.set(node.id, node);
    return { nodes: newNodes };
  }),

  updateNodeStatus: (id, status) => set((state) => {
    const newNodes = new Map(state.nodes);
    const node = newNodes.get(id);
    if (node) {
      newNodes.set(id, { ...node, status });
    }
    return { nodes: newNodes };
  }),

  addEdge: (source, target) => set((state) => ({
    edges: [...state.edges, { source, target }],
  })),

  clear: () => set({ nodes: new Map(), edges: [] }),
}));
```

---

#### ã‚¿ã‚¹ã‚¯ 4.2: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ DAGæ›´æ–°æ©Ÿèƒ½ï¼ˆ4æ—¥ï¼‰

**WorkflowDAGViewerã®æ‹¡å¼µ**:

```tsx
// src/components/WorkflowDAGViewer.tsx
import { useAgentExecutionStore } from "../stores/agentExecutionStore";
import { useEffect } from "react";
import { listenToAgentStatus } from "../lib/agent-api";

export function WorkflowDAGViewer() {
  const executionStore = useAgentExecutionStore();

  // React Flowã®ãƒãƒ¼ãƒ‰ã«å¤‰æ›
  const nodes: Node<AgentNodeData>[] = Array.from(executionStore.nodes.values()).map((node) => {
    const agent = AVAILABLE_AGENTS.find((a) => a.type === node.agentType)!;
    return {
      id: node.id,
      type: "agentNode",
      position: calculatePosition(node), // è‡ªå‹•ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆè¨ˆç®—
      data: {
        agent,
        status: node.status,
        duration: node.duration,
      },
    };
  });

  const edges: Edge[] = executionStore.edges.map((edge, index) => ({
    id: `e-${index}`,
    source: edge.source,
    target: edge.target,
    animated: isAnimated(edge.source, executionStore.nodes),
    markerEnd: { type: MarkerType.ArrowClosed },
  }));

  // ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè¡Œã‚¤ãƒ™ãƒ³ãƒˆã‚’ãƒªãƒƒã‚¹ãƒ³
  useEffect(() => {
    let unlisten: (() => void) | null = null;

    const setupListener = async () => {
      unlisten = await listenToAgentStatus((result) => {
        // ãƒãƒ¼ãƒ‰è¿½åŠ ã¾ãŸã¯æ›´æ–°
        executionStore.addNode({
          id: result.execution_id,
          agentType: result.agent_type,
          status: result.status,
          duration: result.duration_ms,
          dependencies: [], // TODO: ä¾å­˜é–¢ä¿‚ã®æŠ½å‡º
        });
      });
    };

    setupListener();

    return () => {
      if (unlisten) unlisten();
    };
  }, []);

  return (
    <div className="h-full w-full flex flex-col">
      {/* ... Header */}

      <div className="flex-1 bg-gray-50">
        <ReactFlow
          nodes={nodes}
          edges={edges}
          nodeTypes={nodeTypes}
          fitView
        >
          <Controls />
          <MiniMap />
          <Background />
        </ReactFlow>
      </div>
    </div>
  );
}

// ãƒãƒ¼ãƒ‰ã®ä½ç½®ã‚’è‡ªå‹•è¨ˆç®—ï¼ˆéšå±¤çš„ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼‰
function calculatePosition(node: AgentExecutionNode): { x: number; y: number } {
  // Dagre.jsãªã©ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨
  // ã¾ãŸã¯ç°¡æ˜“çš„ãªå®Ÿè£…
  const level = node.dependencies.length;
  const x = 400;
  const y = level * 150 + 50;
  return { x, y };
}

// ã‚¨ãƒƒã‚¸ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åˆ¤å®š
function isAnimated(sourceId: string, nodes: Map<string, AgentExecutionNode>): boolean {
  const sourceNode = nodes.get(sourceId);
  return sourceNode?.status === "running" || false;
}
```

---

#### ã‚¿ã‚¹ã‚¯ 4.3: ä¾å­˜é–¢ä¿‚ã®è‡ªå‹•æ¤œå‡ºï¼ˆ3æ—¥ï¼‰

**CoordinatorAgentã‹ã‚‰ã®ä¾å­˜æƒ…å ±å–å¾—**:

```rust
// src-tauri/src/agent.rs
#[derive(Clone, serde::Serialize, serde::Deserialize)]
pub struct AgentDependencyInfo {
    pub execution_id: String,
    pub dependencies: Vec<String>, // ä¾å­˜ã™ã‚‹ä»–ã® execution_id
}

// CoordinatorAgentå®Ÿè¡Œæ™‚ã«ä¾å­˜é–¢ä¿‚ã‚’ç™ºè¡Œ
app_handle.emit("agent-dependency-graph", AgentDependencyInfo {
    execution_id: execution_id.clone(),
    dependencies: vec![
        "codegen-1".to_string(),
        "codegen-2".to_string(),
    ],
}).ok();
```

**ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§ä¾å­˜é–¢ä¿‚ã‚’å—ä¿¡**:

```typescript
// src/components/WorkflowDAGViewer.tsx
useEffect(() => {
  const setupDependencyListener = async () => {
    await listen<AgentDependencyInfo>("agent-dependency-graph", (event) => {
      const { execution_id, dependencies } = event.payload;

      // ã‚¨ãƒƒã‚¸ã‚’è¿½åŠ 
      dependencies.forEach((depId) => {
        executionStore.addEdge(depId, execution_id);
      });
    });
  };

  setupDependencyListener();
}, []);
```

---

### ğŸ“¦ æˆæœç‰©

1. âœ… ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ DAGæ›´æ–°æ©Ÿèƒ½
2. âœ… ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè¡ŒçŠ¶æ…‹ã®å¯è¦–åŒ–
3. âœ… ä¾å­˜é–¢ä¿‚ã®è‡ªå‹•æ¤œå‡º
4. âœ… ä¸¦åˆ—å®Ÿè¡Œã®å¯è¦–åŒ–
5. ğŸ“ DAGå¯è¦–åŒ–ã‚¬ã‚¤ãƒ‰

### ğŸ¯ æˆåŠŸåŸºæº–

- [ ] ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè¡ŒãŒãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§DAGã«åæ˜ ã•ã‚Œã‚‹
- [ ] ä¸¦åˆ—å®Ÿè¡Œæ™‚ã®ä¾å­˜é–¢ä¿‚ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãŒæ»‘ã‚‰ã‹ã«å‹•ä½œã™ã‚‹
- [ ] 10å€‹ä»¥ä¸Šã®ãƒãƒ¼ãƒ‰ã§ã‚‚ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒä¿ãŸã‚Œã‚‹

---

## Phase 5: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°æ”¹å–„ï¼ˆWeek 7ï¼‰

### ğŸ¯ ç›®æ¨™

ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ™‚ã«ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚¬ã‚¤ãƒ‰ã‚’è¡¨ç¤ºã™ã‚‹ã€‚

### ğŸ“‹ å®Ÿè£…ã‚¿ã‚¹ã‚¯

#### ã‚¿ã‚¹ã‚¯ 5.1: ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®æ”¹å–„ï¼ˆ2æ—¥ï¼‰

```typescript
// src/lib/error-messages.ts
export const ERROR_MESSAGES: Record<string, { title: string; message: string; actions: string[] }> = {
  "github_token_invalid": {
    title: "GitHub Token ãŒç„¡åŠ¹ã§ã™",
    message: "å…¥åŠ›ã•ã‚ŒãŸGitHub Personal Access TokenãŒç„¡åŠ¹ã€ã¾ãŸã¯æœŸé™åˆ‡ã‚Œã®å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚",
    actions: [
      "Settings â†’ GitHub Tokenã‚’ç¢ºèªã—ã¦ãã ã•ã„",
      "æ–°ã—ã„Tokenã‚’ç”Ÿæˆã—ã¦ãã ã•ã„: https://github.com/settings/tokens",
      "Tokenæ¨©é™ã«ã€Œrepoã€ã¨ã€Œworkflowã€ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªã—ã¦ãã ã•ã„",
    ],
  },
  "repository_not_found": {
    title: "ãƒªãƒã‚¸ãƒˆãƒªãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“",
    message: "æŒ‡å®šã•ã‚ŒãŸGitHubãƒªãƒã‚¸ãƒˆãƒªãŒå­˜åœ¨ã—ãªã„ã‹ã€ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“ã€‚",
    actions: [
      "Settings â†’ Repositoryã‚’ç¢ºèªã—ã¦ãã ã•ã„",
      "ãƒªãƒã‚¸ãƒˆãƒªåãŒã€Œowner/repositoryã€å½¢å¼ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„",
      "GitHubã§ãƒªãƒã‚¸ãƒˆãƒªãŒå­˜åœ¨ã™ã‚‹ã‹ç¢ºèªã—ã¦ãã ã•ã„",
    ],
  },
  "agent_execution_failed": {
    title: "ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè¡ŒãŒå¤±æ•—ã—ã¾ã—ãŸ",
    message: "ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®å®Ÿè¡Œä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚è©³ç´°ã¯ãƒ­ã‚°ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚",
    actions: [
      "ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ãƒ‘ãƒãƒ«ã§è©³ç´°ãƒ­ã‚°ã‚’ç¢ºèªã—ã¦ãã ã•ã„",
      "Issueç•ªå·ãŒæ­£ã—ã„ã‹ç¢ºèªã—ã¦ãã ã•ã„",
      "ã‚‚ã†ä¸€åº¦å®Ÿè¡Œã—ã¦ã¿ã¦ãã ã•ã„",
    ],
  },
};

export function getErrorMessage(errorCode: string): typeof ERROR_MESSAGES[string] {
  return ERROR_MESSAGES[errorCode] || {
    title: "ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ",
    message: "äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚",
    actions: ["ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ãƒ­ã‚°ã‚’ç¢ºèªã—ã¦ãã ã•ã„", "ã‚‚ã†ä¸€åº¦å®Ÿè¡Œã—ã¦ã¿ã¦ãã ã•ã„"],
  };
}
```

---

#### ã‚¿ã‚¹ã‚¯ 5.2: ã‚¨ãƒ©ãƒ¼ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆ2æ—¥ï¼‰

```tsx
// src/components/ErrorModal.tsx
import { AlertCircle, ExternalLink, X } from "lucide-react";

interface ErrorModalProps {
  isOpen: boolean;
  errorCode: string;
  onClose: () => void;
  onRetry?: () => void;
}

export function ErrorModal({ isOpen, errorCode, onClose, onRetry }: ErrorModalProps) {
  if (!isOpen) return null;

  const error = getErrorMessage(errorCode);

  return (
    <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
      <div className="bg-white rounded-2xl max-w-lg w-full p-6 space-y-6">
        {/* Header */}
        <div className="flex items-center justify-between">
          <div className="flex items-center space-x-3">
            <div className="w-10 h-10 bg-red-100 rounded-full flex items-center justify-center">
              <AlertCircle size={24} className="text-red-600" />
            </div>
            <h2 className="text-xl font-light text-gray-900">{error.title}</h2>
          </div>
          <button onClick={onClose} className="text-gray-400 hover:text-gray-900">
            <X size={20} />
          </button>
        </div>

        {/* Message */}
        <p className="text-gray-600 font-light">{error.message}</p>

        {/* Actions */}
        <div className="bg-gray-50 rounded-xl p-4 space-y-3">
          <h3 className="text-sm font-medium text-gray-900">ğŸ’¡ è§£æ±ºæ–¹æ³•</h3>
          <ul className="space-y-2">
            {error.actions.map((action, index) => (
              <li key={index} className="flex items-start space-x-2 text-sm text-gray-600">
                <span className="text-blue-600 font-medium">{index + 1}.</span>
                <span>{action}</span>
              </li>
            ))}
          </ul>
        </div>

        {/* Buttons */}
        <div className="flex items-center space-x-3">
          {onRetry && (
            <button
              onClick={onRetry}
              className="flex-1 px-4 py-2 bg-gray-900 text-white rounded-xl hover:bg-gray-800 transition-all duration-200"
            >
              Retry
            </button>
          )}
          <button
            onClick={onClose}
            className="flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-all duration-200"
          >
            Close
          </button>
        </div>

        {/* Help Link */}
        <div className="text-center">
          <a
            href="https://github.com/ShunsukeHayashi/Miyabi/issues"
            target="_blank"
            rel="noopener noreferrer"
            className="inline-flex items-center space-x-2 text-sm text-blue-600 hover:text-blue-700"
          >
            <span>ã‚µãƒãƒ¼ãƒˆãŒå¿…è¦ã§ã™ã‹ï¼Ÿ</span>
            <ExternalLink size={14} />
          </a>
        </div>
      </div>
    </div>
  );
}
```

---

### ğŸ“¦ æˆæœç‰©

1. âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
2. âœ… ã‚¨ãƒ©ãƒ¼ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
3. âœ… Re-runãƒœã‚¿ãƒ³
4. âœ… ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚¬ã‚¤ãƒ‰ãƒªãƒ³ã‚¯
5. ğŸ“ ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚¬ã‚¤ãƒ‰

### ğŸ¯ æˆåŠŸåŸºæº–

- [ ] ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒåˆ†ã‹ã‚Šã‚„ã™ã„
- [ ] Re-runãƒœã‚¿ãƒ³ã§ç°¡å˜ã«å†å®Ÿè¡Œã§ãã‚‹
- [ ] ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚¬ã‚¤ãƒ‰ã¸ã®ãƒªãƒ³ã‚¯ãŒæ©Ÿèƒ½ã™ã‚‹

---

## Phase 6: ä¸¦åˆ—å®Ÿè¡Œãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ï¼ˆWeek 8ï¼‰

### ğŸ¯ ç›®æ¨™

è¤‡æ•°ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ä¸¦åˆ—å®Ÿè¡Œæ™‚ã«ã€å…¨ä½“ã®é€²æ—ã‚’è¦–è¦šçš„ã«è¡¨ç¤ºã™ã‚‹ã€‚

### ğŸ“‹ å®Ÿè£…ã‚¿ã‚¹ã‚¯

#### ã‚¿ã‚¹ã‚¯ 6.1: ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆ2æ—¥ï¼‰

```tsx
// src/components/ParallelExecutionProgress.tsx
import { CheckCircle, Clock, AlertCircle } from "lucide-react";

interface ParallelExecutionProgressProps {
  executions: AgentExecution[];
}

export function ParallelExecutionProgress({ executions }: ParallelExecutionProgressProps) {
  const total = executions.length;
  const completed = executions.filter((e) => e.status === "success").length;
  const failed = executions.filter((e) => e.status === "failed").length;
  const running = executions.filter((e) => e.status === "running").length;
  const progress = (completed + failed) / total * 100;

  return (
    <div className="bg-white border border-gray-200 rounded-xl p-4 space-y-3">
      <div className="flex items-center justify-between">
        <h3 className="text-sm font-light text-gray-900">ä¸¦åˆ—å®Ÿè¡Œé€²æ—</h3>
        <span className="text-xs text-gray-500">
          {completed + failed} / {total} completed
        </span>
      </div>

      {/* Progress Bar */}
      <div className="w-full h-2 bg-gray-100 rounded-full overflow-hidden">
        <div
          className="h-full bg-gradient-to-r from-blue-500 to-green-500 transition-all duration-300"
          style={{ width: `${progress}%` }}
        />
      </div>

      {/* Stats */}
      <div className="flex items-center space-x-4 text-xs">
        <div className="flex items-center space-x-1 text-green-600">
          <CheckCircle size={14} />
          <span>{completed} success</span>
        </div>
        <div className="flex items-center space-x-1 text-blue-600">
          <Clock size={14} />
          <span>{running} running</span>
        </div>
        {failed > 0 && (
          <div className="flex items-center space-x-1 text-red-600">
            <AlertCircle size={14} />
            <span>{failed} failed</span>
          </div>
        )}
      </div>
    </div>
  );
}
```

---

### ğŸ“¦ æˆæœç‰©

1. âœ… ä¸¦åˆ—å®Ÿè¡Œãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼
2. âœ… å®Œäº†æ•°/ç·æ•°ã®è¡¨ç¤º
3. âœ… æˆåŠŸ/å®Ÿè¡Œä¸­/å¤±æ•—ã®å†…è¨³
4. ğŸ“ ä¸¦åˆ—å®Ÿè¡Œã‚¬ã‚¤ãƒ‰

### ğŸ¯ æˆåŠŸåŸºæº–

- [ ] ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ãŒæ­£ç¢ºã«é€²æ—ã‚’åæ˜ ã™ã‚‹
- [ ] ä¸¦åˆ—å®Ÿè¡Œæ™‚ã®å…¨ä½“åƒãŒæŠŠæ¡ã§ãã‚‹

---

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯è©³ç´°

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰

| æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€” |
|-----|----------|------|
| React | 18.x | UIæ§‹ç¯‰ |
| TypeScript | 5.x | å‹å®‰å…¨æ€§ |
| Vite | 7.x | ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ« |
| TailwindCSS | 3.x | ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚° |
| React Flow | 11.x | DAGå¯è¦–åŒ– |
| Lucide React | latest | ã‚¢ã‚¤ã‚³ãƒ³ |
| Zustand | latest | çŠ¶æ…‹ç®¡ç† |

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰

| æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€” |
|-----|----------|------|
| Rust | 2021 Edition | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ­ã‚¸ãƒƒã‚¯ |
| Tauri | 2.0 | ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ |
| Tokio | latest | éåŒæœŸãƒ©ãƒ³ã‚¿ã‚¤ãƒ  |
| Serde | latest | ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ |

### ãƒ†ã‚¹ãƒˆ

| æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€” |
|-----|----------|------|
| Playwright | latest | E2Eãƒ†ã‚¹ãƒˆ |
| Vitest | latest | ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ |
| React Testing Library | latest | ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ†ã‚¹ãƒˆ |

---

## é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### å¿…è¦ãªç’°å¢ƒ

- Node.js: v20.19ä»¥ä¸Š
- Rust: 2021 Edition (Stable)
- pnpm: æœ€æ–°ç‰ˆ

### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚³ãƒãƒ³ãƒ‰

```bash
# 1. ãƒªãƒã‚¸ãƒˆãƒªã‚¯ãƒ­ãƒ¼ãƒ³
cd /Users/shunsuke/Dev/miyabi-private/miyabi-desktop

# 2. ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pnpm install

# 3. Tauri CLI ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆã‚°ãƒ­ãƒ¼ãƒãƒ«ï¼‰
cargo install tauri-cli

# 4. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
pnpm tauri dev

# 5. ãƒ“ãƒ«ãƒ‰
pnpm tauri build
```

---

## ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### 1. ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆï¼ˆComponent Levelï¼‰

```bash
# å®Ÿè¡Œ
pnpm test

# ã‚«ãƒãƒ¬ãƒƒã‚¸
pnpm test:coverage
```

### 2. E2Eãƒ†ã‚¹ãƒˆï¼ˆApplication Levelï¼‰

```bash
# Playwrightå®Ÿè¡Œ
pnpm test:e2e

# ãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹ãƒ¢ãƒ¼ãƒ‰
pnpm test:e2e:headless
```

### 3. æ‰‹å‹•UXãƒ†ã‚¹ãƒˆ

```bash
# ãƒ†ã‚¹ãƒˆã‚¬ã‚¤ãƒ‰ã‚’å‚ç…§
cat MANUAL_UX_TEST_GUIDE.md
```

---

## ãƒªãƒªãƒ¼ã‚¹æˆ¦ç•¥

### Phaseå®Œäº†ã”ã¨ã®ãƒªãƒªãƒ¼ã‚¹

| Phase | ãƒªãƒªãƒ¼ã‚¹ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ãƒªãƒªãƒ¼ã‚¹æ—¥ï¼ˆæƒ³å®šï¼‰ |
|-------|---------|-----------|-----------------|
| Phase 1 | Alpha 1 | v0.2.0 | 2025-11-08 |
| Phase 2 | Alpha 2 | v0.3.0 | 2025-11-22 |
| Phase 3 | Beta 1 | v0.4.0 | 2025-11-29 |
| Phase 4-6 | Beta 2 | v0.5.0 | 2025-12-27 |
| Final | v1.0.0 | v1.0.0 | 2026-01-15 |

### ãƒªãƒªãƒ¼ã‚¹ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] ã™ã¹ã¦ã®E2Eãƒ†ã‚¹ãƒˆãŒãƒ‘ã‚¹ã™ã‚‹
- [ ] æ‰‹å‹•UXãƒ†ã‚¹ãƒˆã‚’å®Œäº†ã™ã‚‹
- [ ] CHANGELOGã‚’æ›´æ–°ã™ã‚‹
- [ ] READMEã‚’æ›´æ–°ã™ã‚‹
- [ ] GitHubãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã‚’ä½œæˆã™ã‚‹
- [ ] ãƒã‚¤ãƒŠãƒªã‚’ç”Ÿæˆã™ã‚‹ï¼ˆmacOS/Windows/Linuxï¼‰

---

**ä½œæˆè€…**: Miyabi Team
**æœ€çµ‚æ›´æ–°**: 2025-10-31
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: Active
**ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯**: GitHub Issue #[TBD]

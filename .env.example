# ============================================
# Miyabi - 環境変数設定ファイル (Example)
# ============================================
#
# このファイルを .env にコピーして、実際の値を設定してください
#
# 必須項目は [REQUIRED] と記載されています
# オプション項目は [OPTIONAL] と記載されています
#

# ============================================
# 1. 環境設定
# ============================================

# アプリケーション環境 (development/staging/production)
# [REQUIRED]
ENVIRONMENT=development

# Node.js環境 (development/production)
# [OPTIONAL] デフォルト: development
NODE_ENV=development

# デバイス識別子 (複数環境で動作する場合)
# [OPTIONAL]
# DEVICE_IDENTIFIER=pixel-9-pro-xl

# ============================================
# 2. データベース設定
# ============================================

# PostgreSQL接続URL
# [REQUIRED]
# 形式: postgresql://ユーザー名:パスワード@ホスト:ポート/データベース名
# ローカル開発用デフォルト: postgresql://miyabi_admin:miyabi_local_dev@localhost:5432/miyabi
DATABASE_URL=postgresql://miyabi_admin:miyabi_local_dev@localhost:5432/miyabi

# データベース接続プール設定
# [OPTIONAL] 環境に応じて自動設定されますが、上書き可能
# DB_MAX_CONNECTIONS=20
# DB_MIN_CONNECTIONS=5
# DB_ACQUIRE_TIMEOUT_SECS=10
# DB_IDLE_TIMEOUT_SECS=300
# DB_MAX_LIFETIME_SECS=900
# DB_TEST_BEFORE_ACQUIRE=false

# ============================================
# 3. サーバー設定
# ============================================

# APIサーバーアドレス
# [OPTIONAL] デフォルト: 0.0.0.0:8080
SERVER_ADDRESS=0.0.0.0:8080

# サーバーポート
# [OPTIONAL] デフォルト: 8080
# PORT=8080

# フロントエンドURL (CORS設定用)
# [OPTIONAL] デフォルト: http://localhost:3000
FRONTEND_URL=http://localhost:3000

# ベースURL
# [OPTIONAL]
# BASE_URL=http://localhost:8080

# 許可するOrigin (カンマ区切り)
# [OPTIONAL]
# ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080

# ============================================
# 4. 認証・セキュリティ
# ============================================

# JWT署名シークレットキー
# [REQUIRED]
# 本番環境では必ず強力なランダム文字列を使用してください
JWT_SECRET=your-jwt-secret-key-change-this-in-production

# JWTトークン有効期限 (秒)
# [OPTIONAL] デフォルト: 3600 (1時間)
# JWT_EXPIRATION=3600

# リフレッシュトークン有効期限 (秒)
# [OPTIONAL] デフォルト: 604800 (7日)
# REFRESH_EXPIRATION=604800

# ============================================
# 5. GitHub認証・API
# ============================================

# GitHub Personal Access Token
# [REQUIRED]
# スコープ: repo, workflow, read:org
GITHUB_TOKEN=ghp_your_github_personal_access_token

# GitHub OAuth設定
# [REQUIRED for OAuth]
GITHUB_CLIENT_ID=your_github_oauth_client_id
GITHUB_CLIENT_SECRET=your_github_oauth_client_secret

# GitHub OAuth コールバックURL
# [OPTIONAL] デフォルト: http://localhost:8080/api/v1/auth/github/callback
GITHUB_CALLBACK_URL=http://localhost:8080/api/v1/auth/github/callback

# GitHub デフォルトリポジトリ設定
# [OPTIONAL]
GITHUB_DEFAULT_OWNER=customer-cloud
GITHUB_DEFAULT_REPO=miyabi-private

# GitHub リポジトリパス (ローカル)
# [OPTIONAL]
GITHUB_REPOSITORY=customer-cloud/miyabi-private
GITHUB_REPOSITORY_PATH=/home/ubuntu/miyabi-private

# GitHub Webhook シークレット
# [OPTIONAL]
# GITHUB_WEBHOOK_SECRET=your_webhook_secret

# ============================================
# 6. AI/ML API Keys
# ============================================

# Anthropic Claude API Key
# [REQUIRED for Claude features]
ANTHROPIC_API_KEY=sk-ant-api03-your-anthropic-api-key

# Google Gemini API Key
# [REQUIRED for Gemini features]
GEMINI_API_KEY=your-gemini-api-key

# Gemini モデル設定
# [OPTIONAL] デフォルト: gemini-3-pro-preview
# GEMINI_MODEL=gemini-3-pro-preview

# Gemini 思考レベル (low/medium/high)
# [OPTIONAL] デフォルト: high
# GEMINI_THINKING_LEVEL=high

# OpenAI API Key
# [OPTIONAL]
OPENAI_API_KEY=sk-your-openai-api-key

# OpenAI モデル
# [OPTIONAL] デフォルト: gpt-4-turbo-preview
# OPENAI_MODEL=gpt-4-turbo-preview

# xAI (Grok) API Key
# [OPTIONAL]
# XAI_API_KEY=your-xai-api-key

# ARK API Key (画像生成等)
# [OPTIONAL]
# ARK_API_KEY=your-ark-api-key

# ============================================
# 7. Lark (Feishu) 統合
# ============================================

# Lark App ID
# [REQUIRED for Lark features]
LARK_APP_ID=cli_your_lark_app_id

# Lark App Secret
# [REQUIRED for Lark features]
LARK_APP_SECRET=your_lark_app_secret

# Lark Verification Token
# [OPTIONAL]
# LARK_VERIFICATION_TOKEN=your_verification_token

# ============================================
# 8. Discord 統合
# ============================================

# Discord Bot Token
# [OPTIONAL]
# DISCORD_BOT_TOKEN=your_discord_bot_token

# Discord Guild (Server) ID
# [OPTIONAL]
# GUILD_ID=1234567890123456789

# Discord Channel IDs
# [OPTIONAL]
# PROGRESS_CHANNEL_ID=1234567890123456789
# INTRODUCTIONS_CHANNEL_ID=1234567890123456789

# ============================================
# 9. Twitter/X 統合
# ============================================

# Twitter API Credentials
# [OPTIONAL]
# TWITTER_API_KEY=your_twitter_api_key
# TWITTER_API_SECRET=your_twitter_api_secret
# TWITTER_ACCESS_TOKEN=your_twitter_access_token
# TWITTER_ACCESS_SECRET=your_twitter_access_secret
# TWITTER_BEARER_TOKEN=your_twitter_bearer_token

# ============================================
# 10. AWS 設定
# ============================================

# AWS リージョン
# [OPTIONAL] デフォルト: us-west-2
AWS_REGION=us-west-2

# AWS 認証情報
# [OPTIONAL] IAMロールを使用する場合は不要
# AWS_ACCESS_KEY_ID=your_aws_access_key_id
# AWS_SECRET_ACCESS_KEY=your_aws_secret_access_key

# AWS Lambda 実行環境識別子 (自動設定)
# [AUTOMATIC]
# AWS_EXECUTION_ENV=AWS_Lambda_nodejs20.x

# ============================================
# 11. LINE 統合
# ============================================

# LINE Channel Access Token
# [OPTIONAL]
# LINE_CHANNEL_ACCESS_TOKEN=your_line_channel_access_token

# ============================================
# 12. Miyabi 固有設定
# ============================================

# Miyabi ライセンスキー (商用Agent用)
# [REQUIRED for commercial agents]
# 形式: MIYABI-COMMERCIAL-{TIER}-{HASH}
# 例: MIYABI-COMMERCIAL-PRO-A1B2C3D4E5F6G7H8I9J0
# MIYABI_LICENSE_KEY=MIYABI-COMMERCIAL-STARTER-XXXXXXXXXXXX

# Miyabi API Key (内部API認証用)
# [OPTIONAL]
# MIYABI_API_KEY=your_miyabi_api_key

# Miyabi Bearer Token (SSE Gateway認証用)
# [OPTIONAL]
# MIYABI_BEARER_TOKEN=your_miyabi_bearer_token

# Miyabi OAuth Secret
# [OPTIONAL]
# MIYABI_OAUTH_SECRET=your_miyabi_oauth_secret

# Miyabi Rules API URL
# [OPTIONAL]
# MIYABI_RULES_API_URL=https://miyabi-rules-api.example.com

# Miyabi ライセンスAPI URL
# [OPTIONAL]
# MIYABI_LICENSE_API=https://api.miyabi.tech/validate

# Miyabi シークレットソルト
# [OPTIONAL]
# MIYABI_SECRET_SALT=MIYABI_DEFAULT_SALT_2025

# ============================================
# 13. Git Worktree 設定
# ============================================

# Worktree ベースパス
# [OPTIONAL]
# MIYABI_WORKTREE_BASE_PATH=/tmp/miyabi-worktrees

# Git ベースブランチ
# [OPTIONAL] デフォルト: main
# MIYABI_BASE_BRANCH=main

# ============================================
# 14. デプロイメント設定
# ============================================

# デプロイ環境 (staging/production)
# [OPTIONAL] デフォルト: staging
# MIYABI_DEPLOY_ENV=staging

# ヘルスチェックURL
# [OPTIONAL]
# MIYABI_PRODUCTION_HEALTH_URL=https://api.miyabi.tech/health
# MIYABI_STAGING_HEALTH_URL=https://staging-api.miyabi.tech/health

# ============================================
# 15. ファイルシステム設定
# ============================================

# Miyabi リポジトリパス
# [OPTIONAL]
# MIYABI_REPO_PATH=/home/ubuntu/miyabi-private

# ファイル監視ディレクトリ
# [OPTIONAL]
# MIYABI_WATCH_DIR=/home/ubuntu/miyabi-private

# ファイルアクセス ベースパス
# [OPTIONAL]
# MIYABI_FILE_ACCESS_BASE_PATH=/home/ubuntu/miyabi-private

# ベースパス外へのアクセスを許可するか
# [OPTIONAL] デフォルト: false
# MIYABI_FILE_ACCESS_ALLOW_OUTSIDE=false

# 最大ファイルサイズ (バイト)
# [OPTIONAL] デフォルト: 10485760 (10MB)
# MIYABI_FILE_ACCESS_MAX_SIZE=10485760

# ログディレクトリ
# [OPTIONAL]
# MIYABI_LOG_DIR=/home/ubuntu/miyabi-private/.ai/logs

# MCPサーバーパス
# [OPTIONAL]
# MCP_SERVER_PATH=/home/ubuntu/miyabi-private/mcp-servers

# ============================================
# 16. フロントエンド設定 (Next.js)
# ============================================

# Next.js Public API URL
# [OPTIONAL] デフォルト: http://localhost:8080
NEXT_PUBLIC_API_URL=http://localhost:8080

# Next.js Public WebSocket URL
# [OPTIONAL]
NEXT_PUBLIC_WS_URL=ws://localhost:8080

# Next.js Public OAuth Redirect URL
# [OPTIONAL]
NEXT_PUBLIC_OAUTH_REDIRECT_URL=http://localhost:3000/auth/callback

# Next.js Public GitHub Client ID
# [OPTIONAL]
# NEXT_PUBLIC_GITHUB_CLIENT_ID=your_github_oauth_client_id

# ============================================
# 17. ロギング・デバッグ
# ============================================

# Rust ログレベル
# [OPTIONAL] デフォルト: info
# 形式: trace, debug, info, warn, error
# RUST_LOG=miyabi=debug,info

# Node.js ログレベル
# [OPTIONAL]
# LOG_LEVEL=debug

# デバッグモード
# [OPTIONAL]
# DEBUG=true

# ============================================
# 18. テスト設定
# ============================================

# Playwright ベースURL
# [OPTIONAL]
# PLAYWRIGHT_BASE_URL=http://localhost:3000

# CI環境識別子 (自動設定)
# [AUTOMATIC]
# CI=true

# 統合テストスキップフラグ
# [OPTIONAL]
# SKIP_INTEGRATION_TESTS=true

# Dashboard Server URL (テストレポート用)
# [OPTIONAL]
# DASHBOARD_SERVER_URL=http://localhost:3001

# ============================================
# 備考
# ============================================
#
# - 本番環境では全ての [REQUIRED] 項目を設定してください
# - シークレットキーは環境ごとに異なる強力なものを使用してください
# - AWS Lambda環境では AWS Secrets Manager から自動ロードされます
# - ローカル開発では .env ファイルに設定を記載してください
# - .env ファイルは .gitignore に含まれており、コミットされません
#
# 詳細なドキュメント: docs/ENVIRONMENT_VARIABLES.md
#

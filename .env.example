# ==============================================================================
# Miyabi - Environment Configuration (Rust Edition)
# ==============================================================================
# Purpose: Environment variable template for Docker and local development
# Usage: Copy this file to .env and fill in your actual values
# Version: 2.0 (Rust Edition + Docker support)
# ==============================================================================

# -----------------------------------------------------------------------------
# Required: API Keys
# -----------------------------------------------------------------------------

# GitHub Personal Access Token
# ⚠️ RECOMMENDED: Use 'gh auth login' instead of storing token in .env
# The application will automatically use 'gh auth token' if available
#
# Only use this environment variable for:
# - Docker environments
# - CI/CD environments (GitHub Actions, etc.)
# - When gh CLI is not available
#
# Scopes required: repo, workflow, write:packages, issues:write
# Generate at: https://github.com/settings/tokens
#
# GITHUB_TOKEN=ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# -----------------------------------------------------------------------------
# LLM Provider API Keys
# -----------------------------------------------------------------------------

# Anthropic Claude API Key (REQUIRED for most agents)
# Get from: https://console.anthropic.com/
# Models: Claude 3.5 Sonnet, Claude 3 Opus, Claude 3 Haiku
# Used by: All AI agents, miyabi-historical, CodeGenAgent, ReviewAgent
# ANTHROPIC_API_KEY=sk-ant-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# OpenAI API Key (OPTIONAL - for HybridRouter fallback)
# Get from: https://platform.openai.com/api-keys
# Models: GPT-4o, GPT-4 Turbo, GPT-4, GPT-3.5 Turbo
# Used by: HybridRouter (fallback), OpenAI-specific agents
# OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Google Gemini API Key (OPTIONAL - for Google AI integration)
# Get from: https://makersuite.google.com/app/apikey
# Models: Gemini 1.5 Pro, Gemini 1.5 Flash
# Used by: GoogleClient, HybridRouter (fallback)
# GOOGLE_API_KEY=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
# Alternative variable name (for compatibility)
# GEMINI_API_KEY=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Groq API Key (OPTIONAL - for ultra-fast inference)
# Get from: https://console.groq.com/
# Models: Llama 3 70B, Llama 3 8B, Mixtral 8x7B
# Used by: HybridRouter (for speed-critical tasks)
# GROQ_API_KEY=gsk_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Ollama Configuration (OPTIONAL - for local LLM)
# Ollama server URL (default: http://localhost:11434)
# Models: GPT-OSS-20B, Llama 2, CodeLlama, Mistral
# Used by: Local development, offline testing
# OLLAMA_BASE_URL=http://localhost:11434

# -----------------------------------------------------------------------------
# LLM Configuration
# -----------------------------------------------------------------------------

# Default LLM provider
# Options: anthropic, openai, google, groq, ollama
# Default: anthropic
# DEFAULT_LLM_PROVIDER=anthropic

# Default model per provider
# DEFAULT_ANTHROPIC_MODEL=claude-3-5-sonnet-20241022
# DEFAULT_OPENAI_MODEL=gpt-4o
# DEFAULT_GOOGLE_MODEL=gemini-1.5-pro
# DEFAULT_GROQ_MODEL=llama-3-70b-8192
# DEFAULT_OLLAMA_MODEL=gpt-oss-20b

# HybridRouter configuration
# Enable intelligent model selection based on task complexity and cost
# HYBRID_ROUTER_ENABLED=true
# HYBRID_ROUTER_COST_THRESHOLD=0.01  # USD per request

# -----------------------------------------------------------------------------
# Repository Configuration
# -----------------------------------------------------------------------------

# GitHub Repository (owner/repo)
# Example: myorg/my-project
GITHUB_REPOSITORY=owner/repo
GITHUB_REPOSITORY_OWNER=owner

# Device Identifier (for logs and monitoring)
# Default: hostname
# Docker: set to 'mac-mini-docker' or similar
DEVICE_IDENTIFIER=MacBook Pro 16-inch

# -----------------------------------------------------------------------------
# Rust Configuration
# -----------------------------------------------------------------------------

# Rust logging level
# Options: trace, debug, info, warn, error
# Default: info
RUST_LOG=info

# Rust backtrace
# Options: 0 (disabled), 1 (enabled), full (full backtrace)
# Default: 0 (disabled in production)
RUST_BACKTRACE=0

# -----------------------------------------------------------------------------
# Docker Configuration
# -----------------------------------------------------------------------------

# Runner type (for GitHub Actions workflows)
# Options: 'ubuntu-latest', 'self-hosted', '[self-hosted, macOS, ARM64]'
# Used by RefresherAgent and other workflows
# RUNNER_TYPE=self-hosted

# Docker Compose profile
# Options: with-database, with-cache, monitoring, development
# Multiple profiles: with-database,with-cache
# COMPOSE_PROFILES=with-database,with-cache

# -----------------------------------------------------------------------------
# Database Configuration (PostgreSQL)
# -----------------------------------------------------------------------------

# PostgreSQL password
# ⚠️ CHANGE THIS IN PRODUCTION
POSTGRES_PASSWORD=miyabi_secure_password_change_me

# PostgreSQL connection URL (for Rust applications)
# DATABASE_URL=postgresql://miyabi:${POSTGRES_PASSWORD}@postgres:5432/miyabi

# -----------------------------------------------------------------------------
# Cache Configuration (Redis)
# -----------------------------------------------------------------------------

# Redis password
# ⚠️ CHANGE THIS IN PRODUCTION
REDIS_PASSWORD=miyabi_redis_password_change_me

# Redis connection URL (for Rust applications)
# REDIS_URL=redis://:${REDIS_PASSWORD}@redis:6379

# -----------------------------------------------------------------------------
# Monitoring Configuration (Prometheus + Grafana)
# -----------------------------------------------------------------------------

# Grafana admin password
# ⚠️ CHANGE THIS IN PRODUCTION
GRAFANA_PASSWORD=admin

# Prometheus retention period
# Default: 15d
# PROMETHEUS_RETENTION=15d

# -----------------------------------------------------------------------------
# Firebase Deployment (Optional)
# -----------------------------------------------------------------------------

# Firebase Projects
FIREBASE_STAGING_PROJECT=my-app-staging
FIREBASE_PROD_PROJECT=my-app-prod

# Deployment URLs
STAGING_URL=https://staging.my-app.com
PRODUCTION_URL=https://my-app.com

# -----------------------------------------------------------------------------
# Team Configuration (Optional)
# -----------------------------------------------------------------------------

# GitHub usernames for escalation
TECH_LEAD_GITHUB=techlead-username
CISO_GITHUB=ciso-username
PO_GITHUB=po-username

# -----------------------------------------------------------------------------
# Agent Configuration
# -----------------------------------------------------------------------------

# Log directory
LOG_DIRECTORY=.ai/logs

# Report directory
REPORT_DIRECTORY=.ai/parallel-reports

# Default concurrency for parallel execution
# Recommended: Number of CPU cores - 1
DEFAULT_CONCURRENCY=2

# Agent execution parameters (optional)
# AGENT_TYPE=coordinator
# ISSUE_NUMBER=123
# CONCURRENCY=3

# -----------------------------------------------------------------------------
# Worktree Configuration
# -----------------------------------------------------------------------------

# Enable Worktree-based parallel execution
# Default: true (Rust edition fully supports Worktree)
USE_WORKTREE=true

# Worktree base directory
# Default: .worktrees
WORKTREE_BASE_DIR=.worktrees

# -----------------------------------------------------------------------------
# SSH Configuration (Mac mini remote execution)
# -----------------------------------------------------------------------------

# SSH host for Docker remote execution
# Example: user@mac-mini.local
# SSH_DOCKER_HOST=user@mac-mini.local

# SSH Docker context name
# Example: mac-mini-docker
# DOCKER_CONTEXT=mac-mini-docker

# -----------------------------------------------------------------------------
# GitHub Actions (Auto-set by workflow)
# -----------------------------------------------------------------------------

# These are automatically set when running in GitHub Actions
# Do not manually set these unless testing locally

# ISSUE_NUMBER=123
# GITHUB_ACTOR=username
# GITHUB_RUN_ID=1234567890
# GITHUB_RUN_NUMBER=42

# ==============================================================================
# Docker Usage Example:
#
# 1. Copy this file:
#    cp .env.example .env
#
# 2. Edit .env with your values:
#    vim .env
#
# 3. Run Docker Compose:
#    docker-compose up -d
#
# 4. SSH remote execution:
#    ssh user@mac-mini "cd /path/to/miyabi && docker-compose up -d"
#
# ==============================================================================

# ==============================================================================
# Local Development (without Docker):
#
# 1. Setup gh CLI authentication:
#    gh auth login
#
# 2. Run miyabi CLI:
#    cargo run --bin miyabi -- status
#
# 3. Run specific agent:
#    cargo run --bin miyabi -- agent run coordinator --issue 270
#
# ==============================================================================

# ==============================================================================
# Lark OpenAPI MCP Enhanced - Integration
# ==============================================================================
# Purpose: Feishu/Lark integration for collaboration, documents, and Bitables
# Submodule: integrations/lark-mcp
# Documentation: integrations/lark-mcp/README.md
# ==============================================================================

# -----------------------------------------------------------------------------
# Lark App Credentials (REQUIRED for Lark integration)
# -----------------------------------------------------------------------------

# Get credentials from Lark Developer Console: https://open.larksuite.com/
# LARK_APP_ID=cli_xxxxxxxxxx
# LARK_APP_SECRET=xxxxxxxxxxxxxxxx

# Lark API Domain
# LARK_DOMAIN=https://open.feishu.cn
# Alternative for international: https://open.larksuite.com

# Lark Language Preference
# LARK_LANGUAGE=en
# Options: en, zh, ja

# Lark Token Mode
# LARK_TOKEN_MODE=auto
# Options: auto, tenant, user

# -----------------------------------------------------------------------------
# MCP Server Configuration (Optional - for Claude Desktop integration)
# -----------------------------------------------------------------------------

# MCP Server Mode
# MCP_MODE=stdio
# Options: stdio (for Claude Desktop), sse (for HTTP access)

# MCP Server Port (for SSE mode only)
# MCP_PORT=3000

# Rate Limiting
# LARK_RATE_LIMIT_ENABLED=true
# LARK_RATE_LIMIT_REQUESTS_PER_MINUTE=200

# -----------------------------------------------------------------------------
# Lark Genesis AI System (Optional - AI-powered Base creation)
# -----------------------------------------------------------------------------

# Genesis Features
# LARK_GENESIS_ENABLED=true
# LARK_GENESIS_MODEL=gpt-4
# LARK_GENESIS_REQUIRE_CONFIRMATION=true

# ==============================================================================
# Lark MCP Usage Example:
#
# 1. Copy this file:
#    cp .env.example .env
#
# 2. Edit .env with your Lark credentials:
#    vim .env
#
# 3. Configure Claude Desktop MCP:
#    See .claude/mcp-config.json for configuration example
#
# 4. Start using Lark tools in Claude:
#    - Create documents
#    - Manage bitables
#    - Send messages
#    - Create calendar events
#
# ==============================================================================

# ==============================================================================
# Claudable - AI-driven Next.js App Builder
# ==============================================================================
# Purpose: Frontend generation via CodeGenAgent with Claude Code integration
# Service: Docker Compose profile 'claudable'
# Ports: Frontend=3001, API=8080
# Documentation: docs/integrations/CLAUDABLE_INTEGRATION.md
# ==============================================================================

# -----------------------------------------------------------------------------
# Claudable API Configuration
# -----------------------------------------------------------------------------

# Claudable API URL (default: http://localhost:8080)
# Change if running Claudable on a different host
CLAUDABLE_API_URL=http://localhost:8080

# Claudable API Key (optional, for production use)
# Leave empty for local development
# CLAUDABLE_API_KEY=

# Claude Code API Key (REQUIRED for Claudable)
# Get from: https://console.anthropic.com/
# Scopes: Full access to Claude Code API
# ANTHROPIC_API_KEY=sk-ant-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# ==============================================================================

# ==============================================================================
# Lark Wiki MCP Agents - Wiki Space Management
# ==============================================================================
# Purpose: Comprehensive Wiki space control with 5 command systems (C1-C5)
# Submodule: integrations/lark-wiki-mcp
# Documentation: integrations/lark-wiki-mcp/README.md
# ==============================================================================

# -----------------------------------------------------------------------------
# Wiki Space Configuration (REQUIRED for Wiki MCP)
# -----------------------------------------------------------------------------

# Wiki Space ID - Get from Lark Wiki space URL
# WIKI_SPACE_ID=7324483648537755682

# Root Node Token - Get from Wiki root node
# ROOT_NODE_TOKEN=K7xUwSKH0i3fPekyD9ojSsCLpna

# ==============================================================================
# Lark Wiki MCP Usage Example:
#
# 1. Get your Wiki Space ID:
#    - Open Lark Wiki space
#    - Copy space_id from URL: https://example.feishu.cn/wiki/{space_id}
#
# 2. Get Root Node Token:
#    - Navigate to root node
#    - Copy node_token from URL
#
# 3. Configure .env:
#    WIKI_SPACE_ID=your_space_id
#    ROOT_NODE_TOKEN=your_root_node_token
#
# 4. Start using Wiki MCP in Claude:
#    - C1: Initialize Wiki space
#    - C2: Create/move/delete Wiki nodes
#    - C3: Manage permissions
#    - C4: Search and sync content
#    - C5: Automate Wiki operations
#
# ==============================================================================

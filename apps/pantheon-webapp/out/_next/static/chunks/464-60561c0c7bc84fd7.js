"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[464],{7464:function(e,t,i){i.d(t,{Ho:function(){return c},aC:function(){return u}});var s=i(7437),a=i(2265),o=i(9116);let n="https://d2ujio3t1dyu7h.cloudfront.net/auth/callback",r=(0,a.createContext)(null);function c(e){let{children:t}=e,[i,c]=(0,a.useState)({user:null,isAuthenticated:!1,isLoading:!0,error:null});(0,a.useEffect)(()=>{let e=o.I8.getAccessToken();if(e)try{let t=JSON.parse(atob(e.split(".")[1])),i=1e3*t.exp,s=Date.now(),a=i-s-3e5;if(a>0){let e=setTimeout(async()=>{try{await o.x1.post("/auth/refresh")}catch(e){}},a);return()=>clearTimeout(e)}}catch(e){}},[i.isAuthenticated]),(0,a.useEffect)(()=>{(async()=>{if(o.I8.isAuthenticated())try{let e=await o.x1.get("/auth/me");c({user:e,isAuthenticated:!0,isLoading:!1,error:null})}catch(e){o.I8.clearTokens(),c({user:null,isAuthenticated:!1,isLoading:!1,error:null})}else c({user:null,isAuthenticated:!1,isLoading:!1,error:null})})()},[]);let u=(0,a.useCallback)(()=>{let e=Math.random().toString(36).substring(2,15);sessionStorage.setItem("oauth_state",e);let t=new URLSearchParams({client_id:"",redirect_uri:n,scope:"read:user user:email",state:e});window.location.href="https://github.com/login/oauth/authorize?".concat(t.toString())},[]),d=(0,a.useCallback)(async(e,t)=>{let i=sessionStorage.getItem("oauth_state");if(t&&i&&t!==i)return c(e=>({...e,isLoading:!1,error:"Invalid OAuth state. Please try logging in again."})),!1;sessionStorage.removeItem("oauth_state"),c(e=>({...e,isLoading:!0,error:null}));try{let t=await fetch("".concat("https://fvqrv46xg6ym6if5s6l2wljm7u0ogqlh.lambda-url.us-west-2.on.aws/api/v1","/auth/github/callback"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:e,redirect_uri:n})});if(!t.ok){let e=await t.json();throw Error(e.message||"Authentication failed")}let i=await t.json();o.I8.setTokens(i.access_token,i.refresh_token);let s=await o.x1.get("/auth/me");return c({user:s,isAuthenticated:!0,isLoading:!1,error:null}),!0}catch(e){return c({user:null,isAuthenticated:!1,isLoading:!1,error:e instanceof Error?e.message:"Authentication failed"}),!1}},[]),l=(0,a.useCallback)(async()=>{c(e=>({...e,isLoading:!0}));try{await o.x1.post("/auth/logout").catch(()=>{})}finally{o.I8.clearTokens(),c({user:null,isAuthenticated:!1,isLoading:!1,error:null})}},[]),h=(0,a.useCallback)(async()=>{if(o.I8.isAuthenticated())try{let e=await o.x1.get("/auth/me");c(t=>({...t,user:e,error:null}))}catch(e){o.I8.clearTokens(),c({user:null,isAuthenticated:!1,isLoading:!1,error:null})}},[]),m=(0,a.useMemo)(()=>({...i,login:u,logout:l,refreshUser:h,handleOAuthCallback:d}),[i,u,l,h,d]);return(0,s.jsx)(r.Provider,{value:m,children:t})}function u(){let e=(0,a.useContext)(r);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},484:function(e,t,i){i.d(t,{EL:function(){return s},SY:function(){return c},VD:function(){return a},kB:function(){return n},o8:function(){return o},qb:function(){return r}});let s={agentsOnline:17,agentsTotal:21,apiStatus:"healthy",consultationsToday:142,avgResponseTime:1.2,lastUpdated:new Date().toISOString()},a=[{id:"c1",taskId:"task-001",taskTitle:"Deploy Miyabi Web API v2.1",advisorId:"da-vinci",advisorName:"Leonardo da Vinci",advisorDivision:"Innovation & Technology",advisorIcon:"=\xa1",wisdom:"Simplicity is the ultimate sophistication",status:"success",confidence:94,createdAt:new Date(Date.now()-72e5).toISOString(),completedAt:new Date(Date.now()-54e5).toISOString()},{id:"c2",taskId:"task-002",taskTitle:"Resolve merge conflict in feature/auth",advisorId:"sun-tzu",advisorName:"Sun Tzu",advisorDivision:"Divine Council",advisorIcon:"\xa1",wisdom:"The supreme art of war is to subdue the enemy without fighting",status:"in_progress",confidence:87,createdAt:new Date(Date.now()-18e5).toISOString()},{id:"c3",taskId:"task-003",taskTitle:"Optimize database query performance",advisorId:"nikola-tesla",advisorName:"Nikola Tesla",advisorDivision:"Innovation & Technology",advisorIcon:"=\xa1",wisdom:"If you want to find the secrets of the universe, think in terms of energy, frequency and vibration",status:"success",confidence:91,createdAt:new Date(Date.now()-144e5).toISOString(),completedAt:new Date(Date.now()-108e5).toISOString()},{id:"c4",taskId:"task-004",taskTitle:"Design user onboarding flow",advisorId:"steve-jobs",advisorName:"Steve Jobs",advisorDivision:"Innovation & Technology",advisorIcon:"=\xa1",wisdom:"Design is not just what it looks like and feels like. Design is how it works",status:"success",confidence:96,createdAt:new Date(Date.now()-216e5).toISOString(),completedAt:new Date(Date.now()-18e6).toISOString()},{id:"c5",taskId:"task-005",taskTitle:"Handle customer escalation",advisorId:"machiavelli",advisorName:"Niccol\xf2 Machiavelli",advisorDivision:"Divine Council",advisorIcon:"\xa1",wisdom:"It is better to be feared than loved, if you cannot be both",status:"failed",confidence:72,createdAt:new Date(Date.now()-288e5).toISOString(),completedAt:new Date(Date.now()-252e5).toISOString()},{id:"c6",taskId:"task-006",taskTitle:"Write marketing copy for launch",advisorId:"shakespeare",advisorName:"William Shakespeare",advisorDivision:"Art & Communication",advisorIcon:"<\xa8",wisdom:"Brevity is the soul of wit",status:"success",confidence:89,createdAt:new Date(Date.now()-36e6).toISOString(),completedAt:new Date(Date.now()-324e5).toISOString()},{id:"c7",taskId:"task-007",taskTitle:"Lead team standup meeting",advisorId:"churchill",advisorName:"Winston Churchill",advisorDivision:"Leadership & Management",advisorIcon:"=Q",wisdom:"Success is not final, failure is not fatal: it is the courage to continue that counts",status:"success",confidence:93,createdAt:new Date(Date.now()-432e5).toISOString(),completedAt:new Date(Date.now()-396e5).toISOString()},{id:"c8",taskId:"task-008",taskTitle:"Architect microservices migration",advisorId:"aristotle",advisorName:"Aristotle",advisorDivision:"Strategy & Philosophy",advisorIcon:"<\xaf",wisdom:"The whole is greater than the sum of its parts",status:"in_progress",confidence:85,createdAt:new Date(Date.now()-9e5).toISOString()}],o=[{advisorId:"sun-tzu",advisorName:"Sun Tzu",division:"Divine Council",divisionIcon:"\xa1",consultationCount:234,successRate:94,avgConfidence:91,topWisdom:"Know yourself and know your enemy"},{advisorId:"da-vinci",advisorName:"Leonardo da Vinci",division:"Innovation & Technology",divisionIcon:"=\xa1",consultationCount:189,successRate:92,avgConfidence:88,topWisdom:"Simplicity is the ultimate sophistication"},{advisorId:"machiavelli",advisorName:"Niccol\xf2 Machiavelli",division:"Divine Council",divisionIcon:"\xa1",consultationCount:156,successRate:87,avgConfidence:85,topWisdom:"The end justifies the means"},{advisorId:"steve-jobs",advisorName:"Steve Jobs",division:"Innovation & Technology",divisionIcon:"=\xa1",consultationCount:145,successRate:96,avgConfidence:93,topWisdom:"Stay hungry, stay foolish"},{advisorId:"churchill",advisorName:"Winston Churchill",division:"Leadership & Management",divisionIcon:"=Q",consultationCount:128,successRate:91,avgConfidence:89,topWisdom:"Never give in, never give in, never, never, never"},{advisorId:"aristotle",advisorName:"Aristotle",division:"Strategy & Philosophy",divisionIcon:"<\xaf",consultationCount:112,successRate:89,avgConfidence:87,topWisdom:"Excellence is not an act, but a habit"},{advisorId:"shakespeare",advisorName:"William Shakespeare",division:"Art & Communication",divisionIcon:"<\xa8",consultationCount:98,successRate:93,avgConfidence:90,topWisdom:"All the world is a stage"},{advisorId:"nikola-tesla",advisorName:"Nikola Tesla",division:"Innovation & Technology",divisionIcon:"=\xa1",consultationCount:87,successRate:90,avgConfidence:86,topWisdom:"The present is theirs; the future is mine"}],n=[{divisionId:"divine-council",divisionName:"Divine Council",divisionIcon:"\xa1",color:"#F59E0B",consultationCount:420,successRate:92,avgResponseTime:1.1},{divisionId:"innovation-technology",divisionName:"Innovation & Technology",divisionIcon:"=\xa1",color:"#3B82F6",consultationCount:380,successRate:94,avgResponseTime:1.3},{divisionId:"leadership-management",divisionName:"Leadership & Management",divisionIcon:"=Q",color:"#8B5CF6",consultationCount:290,successRate:89,avgResponseTime:1.5},{divisionId:"strategy-philosophy",divisionName:"Strategy & Philosophy",divisionIcon:"<\xaf",color:"#EF4444",consultationCount:250,successRate:87,avgResponseTime:1.8},{divisionId:"art-communication",divisionName:"Art & Communication",divisionIcon:"<\xa8",color:"#10B981",consultationCount:210,successRate:91,avgResponseTime:1.2}],r=[{id:"a1",type:"consultation_completed",message:"Da Vinci completed consultation for Deploy Miyabi Web API v2.1",timestamp:new Date(Date.now()-3e5).toISOString(),metadata:{advisorName:"Leonardo da Vinci",taskTitle:"Deploy Miyabi Web API v2.1",status:"success",divisionIcon:"=\xa1"}},{id:"a2",type:"consultation_started",message:"Sun Tzu started consulting on Resolve merge conflict in feature/auth",timestamp:new Date(Date.now()-18e5).toISOString(),metadata:{advisorName:"Sun Tzu",taskTitle:"Resolve merge conflict in feature/auth",divisionIcon:"\xa1"}},{id:"a3",type:"agent_online",message:"CodeGenAgent came online",timestamp:new Date(Date.now()-27e5).toISOString()},{id:"a4",type:"wisdom_applied",message:'Applied "Simplicity is the ultimate sophistication" to API redesign',timestamp:new Date(Date.now()-36e5).toISOString(),metadata:{advisorName:"Leonardo da Vinci",divisionIcon:"=\xa1"}},{id:"a5",type:"consultation_completed",message:"Nikola Tesla optimized database query performance",timestamp:new Date(Date.now()-72e5).toISOString(),metadata:{advisorName:"Nikola Tesla",taskTitle:"Optimize database query performance",status:"success",divisionIcon:"=\xa1"}},{id:"a6",type:"task_created",message:"New task: Architect microservices migration",timestamp:new Date(Date.now()-9e6).toISOString(),metadata:{taskTitle:"Architect microservices migration"}},{id:"a7",type:"consultation_completed",message:"Steve Jobs designed user onboarding flow",timestamp:new Date(Date.now()-108e5).toISOString(),metadata:{advisorName:"Steve Jobs",taskTitle:"Design user onboarding flow",status:"success",divisionIcon:"=\xa1"}},{id:"a8",type:"agent_offline",message:"AnalyticsAgent went offline for maintenance",timestamp:new Date(Date.now()-144e5).toISOString()}];function c(e){let t=new Date,i=new Date(e),s=t.getTime()-i.getTime(),a=Math.floor(s/6e4),o=Math.floor(s/36e5);return a<1?"Just now":a<60?"".concat(a,"m ago"):o<24?"".concat(o,"h ago"):"".concat(Math.floor(s/864e5),"d ago")}},9116:function(e,t,i){i.d(t,{I8:function(){return r},x1:function(){return n}}),i(484);let s={baseUrl:"https://fvqrv46xg6ym6if5s6l2wljm7u0ogqlh.lambda-url.us-west-2.on.aws/api/v1",timeout:3e4,retry:{maxRetries:3,baseDelay:1e3,maxDelay:1e4}};class a{static getAccessToken(){return localStorage.getItem(this.ACCESS_TOKEN_KEY)}static setAccessToken(e){localStorage.setItem(this.ACCESS_TOKEN_KEY,e)}static getRefreshToken(){return localStorage.getItem(this.REFRESH_TOKEN_KEY)}static setRefreshToken(e){localStorage.setItem(this.REFRESH_TOKEN_KEY,e)}static clearTokens(){localStorage.removeItem(this.ACCESS_TOKEN_KEY),localStorage.removeItem(this.REFRESH_TOKEN_KEY)}static isTokenExpired(e){try{let t=JSON.parse(atob(e.split(".")[1]));return 1e3*t.exp<Date.now()}catch(e){return!0}}}a.ACCESS_TOKEN_KEY="miyabi_access_token",a.REFRESH_TOKEN_KEY="miyabi_refresh_token";class o{addRequestInterceptor(e){this.requestInterceptors.push(e)}addResponseInterceptor(e){this.responseInterceptors.push(e)}async authInterceptor(e){let t=a.getAccessToken();return t&&!a.isTokenExpired(t)&&(e.headers={...e.headers,Authorization:"Bearer ".concat(t)}),e}async applyRequestInterceptors(e){let t=e;for(let e of this.requestInterceptors)t=await e(t);return t}async applyResponseInterceptors(e){let t=e;for(let e of this.responseInterceptors)t=await e(t);return t}async sleep(e){return new Promise(t=>setTimeout(t,e))}calculateDelay(e){return Math.min(this.retryConfig.baseDelay*Math.pow(2,e)+1e3*Math.random(),this.retryConfig.maxDelay)}shouldRetry(e,t){return!(t>=this.retryConfig.maxRetries)&&(0===e||e>=500&&e<600)}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s="".concat(this.baseUrl).concat(e),o={...t,headers:{"Content-Type":"application/json",...t.headers}};o=await this.applyRequestInterceptors(o);try{let n=await fetch(s,o);if(n=await this.applyResponseInterceptors(n),401===n.status){if(await this.refreshToken())return this.request(e,t,i);throw a.clearTokens(),this.createError(n,"Authentication required")}if(!n.ok){if(this.shouldRetry(n.status,i))return await this.sleep(this.calculateDelay(i)),this.request(e,t,i+1);throw await this.parseError(n)}let r=await n.text();if(!r)return{};return JSON.parse(r)}catch(s){if(s instanceof TypeError&&this.shouldRetry(0,i))return await this.sleep(this.calculateDelay(i)),this.request(e,t,i+1);throw s}}async refreshToken(){let e=a.getRefreshToken();if(!e)return!1;try{let t=await fetch("".concat(this.baseUrl,"/auth/refresh"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh_token:e})});if(!t.ok)return!1;let i=await t.json();return a.setAccessToken(i.access_token),i.refresh_token&&a.setRefreshToken(i.refresh_token),!0}catch(e){return!1}}createError(e,t){return{status:e.status,message:t,code:"API_ERROR"}}async parseError(e){try{let t=await e.json();return{status:e.status,message:t.message||t.error||e.statusText,code:t.code,details:t.details}}catch(t){return{status:e.status,message:e.statusText,code:"PARSE_ERROR"}}}async get(e,t){let i=t?"".concat(e,"?").concat(new URLSearchParams(t).toString()):e;return this.request(i,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}constructor(e=s){this.requestInterceptors=[],this.responseInterceptors=[],this.baseUrl=e.baseUrl,this.retryConfig=e.retry,this.addRequestInterceptor(this.authInterceptor.bind(this))}}let n=new o,r={setTokens:(e,t)=>{a.setAccessToken(e),t&&a.setRefreshToken(t)},clearTokens:()=>a.clearTokens(),isAuthenticated:()=>{let e=a.getAccessToken();return null!==e&&!a.isTokenExpired(e)},getAccessToken:()=>a.getAccessToken()}}}]);
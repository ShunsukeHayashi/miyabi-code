# ğŸ”— tmux Agent-to-Agent (A2A) Communication Protocol

**Version**: 2.0.0  
**Status**: âœ… Active  
**Last Updated**: 2025-12-06  
**Protocol ID**: MIYABI-A2A-P2.0

---

## ğŸ“– æ¦‚è¦

tmux A2A Communication Protocolã¯ã€Miyabiãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆç’°å¢ƒã«ãŠã„ã¦ã€è¤‡æ•°ã®AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“ã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ»éåŒæœŸã®é€šä¿¡ã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã®æ¨™æº–ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã§ã™ã€‚

### è¨­è¨ˆåŸå‰‡

1. **ä¿¡é ¼æ€§**: æ°¸ç¶šçš„ãƒšã‚¤ãƒ³IDï¼ˆ`%N`ï¼‰ã«ã‚ˆã‚‹100%ç¢ºå®Ÿãªã‚¿ãƒ¼ã‚²ãƒ†ã‚£ãƒ³ã‚°
2. **ä¸€è²«æ€§**: P0.2ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã«ã‚ˆã‚‹å®‰å®šã—ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é…ä¿¡
3. **PUSHå„ªå…ˆ**: ãƒ¯ãƒ¼ã‚«ãƒ¼ã‹ã‚‰ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼ã¸ã®è‡ªç™ºçš„å ±å‘Š
4. **è¿½è·¡å¯èƒ½æ€§**: æ§‹é€ åŒ–ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«ã‚ˆã‚‹ç›£æŸ»ãƒˆãƒ¬ã‚¤ãƒ«
5. **å›å¾©å¯èƒ½æ€§**: éšœå®³ç™ºç”Ÿæ™‚ã®è‡ªå‹•å¾©æ—§ãƒ¡ã‚«ãƒ‹ã‚ºãƒ 

---

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Command Center (Claude Chat)                  â”‚
â”‚                    Guardian â†â†’ Operator Protocol                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       A2A Communication Layer                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Synchronous   â”‚  â”‚  Asynchronous   â”‚  â”‚   Broadcast     â”‚ â”‚
â”‚  â”‚  tmux send-keys â”‚  â”‚   miyabi-a2a    â”‚  â”‚ tmux broadcast  â”‚ â”‚
â”‚  â”‚   (Real-time)   â”‚  â”‚  (Persistent)   â”‚  â”‚  (All panes)    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼                       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Conductor    â”‚       â”‚  Worker Pool  â”‚       â”‚   Monitor     â”‚
â”‚  Pane (%18)   â”‚â—„â”€â”€â”€â”€â”€â”€â”‚  Panes (%19+) â”‚â”€â”€â”€â”€â”€â”€â–ºâ”‚   Pane        â”‚
â”‚  ã—ãã‚‹ã‚“      â”‚ PUSH  â”‚  ã‚«ã‚¨ãƒ‡,ã‚µã‚¯ãƒ© â”‚       â”‚   ãƒ­ã‚°é›†ç´„     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ã‚»ãƒƒã‚·ãƒ§ãƒ³æ§‹æˆï¼ˆç¾åœ¨ã®çŠ¶æ…‹ï¼‰

| ã‚»ãƒƒã‚·ãƒ§ãƒ³ | Windows | ç”¨é€” | ä¸»è¦ãƒšã‚¤ãƒ³ |
|-----------|---------|------|-----------|
| miyabi-main | 10 | é–‹ç™ºãƒ»Agentçµ±åˆ | %0-%4, %18-%23 |
| salon-society | 3 | Salon Societyé–‹ç™º | %42-%51 |
| world-society | 10 | Worldæ§‹æƒ³è¨­è¨ˆ | %24-%33 |
| omakaseai | 1 | ãŠã¾ã‹ã›AIé–‹ç™º | %53-%58 |

---

## ğŸ“ P0.2 æ°¸ç¶šçš„ãƒšã‚¤ãƒ³ã‚¿ãƒ¼ã‚²ãƒ†ã‚£ãƒ³ã‚°

### ğŸš¨ çµ¶å¯¾ãƒ«ãƒ¼ãƒ«ï¼šæ°¸ç¶šIDã‚’ä½¿ç”¨

```bash
# âœ… æ­£ã—ã„æ–¹æ³• - æ°¸ç¶šãƒšã‚¤ãƒ³IDä½¿ç”¨
tmux send-keys -t %18 'ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸' && sleep 0.5 && tmux send-keys -t %18 Enter

# âŒ å±é™ºãªæ–¹æ³• - ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä½¿ç”¨ï¼ˆèª¤é…ä¿¡ã®å±é™ºï¼‰
tmux send-keys -t miyabi-main:6.0 'ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸'  # çµ¶å¯¾ç¦æ­¢ï¼
```

### ãªãœæ°¸ç¶šIDãŒå¿…è¦ã‹

```bash
# ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã¯ä¿¡é ¼ã§ããªã„
$ tmux display-message -t %18 -p "Pane %18 = #{pane_id}"
Pane %18 = %18  # âœ… æ­£ç¢º

$ tmux display-message -t miyabi-main:6.0 -p "Index 6.0 = #{pane_id}"
Index 6.0 = %22  # âŒ %18ã§ã¯ãªã%22ã‚’æŒ‡ã™ï¼
```

### IDåå‰ç©ºé–“

| ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ | ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ | ä¾‹ | å¯¿å‘½ |
|---------------|-------------|-----|------|
| `$N` | ã‚»ãƒƒã‚·ãƒ§ãƒ³ | `$0`, `$1` | tmuxã‚µãƒ¼ãƒãƒ¼ç¨¼åƒä¸­ |
| `@N` | ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ | `@0`, `@12` | tmuxã‚µãƒ¼ãƒãƒ¼ç¨¼åƒä¸­ |
| `%N` | ãƒšã‚¤ãƒ³ | `%18`, `%42` | tmuxã‚µãƒ¼ãƒãƒ¼ç¨¼åƒä¸­ |

### ãƒšã‚¤ãƒ³IDå–å¾—æ–¹æ³•

```bash
# å…¨ãƒšã‚¤ãƒ³ä¸€è¦§ï¼ˆIDä»˜ãï¼‰
tmux list-panes -a -F "#{session_name}:#{window_index}.#{pane_index} #{pane_id} #{pane_current_command}"

# ç¾åœ¨ã®ãƒšã‚¤ãƒ³IDå–å¾—
tmux display-message -p "#{pane_id}"

# ã‚»ãƒƒã‚·ãƒ§ãƒ³å†…ã®å…¨ãƒšã‚¤ãƒ³ID
tmux list-panes -t miyabi-main -a -F "#{pane_id}: #{pane_current_command}"
```

---

## ğŸ“¨ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

### åŸºæœ¬æ§‹é€ 

```
[é€ä¿¡è€…] {ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹}: {è©³ç´°å†…å®¹}
```

### ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚¿ã‚¤ãƒ—

| ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ | æ—¥æœ¬èª | ç”¨é€” |
|-----------|--------|------|
| `å®Œäº†` / `Complete` | ã‚¿ã‚¹ã‚¯å®Œäº† | å‡¦ç†æˆåŠŸæ™‚ |
| `é€²è¡Œä¸­` / `Working` | ä½œæ¥­ä¸­ | é•·æ™‚é–“å‡¦ç†ä¸­ |
| `ã‚¨ãƒ©ãƒ¼` / `Error` | ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿ | éšœå®³æ™‚ |
| `å¾…æ©Ÿ` / `Waiting` | ä¾å­˜å¾…ã¡ | ãƒ–ãƒ­ãƒƒã‚«ãƒ¼å­˜åœ¨æ™‚ |
| `é–‹å§‹` / `Started` | å‡¦ç†é–‹å§‹ | ã‚¿ã‚¹ã‚¯ç€æ‰‹æ™‚ |
| `ç¢ºèª` / `Confirm` | ç¢ºèªè¦æ±‚ | Guardianæ‰¿èªè¦æ±‚ |

### ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

#### 1. ã‚¿ã‚¹ã‚¯å®Œäº†å ±å‘Š
```bash
tmux send-keys -t %18 '[ã‚«ã‚¨ãƒ‡] å®Œäº†: Issue #270 å®Ÿè£…å®Œäº† (15 files changed)' && sleep 0.5 && tmux send-keys -t %18 Enter
```

#### 2. ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¾é ¼ï¼ˆAgenté–“ãƒªãƒ¬ãƒ¼ï¼‰
```bash
tmux send-keys -t %18 '[ã‚«ã‚¨ãƒ‡â†’ã‚µã‚¯ãƒ©] ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¾é ¼: PR #123 ready for review' && sleep 0.5 && tmux send-keys -t %18 Enter
```

#### 3. ã‚¨ãƒ©ãƒ¼å ±å‘Š
```bash
tmux send-keys -t %18 '[ãƒœã‚¿ãƒ³] ã‚¨ãƒ©ãƒ¼: Deploy failed - connection timeout (retry 2/3)' && sleep 0.5 && tmux send-keys -t %18 Enter
```

#### 4. é€²æ—å ±å‘Š
```bash
tmux send-keys -t %18 '[ã‚«ã‚¨ãƒ‡] é€²è¡Œä¸­: 3/5 files implemented (60%)' && sleep 0.5 && tmux send-keys -t %18 Enter
```

#### 5. æ‰¿èªè¦æ±‚
```bash
tmux send-keys -t %18 '[ãƒœã‚¿ãƒ³] ç¢ºèª: æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤æº–å‚™å®Œäº†ã€‚å®Ÿè¡Œè¨±å¯ã‚’è¦æ±‚ã—ã¾ã™ã€‚' && sleep 0.5 && tmux send-keys -t %18 Enter
```

#### 6. ä¾å­˜å¾…æ©Ÿ
```bash
tmux send-keys -t %18 '[ã‚µã‚¯ãƒ©] å¾…æ©Ÿ: ã‚«ã‚¨ãƒ‡ã®PRå®Œäº†å¾…ã¡ (Issue #270)' && sleep 0.5 && tmux send-keys -t %18 Enter
```

---

## ğŸ”„ é€šä¿¡ãƒ‘ã‚¿ãƒ¼ãƒ³

### PUSHå‹é€šä¿¡ï¼ˆå¿…é ˆï¼‰

```
âœ… ãƒ¯ãƒ¼ã‚«ãƒ¼ â†’ ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼ï¼ˆPUSHï¼‰
   ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒè‡ªç™ºçš„ã«Conductorãƒšã‚¤ãƒ³ã«å ±å‘Š

âŒ ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼ â†’ ãƒ¯ãƒ¼ã‚«ãƒ¼ï¼ˆPULLï¼‰
   ConductorãŒãƒ¯ãƒ¼ã‚«ãƒ¼ã‚’ãƒãƒ¼ãƒªãƒ³ã‚°ã™ã‚‹ã“ã¨ã¯ç¦æ­¢
```

#### PUSHé€šä¿¡ãƒ•ãƒ­ãƒ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    è‡ªç™ºçš„å ±å‘Š    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ã‚«ã‚¨ãƒ‡   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚  ã—ãã‚‹ã‚“    â”‚
â”‚  %19    â”‚    [ã‚«ã‚¨ãƒ‡] å®Œäº†  â”‚   %18       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼ é›†ç´„ãƒ»åˆ¤æ–­
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ã‚µã‚¯ãƒ©   â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚  ã—ãã‚‹ã‚“    â”‚
â”‚  %20    â”‚   ã‚¿ã‚¹ã‚¯å‰²å½“       â”‚   %18       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### é€šä¿¡ã‚¿ã‚¤ãƒ—é¸æŠ

| ã‚·ãƒŠãƒªã‚ª | æ–¹å¼ | ç†ç”± |
|---------|------|------|
| ã‚¿ã‚¹ã‚¯å®Œäº†å ±å‘Š | PUSH | å³æ™‚æ€§ãƒ»è‡ªç™ºæ€§ |
| ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿé€šçŸ¥ | PUSH | ç·Šæ€¥æ€§ |
| ã‚¿ã‚¹ã‚¯å‰²å½“ | Direct | Conductorâ†’Worker |
| é€²æ—ç¢ºèª | PUSH | ãƒ¯ãƒ¼ã‚«ãƒ¼ãŒå®šæœŸå ±å‘Š |
| ã‚·ã‚¹ãƒ†ãƒ ç›£è¦– | Capture | éä¾µå…¥å‹ |

---

## ğŸ“¡ é€šä¿¡ãƒãƒ£ãƒãƒ«

### 1. åŒæœŸé€šä¿¡ï¼ˆtmux send-keysï¼‰

**ç”¨é€”**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã€å³æ™‚å®Ÿè¡Œã€ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–æ“ä½œ

```bash
# P0.2æº–æ‹ ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆå¿…é ˆï¼‰
tmux send-keys -t %18 'message' && sleep 0.5 && tmux send-keys -t %18 Enter
```

**ç‰¹å¾´**:
- å³æ™‚é…ä¿¡
- ç¢ºå®Ÿãªå®Ÿè¡Œ
- `sleep 0.5`ã«ã‚ˆã‚‹å®‰å®šæ€§ç¢ºä¿

### 2. éåŒæœŸé€šä¿¡ï¼ˆmiyabi-a2a CLIï¼‰

**ç”¨é€”**: ç›£æŸ»ãƒˆãƒ¬ã‚¤ãƒ«ã€ãƒªãƒˆãƒ©ã‚¤å¯èƒ½ã‚¿ã‚¹ã‚¯ã€è¤‡é›‘ãªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

```bash
# ã‚¿ã‚¹ã‚¯ä½œæˆ
miyabi a2a create \
  --title "Implement feature X" \
  --task-type codegen \
  --priority 4 \
  --context "feature-x-branch"

# ã‚¿ã‚¹ã‚¯ä¸€è¦§
miyabi a2a list --status submitted

# ã‚¿ã‚¹ã‚¯å–å¾—
miyabi a2a get --id 123

# ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°
miyabi a2a update --id 123 --status working
miyabi a2a update --id 123 --status completed
```

**ã‚¿ã‚¹ã‚¯ã‚¿ã‚¤ãƒ—**:
- `codegen`: ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ
- `review`: ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼
- `testing`: ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
- `deployment`: ãƒ‡ãƒ—ãƒ­ã‚¤
- `documentation`: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ
- `analysis`: åˆ†æã‚¿ã‚¹ã‚¯

**å„ªå…ˆåº¦**: 0-5ï¼ˆ5=æœ€é«˜å„ªå…ˆåº¦ï¼‰

**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«**:
```
submitted â†’ working â†’ completed
                   â†’ failed
                   â†’ cancelled
```

### 3. ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆ

**ç”¨é€”**: å…¨ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ»å…¨ãƒšã‚¤ãƒ³ã¸ã®ä¸€æ–‰é€šçŸ¥

```bash
# å…¨ãƒšã‚¤ãƒ³ã«ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆ
for pane in %18 %19 %20 %21 %22 %23; do
  tmux send-keys -t $pane 'âš¡ ã‚·ã‚¹ãƒ†ãƒ é€šçŸ¥: å…¨Agentåœæ­¢' && sleep 0.5 && tmux send-keys -t $pane Enter
done
```

**MCPã‚µãƒ¼ãƒãƒ¼çµŒç”±**:
```typescript
// miyabi-tmux MCPã‚’ä½¿ç”¨
await tmux_broadcast({
  message: "Deploy completed successfully",
  from_source: "ãƒœã‚¿ãƒ³"
});
```

---

## ğŸ”€ ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ãƒ‘ã‚¿ãƒ¼ãƒ³

éåŒæœŸã®æ°¸ç¶šæ€§ã¨åŒæœŸã®å³æ™‚æ€§ã‚’çµ„ã¿åˆã‚ã›ï¼š

```bash
# 1. æ°¸ç¶šã‚¿ã‚¹ã‚¯ä½œæˆ
TASK_ID=$(miyabi a2a create --title "Critical hotfix" --task-type codegen --priority 5)

# 2. å³æ™‚tmuxé€šçŸ¥
tmux send-keys -t %19 "ğŸš¨ Critical task assigned: $TASK_ID - start immediately" && sleep 0.5 && tmux send-keys -t %19 Enter

# 3. ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°
miyabi a2a update --id $TASK_ID --status working

# 4. å®Œäº†æ™‚ã®å ±å‘Šã¨ã‚¿ã‚¹ã‚¯æ›´æ–°
tmux send-keys -t %18 "[ã‚«ã‚¨ãƒ‡] å®Œäº†: Task $TASK_ID hotfixå®Ÿè£…å®Œäº†" && sleep 0.5 && tmux send-keys -t %18 Enter
miyabi a2a update --id $TASK_ID --status completed
```

---

## ğŸ¤– ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆç™»éŒ²ãƒ»ç™ºè¦‹

### æ¨™æº–Agenté…ç½®ï¼ˆmiyabi-main:6ï¼‰

| ãƒšã‚¤ãƒ³ID | Agentå | å½¹å‰² |
|---------|---------|------|
| %18 | ã—ãã‚‹ã‚“ | Conductor/ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼ |
| %19 | ã‚«ã‚¨ãƒ‡ | CodeGen/å®Ÿè£… |
| %20 | ã‚µã‚¯ãƒ© | Review/å“è³ªä¿è¨¼ |
| %21 | ãƒ„ãƒã‚­ | PR/ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆ |
| %22 | ãƒœã‚¿ãƒ³ | Deploy/ãƒ‡ãƒ—ãƒ­ã‚¤ |
| %23 | ã¿ã¤ã‘ã‚‹ã‚“ | Issue/èª²é¡Œç®¡ç† |

### ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆç™»éŒ²ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

```bash
#!/bin/bash
# register_agent.sh

AGENT_NAME=$1
PANE_ID=$2
SESSION=${3:-miyabi-main}

# ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆç™»éŒ²ãƒ•ã‚¡ã‚¤ãƒ«ã«è¿½è¨˜
echo "$AGENT_NAME:$PANE_ID:$SESSION:$(date -Iseconds)" >> ~/.miyabi/agents/registry.csv

# ç™»éŒ²é€šçŸ¥
tmux send-keys -t %18 "[System] Agent registered: $AGENT_NAME at $PANE_ID" && sleep 0.5 && tmux send-keys -t %18 Enter
```

### ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆç™ºè¦‹

```bash
#!/bin/bash
# discover_agents.sh

echo "=== Active Agents ==="
while IFS=: read -r name pane session timestamp; do
  # ãƒšã‚¤ãƒ³ãŒå­˜åœ¨ã™ã‚‹ã‹ç¢ºèª
  if tmux list-panes -a -F "#{pane_id}" | grep -q "$pane"; then
    echo "âœ… $name ($pane) - $session"
  else
    echo "âŒ $name ($pane) - OFFLINE"
  fi
done < ~/.miyabi/agents/registry.csv
```

---

## ğŸ“Š ç›£è¦–ãƒ»ãƒ‡ãƒãƒƒã‚°

### ãƒšã‚¤ãƒ³å‡ºåŠ›ã‚­ãƒ£ãƒ—ãƒãƒ£

```bash
# æœ€æ–°20è¡Œã‚’å–å¾—
tmux capture-pane -t %18 -p | tail -20

# å…¨å‡ºåŠ›ã‚’å–å¾—
tmux capture-pane -t %18 -p -S -

# ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜
tmux capture-pane -t %18 -p > /tmp/pane_18_capture.txt
```

### å…¨ãƒšã‚¤ãƒ³ç›£è¦–

```bash
#!/bin/bash
# monitor_all_panes.sh

PANES=(%18 %19 %20 %21 %22 %23)

for pane in "${PANES[@]}"; do
  echo "========== Pane $pane =========="
  tmux capture-pane -t $pane -p | tail -5
  echo ""
done
```

### ã‚¨ãƒ©ãƒ¼æ¤œç´¢

```bash
# ç‰¹å®šãƒšã‚¤ãƒ³ã§ã‚¨ãƒ©ãƒ¼æ¤œç´¢
tmux capture-pane -t %19 -p | grep -E "(error|Error|failed|panic|FAILED)"

# å…¨ãƒšã‚¤ãƒ³ã§ã‚¨ãƒ©ãƒ¼æ¤œç´¢
for pane in %18 %19 %20 %21 %22 %23; do
  errors=$(tmux capture-pane -t $pane -p | grep -E "(error|Error|failed|panic)" | wc -l)
  if [ "$errors" -gt 0 ]; then
    echo "âš ï¸ Pane $pane: $errors errors found"
  fi
done
```

### ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–ï¼ˆwatchï¼‰

```bash
# 2ç§’ã”ã¨ã«Conductorãƒšã‚¤ãƒ³ã‚’ç›£è¦–
watch -n 2 'tmux capture-pane -t %18 -p | tail -10'
```

---

## âš ï¸ ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

### å†é€ãƒ¡ã‚«ãƒ‹ã‚ºãƒ 

```bash
#!/bin/bash
# send_with_retry.sh

send_message() {
  local pane=$1
  local message=$2
  local max_retries=${3:-3}
  local retry=0
  
  while [ $retry -lt $max_retries ]; do
    if tmux send-keys -t $pane "$message" 2>/dev/null && \
       sleep 0.5 && \
       tmux send-keys -t $pane Enter 2>/dev/null; then
      return 0
    fi
    
    retry=$((retry + 1))
    echo "Retry $retry/$max_retries for pane $pane"
    sleep 1
  done
  
  echo "âŒ Failed to send to $pane after $max_retries retries"
  return 1
}

# ä½¿ç”¨ä¾‹
send_message %18 "[ã‚«ã‚¨ãƒ‡] å®Œäº†: ã‚¿ã‚¹ã‚¯å®Ÿè£…å®Œäº†" 3
```

### ãƒšã‚¤ãƒ³å­˜åœ¨ç¢ºèª

```bash
#!/bin/bash
# verify_pane.sh

pane_exists() {
  local pane=$1
  tmux list-panes -a -F "#{pane_id}" | grep -q "^${pane}$"
}

# ä½¿ç”¨ä¾‹
if pane_exists %18; then
  tmux send-keys -t %18 'message' && sleep 0.5 && tmux send-keys -t %18 Enter
else
  echo "âŒ Pane %18 not found!"
fi
```

### éšœå®³å¾©æ—§ãƒ•ãƒ­ãƒ¼

```
1. ãƒšã‚¤ãƒ³æ¶ˆå¤±æ¤œå‡º
   â†“
2. Agentç™»éŒ²ç°¿ã‹ã‚‰è¨­å®šå–å¾—
   â†“
3. æ–°è¦ãƒšã‚¤ãƒ³ä½œæˆ
   â†“
4. Agentå†èµ·å‹•
   â†“
5. æ–°ãƒšã‚¤ãƒ³IDã§ç™»éŒ²æ›´æ–°
   â†“
6. ä»–Agentã«é€šçŸ¥
```

---

## ğŸ“‹ ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### âœ… Doï¼ˆæ¨å¥¨ï¼‰

1. **æ°¸ç¶šIDã‚’å¸¸ã«ä½¿ç”¨**
   ```bash
   tmux send-keys -t %18 'message' && sleep 0.5 && tmux send-keys -t %18 Enter
   ```

2. **PUSHå‹å ±å‘Šã‚’å¾¹åº•**
   ```bash
   # ãƒ¯ãƒ¼ã‚«ãƒ¼ãŒConductorã«è‡ªç™ºå ±å‘Š
   tmux send-keys -t %18 '[ã‚«ã‚¨ãƒ‡] å®Œäº†: å®Ÿè£…çµ‚äº†' && ...
   ```

3. **æ§‹é€ åŒ–ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä½¿ç”¨**
   ```
   [Agentå] ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: è©³ç´°å†…å®¹
   ```

4. **é©åˆ‡ãªã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’é¸æŠ**
   - ä½œæ¥­é–‹å§‹: `é–‹å§‹`
   - å‡¦ç†ä¸­: `é€²è¡Œä¸­`
   - æˆåŠŸ: `å®Œäº†`
   - å¤±æ•—: `ã‚¨ãƒ©ãƒ¼`

5. **å®šæœŸçš„ãªé€²æ—å ±å‘Š**
   ```bash
   # é•·æ™‚é–“ã‚¿ã‚¹ã‚¯ã¯é€²æ—%ã‚’å ±å‘Š
   tmux send-keys -t %18 '[ã‚«ã‚¨ãƒ‡] é€²è¡Œä¸­: 60% (3/5 files)' && ...
   ```

### âŒ Don'tï¼ˆç¦æ­¢ï¼‰

1. **ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãƒ™ãƒ¼ã‚¹ã®ã‚¿ãƒ¼ã‚²ãƒ†ã‚£ãƒ³ã‚°**
   ```bash
   # çµ¶å¯¾ç¦æ­¢ï¼
   tmux send-keys -t miyabi-main:6.0 'message'
   ```

2. **sleep 0.5ã®çœç•¥**
   ```bash
   # ä¸å®‰å®šï¼
   tmux send-keys -t %18 'message' && tmux send-keys -t %18 Enter
   ```

3. **PULLå‹ãƒãƒ¼ãƒªãƒ³ã‚°**
   ```bash
   # ConductorãŒãƒ¯ãƒ¼ã‚«ãƒ¼ã‚’ç›£è¦–ã™ã‚‹ã®ã¯ç¦æ­¢
   while true; do check_worker_status; sleep 5; done
   ```

4. **éæ§‹é€ åŒ–ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸**
   ```bash
   # èª°ãŒä½•ã‚’ã—ãŸã‹ä¸æ˜
   tmux send-keys -t %18 'done' && ...
   ```

5. **ã‚¨ãƒ©ãƒ¼ã®æ¡ã‚Šã¤ã¶ã—**
   ```bash
   # ã‚¨ãƒ©ãƒ¼ã¯å¿…ãšå ±å‘Š
   tmux send-keys -t %18 'ok' 2>/dev/null  # ãƒ€ãƒ¡
   ```

---

## ğŸ› ï¸ ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

### agent_report.sh

```bash
#!/bin/bash
# æ¨™æº–çš„ãªAgentå ±å‘Šã‚¹ã‚¯ãƒªãƒ—ãƒˆ

AGENT_NAME=${1:-"Agent"}
STATUS=${2:-"å®Œäº†"}
MESSAGE=${3:-"ã‚¿ã‚¹ã‚¯å®Œäº†"}
CONDUCTOR_PANE=${4:-%18}

# P0.2æº–æ‹ é€ä¿¡
tmux send-keys -t $CONDUCTOR_PANE "[$AGENT_NAME] $STATUS: $MESSAGE" && \
  sleep 0.5 && \
  tmux send-keys -t $CONDUCTOR_PANE Enter

# ãƒ­ã‚°è¨˜éŒ²
echo "$(date -Iseconds) [$AGENT_NAME] $STATUS: $MESSAGE" >> ~/.miyabi/logs/a2a.log
```

### relay_task.sh

```bash
#!/bin/bash
# Agenté–“ã‚¿ã‚¹ã‚¯ãƒªãƒ¬ãƒ¼

FROM_AGENT=$1
TO_AGENT=$2
TO_PANE=$3
ACTION=$4
DETAIL=$5
CONDUCTOR_PANE=${6:-%18}

# ConductorçµŒç”±ã§ãƒªãƒ¬ãƒ¼ï¼ˆç›£æŸ»ãƒˆãƒ¬ã‚¤ãƒ«ï¼‰
tmux send-keys -t $CONDUCTOR_PANE "[$FROM_AGENTâ†’$TO_AGENT] $ACTION: $DETAIL" && \
  sleep 0.5 && \
  tmux send-keys -t $CONDUCTOR_PANE Enter

# å¯¾è±¡Agentã«ç›´æ¥é€ä¿¡
tmux send-keys -t $TO_PANE "$ACTION: $DETAIL (from $FROM_AGENT)" && \
  sleep 0.5 && \
  tmux send-keys -t $TO_PANE Enter
```

### health_check.sh

```bash
#!/bin/bash
# å…¨Agentãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯

declare -A AGENTS=(
  ["%18"]="ã—ãã‚‹ã‚“"
  ["%19"]="ã‚«ã‚¨ãƒ‡"
  ["%20"]="ã‚µã‚¯ãƒ©"
  ["%21"]="ãƒ„ãƒã‚­"
  ["%22"]="ãƒœã‚¿ãƒ³"
  ["%23"]="ã¿ã¤ã‘ã‚‹ã‚“"
)

echo "=== Agent Health Check $(date) ==="

for pane in "${!AGENTS[@]}"; do
  agent=${AGENTS[$pane]}
  
  if tmux list-panes -a -F "#{pane_id}" | grep -q "^${pane}$"; then
    cmd=$(tmux display-message -t $pane -p "#{pane_current_command}")
    echo "âœ… $agent ($pane): $cmd"
  else
    echo "âŒ $agent ($pane): OFFLINE"
  fi
done
```

---

## ğŸ“š å‚è€ƒè³‡æ–™

### é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- **GUARDIAN_OPERATOR_INTEGRATION.md**: Guardian-Operatorãƒ—ãƒ­ãƒˆã‚³ãƒ«
- **SESSION_MANAGEMENT_QUICK_REFERENCE.md**: ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã‚¯ã‚¤ãƒƒã‚¯ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹
- **CLAUDE.md**: MiyabiåŸºæœ¬ãƒ«ãƒ¼ãƒ«ï¼ˆP0-P3ï¼‰

### MCP Servers

- **miyabi-tmux**: tmuxã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡
- **miyabi-rules**: ãƒ«ãƒ¼ãƒ«æ¤œè¨¼ã€ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆå–å¾—
- **miyabi-github**: Issue/PRç®¡ç†

### å¤–éƒ¨ãƒªã‚½ãƒ¼ã‚¹

- [tmux Manual](https://man.openbsd.org/tmux)
- [tmux Control Mode](https://github.com/tmux/tmux/wiki/Control-Mode)

---

## ğŸ”„ ãƒãƒ¼ã‚¸ãƒ§ãƒ³å±¥æ­´

| Version | Date | Changes |
|---------|------|---------|
| 2.0.0 | 2025-12-06 | åŒ…æ‹¬çš„ãƒ—ãƒ­ãƒˆã‚³ãƒ«æ–‡æ›¸åŒ–ã€æ°¸ç¶šIDå¿…é ˆåŒ–ã€PUSHãƒ‘ã‚¿ãƒ¼ãƒ³æ˜æ–‡åŒ– |
| 1.0.0 | 2025-11-18 | åˆç‰ˆãƒªãƒªãƒ¼ã‚¹ |

---

## ğŸ“ ã‚µãƒãƒ¼ãƒˆ

è³ªå•ã‚„å•é¡ŒãŒã‚ã‚Œã°ã€Command Centerã§ï¼š

```
Guardian: "A2Aé€šä¿¡ã§å•é¡ŒãŒç™ºç”Ÿã—ãŸ"
Operator: è¨ºæ–­å®Ÿè¡Œ â†’ å•é¡Œç‰¹å®š â†’ è§£æ±ºç­–æç¤º
```

---

**Protocol Status**: âœ… Active and Enforced

å…¨ã¦ã®Agentã¯ã“ã®ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã«æº–æ‹ ã—ã¦é€šä¿¡ã‚’è¡Œã£ã¦ãã ã•ã„ã€‚

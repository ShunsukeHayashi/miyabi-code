# 報告プロトコル - Claude Code 標準テンプレート

## 目的

このテンプレートは、複数のClaude Codeセッション（特にWorktreeベースの並列実行環境）において、どのAgentがどの作業を担当したかを明確にするための標準報告形式です。

## 使用場面

- セッション終了時の作業サマリー
- 重要なマイルストーン達成時
- Issue処理完了時
- Agent実行結果の報告
- エラー・問題発生時の報告

## テンプレート

```markdown
## 📋 Claude Code からの作業報告

**報告者**: Claude Code (AI Assistant)
**報告日時**: YYYY-MM-DD
**セッション**: [セッション名/タスク名]
**Worktree**: [Worktree名（並列実行時のみ）]
**Issue番号**: #XXX（該当する場合）

---

### ✅ 完了した作業

#### 1. [作業項目名]
**担当**: Claude Code
**実施内容**:
- 作業内容の詳細（箇条書き）
- 実施した変更
- 作成/修正したファイル

#### 2. [作業項目名]
**実行者**: Claude Code（ユーザー指示のもと）
**実施内容**:
- 実行内容

---

### 📊 変更統計

**コミット情報**:
- **コミットID**: [hash]
- **変更ファイル数**: N ファイル
- **追加行数**: +N行
- **削除行数**: -N行

**主な変更ファイル**:
1. `path/to/file1.rs` - [変更内容]
2. `path/to/file2.md` - [変更内容]

---

### 🎯 動作確認結果

**確認者**: Claude Code

✅ [確認項目1] - 成功
✅ [確認項目2] - 成功
⚠️ [注意が必要な項目] - 条件付き成功
❌ [失敗した項目] - 失敗（該当する場合）

**テスト結果**（該当する場合）:
- `cargo test`: [結果]
- `cargo clippy`: [結果]
- ビルド: [結果]

---

### ⚠️ 注意事項

**報告者**: Claude Code

1. **[注意点カテゴリ1]**
   - 詳細な注意点
   - 影響範囲

2. **[注意点カテゴリ2]**
   - 詳細な注意点
   - 推奨される対応

---

### 🚀 次のステップ（提案）

**提案者**: Claude Code

#### 即座に実施可能
1. [提案1] - 優先度: 高
2. [提案2] - 優先度: 中

#### 今後の検討事項
1. [長期的な提案1]
2. [長期的な提案2]

---

**報告終了**
Claude Code
```

## 報告ルール（必須遵守）

### 1. 報告者の明記
- 全ての報告で「Claude Code」として名乗る
- 並列実行時はWorktree名も記載（例: `Claude Code (Worktree: issue-270)`）

### 2. 担当者の明記
- 各作業項目に「担当: Claude Code」または「実行者: Claude Code」を記載
- ユーザー指示のもと実行した場合は「実行者: Claude Code（ユーザー指示のもと）」

### 3. 確認者の明記
- 動作確認結果に「確認者: Claude Code」を記載
- テスト実行結果も含める

### 4. 提案者の明記
- 次のステップ提案に「提案者: Claude Code」を記載
- 提案は実行せず、ユーザーの指示を待つ

### 5. 報告終了の明記
- 報告の最後に「**報告終了** Claude Code」を記載

## 並列実行時の拡張記法

### Worktree識別

複数のWorktreeで並列実行される場合、以下のように識別情報を追加：

```markdown
**報告者**: Claude Code (AI Assistant)
**Worktree**: issue-270
**ブランチ**: feature/issue-270-optimization
**セッションID**: [UUID または タイムスタンプ]
```

### Agent種別の明記

CoordinatorAgent以外のAgentが報告する場合：

```markdown
**報告者**: Claude Code (AI Assistant)
**Agent種別**: CodeGenAgent
**Worktree**: issue-271
```

### 依存関係の記載

他のWorktreeやTaskに依存がある場合：

```markdown
### 🔗 依存関係

**報告者**: Claude Code

- **依存先**: Issue #269 (Worktree: issue-269)
- **依存理由**: Task #271-2 は Task #269-4 の完了を待つ必要がある
- **ステータス**: 待機中
```

## エラー報告の特殊形式

エラーや問題発生時は以下の形式を使用：

```markdown
## 🚨 Claude Code からのエラー報告

**報告者**: Claude Code (AI Assistant)
**報告日時**: YYYY-MM-DD HH:MM:SS
**セッション**: [セッション名/タスク名]
**エラー種別**: [ビルドエラー/テスト失敗/デプロイ失敗/等]

---

### ❌ 発生したエラー

**確認者**: Claude Code

**エラー内容**:
```
[エラーメッセージ全文]
```

**発生場所**:
- ファイル: `path/to/file.rs:123`
- 関数/メソッド: `function_name()`
- コンテキスト: [エラーが発生した状況]

---

### 🔍 原因分析

**分析者**: Claude Code

1. **直接的な原因**: [原因の説明]
2. **根本的な原因**: [根本原因の分析]
3. **影響範囲**: [影響を受けるコンポーネント]

---

### 🛠️ 実施した対応

**実行者**: Claude Code

1. [対応1] - ステータス: [完了/未完了]
2. [対応2] - ステータス: [完了/未完了]

---

### 🚀 次のアクション（提案）

**提案者**: Claude Code

#### 即座の対応が必要
1. [緊急対応1] - 優先度: Critical
2. [緊急対応2] - 優先度: High

#### エスカレーション
- **エスカレーション先**: [人間の開発者/上位Agent]
- **エスカレーション理由**: [理由]

---

**報告終了**
Claude Code
```

## 統計レポートの形式

定期的な統計レポート（日次/週次）の場合：

```markdown
## 📊 Claude Code からの統計レポート

**報告者**: Claude Code (AI Assistant)
**報告期間**: YYYY-MM-DD ～ YYYY-MM-DD
**レポート種別**: [日次/週次/月次]

---

### 📈 実行統計

**集計者**: Claude Code

#### Agent実行回数
- CoordinatorAgent: N 回
- CodeGenAgent: N 回
- ReviewAgent: N 回
- その他: N 回

#### Issue処理統計
- 処理完了: N 件
- 処理中: N 件
- 保留: N 件

#### 品質統計
- 平均品質スコア: XX.X 点
- テストカバレッジ: XX.X %
- Clippy警告数: N 件

---

### 🎯 主要な成果

**報告者**: Claude Code

1. [成果1] - Impact: High
2. [成果2] - Impact: Medium

---

### ⚠️ 課題と対応

**分析者**: Claude Code

#### 発生した課題
1. [課題1] - 深刻度: High
   - 対応状況: [対応済み/対応中/未対応]

#### 今後の改善提案
1. [改善提案1]
2. [改善提案2]

---

**報告終了**
Claude Code
```

## テンプレート使用時の注意事項

### 1. 簡潔性の維持
- 各セクションは簡潔に記述
- 箇条書きを活用
- 不要なセクションは削除可能

### 2. タイムスタンプの精度
- 日時は ISO 8601 形式推奨: `YYYY-MM-DDTHH:MM:SSZ`
- タイムゾーン明記（例: JST, UTC）

### 3. コミットIDの記載
- 短縮形（7文字）で十分
- フルハッシュが必要な場合は別途記載

### 4. 絵文字の使用
- 視認性向上のため推奨
- ただし過度な使用は避ける

### 5. マークダウン記法の統一
- 見出しは `##` から開始（`#` はドキュメントタイトル用）
- コードブロックは言語指定を含める
- リストは `-` を使用（`*` や `+` は避ける）

## テンプレートのカスタマイズ

プロジェクト固有の要件がある場合、以下のセクションを追加可能：

### セキュリティ関連
```markdown
### 🔐 セキュリティチェック

**確認者**: Claude Code

✅ 機密情報の漏洩チェック - クリア
✅ 依存関係の脆弱性スキャン - クリア
✅ 権限設定の確認 - クリア
```

### パフォーマンス関連
```markdown
### ⚡ パフォーマンス指標

**測定者**: Claude Code

- ビルド時間: XX.XX 秒（前回比: ±X%）
- テスト実行時間: XX.XX 秒（前回比: ±X%）
- バイナリサイズ: X.X MB（前回比: ±X%）
```

### コスト関連（API使用量等）
```markdown
### 💰 コスト統計

**集計者**: Claude Code

- API呼び出し回数: N 回
- トークン使用量: N トークン
- 推定コスト: $X.XX
```

---

**このテンプレートは全てのClaude Codeセッションで使用してください。**

**テンプレートバージョン**: v1.0.0
**最終更新**: 2025-10-17
**管理者**: Claude Code

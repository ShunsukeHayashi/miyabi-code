{
  "hooks": {
    "PostToolUse": [
      {
        "hooks": [
          {
            "type": "command",
            "command": ".claude/hooks/tool-use.sh",
            "timeout": 5
          }
        ]
      }
    ],
    "SessionStart": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "tools/voicevox_enqueue.sh '„Çª„ÉÉ„Ç∑„Éß„É≥ÈñãÂßã„Å™„ÅÆ„Å†ÔºÅMiyabi„Éó„É≠„Ç∏„Çß„ÇØ„Éà„Åß‰ΩúÊ•≠„ÇíÂßã„ÇÅ„Çã„ÅÆ„Å†ÔºÅ„É™„Ç¢„É´„Çø„Ç§„É†„Éä„É¨„Éº„Ç∑„Éß„É≥„É¢„Éº„ÉâËµ∑Âãï„Å™„ÅÆ„Å†ÔºÅ' 3 1.0",
            "timeout": 5
          },
          {
            "type": "command",
            "command": ".claude/hooks/session-start.sh",
            "timeout": 5
          }
        ]
      }
    ],
    "Notification": [
      {
        "hooks": [
          {
            "type": "command",
            "command": ".claude/hooks/notification.sh",
            "timeout": 10
          }
        ]
      }
    ]
  },
  "env": {
    "VOICEVOX_NARRATION_ENABLED": "true",
    "VOICEVOX_SPEAKER": "3",
    "VOICEVOX_SPEED": "1.2",
    "VOICEVOX_ENQUEUE": "tools/voicevox_enqueue.sh"
  },
  "permissions": {
    "allow": [
      "Read(//Users/shunsuke/.miyabi/**)",
      "Bash(cat:*)",
      "Read(//Users/shunsuke/Library/Logs/**)",
      "Read(//Users/shunsuke/Library/**)",
      "Bash(cargo --version:*)",
      "Bash(rustc:*)",
      "Bash(system_profiler:*)",
      "Bash(cargo build:*)",
      "Bash(kill:*)",
      "Bash(gh issue list:*)",
      "Bash(gh issue view:*)",
      "Bash(cargo clippy:*)",
      "Bash(cargo test:*)",
      "Bash(git add:*)",
      "Bash(git commit -m \"$(cat <<''EOF''\nfix(miyabi-core): eliminate memory leak in logger.rs using OnceCell\n\nReplace `mem::forget` with proper WorkerGuard lifetime management.\n\n## Changes\n- Add `once_cell = \"1.19\"` dependency to miyabi-core\n- Introduce `LOGGER_GUARD: OnceCell<WorkerGuard>` global static\n- Replace 3x `std::mem::forget(_guard)` with `LOGGER_GUARD.set(guard)`\n- Update comments to explain lifetime management\n\n## Impact\n- ‚úÖ Eliminates clippy::mem_forget warnings\n- ‚úÖ Proper WorkerGuard lifecycle management\n- ‚úÖ All tests pass (10/10 logger tests)\n- ‚úÖ No breaking API changes\n\n## Testing\n```\ncargo clippy --package miyabi-core -- -W clippy::mem_forget  # ‚úÖ Pass\ncargo test --package miyabi-core --lib logger                # ‚úÖ 10/10 Pass\n```\n\nFixes #355\n\nü§ñ Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(gh issue close:*)",
      "Bash(git rm:*)",
      "Bash(git commit:*)",
      "Bash(git reset:*)",
      "Bash(gh api:*)",
      "Bash(cargo fix:*)",
      "Bash(gh issue create:*)",
      "Bash(gh label list:*)",
      "Bash(gh issue comment 360 --body \"$(cat <<''EOF''\n## üîó ÂÖ¨Èñã„É™„Éù„Ç∏„Éà„É™ÂêåÊúü\n\n„Åì„ÅÆIssue„ÅØÂÖ¨Èñã„É™„Éù„Ç∏„Éà„É™„Å´ÂêåÊúü„Åï„Çå„Åæ„Åó„ÅüÔºö\n**Public Issue**: https://github.com/ShunsukeHayashi/Miyabi/issues/164\n\nÂÖ¨ÈñãIssue #164„Åß„ÅØ„ÄÅ„Ç≥„Éü„É•„Éã„ÉÜ„Ç£„Åã„Çâ„ÅÆ„Éï„Ç£„Éº„Éâ„Éê„ÉÉ„ÇØ„Å®ÂçîÂäõ„ÇíÂèó„Åë‰ªò„Åë„Å¶„ÅÑ„Åæ„Åô„ÄÇ\nÂÆüË£Ö„ÅÆË©≥Á¥∞„ÅØ„Åì„ÅÆ„Éó„É©„Ç§„Éô„Éº„ÉàIssue #360„ÅßÁÆ°ÁêÜ„Åó„Åæ„Åô„ÄÇ\n\n---\n\n## ‚úÖ Êó¢Â≠òCI/CDÁ¢∫Ë™çÁµêÊûú\n\n`.github/workflows/rust.yml`„ÇíÁ¢∫Ë™ç„Åó„ÅüÁµêÊûú„ÄÅ**Windows CI/CD„ÅØÊó¢„Å´ÂÆüË£ÖÊ∏à„Åø**„Åß„Åó„ÅüÔºö\n\n### ÂÆüË£ÖÊ∏à„ÅøÂÜÖÂÆπ\n1. **Test job (L109)**: `windows-latest`„Åß„ÉÜ„Çπ„ÉàÂÆüË°å\n   ```yaml\n   matrix:\n     os: [ubuntu-latest, macos-latest, windows-latest]\n     rust: [stable, beta]\n   ```\n\n2. **Build job (L239)**: WindowsÂêë„Åë„É™„É™„Éº„Çπ„Éê„Ç§„Éä„É™ÁîüÊàê\n   ```yaml\n   matrix:\n     include:\n       - os: windows-latest\n         target: x86_64-pc-windows-msvc\n   ```\n\n3. **Artifact upload (L270)**: `miyabi.exe`„ÅÆËá™Âãï„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ\n\n### Ê¨°„ÅÆ„Çπ„ÉÜ„ÉÉ„Éó\nWindows CI/CD„ÅØÊó¢„Å´Âãï‰Ωú„Åó„Å¶„ÅÑ„Çã„Åü„ÇÅ„ÄÅÊ¨°„ÅÆ„Éï„Çß„Éº„Ç∫„Å´ÈÄ≤„ÇÅ„Åæ„ÅôÔºö\n- [ ] Phase 2: Path HandlingÔºàPathBufÂÆåÂÖ®ÁßªË°åÔºâ\n- [ ] Phase 3: Environment VariablesÔºàdirs crateÁµ±ÂêàÔºâ\n- [ ] Phase 4: ÂÆüÁí∞Â¢É„ÉÜ„Çπ„Éà\n\nü§ñ Generated with [Claude Code](https://claude.com/claude-code)\nEOF\n)\")",
      "Bash(gh issue comment:*)",
      "Bash(gh issue edit:*)",
      "Bash(find:*)",
      "Bash(tree:*)",
      "Bash(git push:*)",
      "Bash(git pull:*)",
      "Bash(git rebase:*)",
      "Bash(git diff:*)",
      "Bash(git checkout:*)",
      "Skill(agent-execution)",
      "Bash(git stash:*)",
      "Bash(git stash pop:*)"
    ],
    "deny": [],
    "ask": []
  }
}

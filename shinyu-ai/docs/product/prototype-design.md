# プロトタイプ設計書

**プロジェクト**: 統合占いアプリ（新湯 AI）
**作成日**: 2025-10-25
**バージョン**: 1.0.0

---

## デザインコンセプト

### テーマ

**"神秘的でありながら親しみやすい、現代的な占いアプリ"**

**キーワード**:
- **Mystical**: 星空、宇宙、神秘的な雰囲気
- **Friendly**: 親しみやすいイラスト、柔らかい配色
- **Modern**: ミニマルなUI、高速なインタラクション
- **Accurate**: データ駆動、科学的要素の可視化

---

## カラーパレット

### プライマリカラー

**ブランドカラー**: **Deep Purple（深紫）**
- **HEX**: `#6B46C1`
- **RGB**: `rgb(107, 70, 193)`
- **用途**: メインボタン、アクセント、ロゴ

**理由**: 占い・スピリチュアルの象徴色、高級感と神秘性

---

### セカンダリカラー

**ゴールド（金）**
- **HEX**: `#F59E0B`
- **RGB**: `rgb(245, 158, 11)`
- **用途**: 星のアイコン、強調テキスト

**ミッドナイトブルー（深青）**
- **HEX**: `#1E293B`
- **RGB**: `rgb(30, 41, 59)`
- **用途**: ヘッダー背景、カード背景

---

### ニュートラルカラー

**背景色**:
- **ライトモード**: `#FAFAFA`（ほぼ白）
- **ダークモード**: `#0F172A`（深い青黒）※Phase 2で実装

**テキスト**:
- **プライマリ**: `#1E293B`（濃いグレー）
- **セカンダリ**: `#64748B`（中間グレー）
- **ディセーブル**: `#CBD5E1`（薄いグレー）

---

### グラデーション

**背景グラデーション**（Hero Section用）:
```css
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
```

**カードグラデーション**:
```css
background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
```

---

## タイポグラフィ

### フォントファミリー

**英語 + 日本語**: **Inter + Noto Sans JP**

**理由**:
- **Inter**: モダンなサンセリフ、可読性高、Vercelの推奨フォント
- **Noto Sans JP**: Google Fontsで無料、和文に最適

**CDN読み込み**:
```html
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Noto+Sans+JP:wght@400;600;700&display=swap" rel="stylesheet">
```

---

### フォントサイズ（Tailwind CSS準拠）

| 用途 | サイズ | Tailwind Class | 行間 |
|------|--------|----------------|------|
| **H1（ページタイトル）** | 48px | `text-5xl` | 1.2 |
| **H2（セクション見出し）** | 36px | `text-4xl` | 1.3 |
| **H3（カード見出し）** | 24px | `text-2xl` | 1.4 |
| **本文（Body）** | 16px | `text-base` | 1.6 |
| **小文字（Caption）** | 14px | `text-sm` | 1.5 |
| **極小（Fine Print）** | 12px | `text-xs` | 1.4 |

---

### フォントウェイト

| 用途 | ウェイト | Tailwind Class |
|------|---------|---------------|
| 見出し | 700（Bold） | `font-bold` |
| 強調 | 600（Semibold） | `font-semibold` |
| 本文 | 400（Regular） | `font-normal` |

---

## アイコンシステム

**選定**: **Lucide React**（shadcn/uiの標準）

**理由**:
- MIT License（商用利用可）
- Tree-shakable（バンドルサイズ最小化）
- 1,000種類以上のアイコン

**主要アイコン**:
| 用途 | アイコン | コンポーネント |
|------|---------|---------------|
| 星座 | ✨ | `<Sparkles />` |
| 動物 | 🐾 | `<PawPrint />` |
| 数字 | #️⃣ | `<Hash />` |
| 兄弟 | 👥 | `<Users />` |
| カレンダー | 📅 | `<Calendar />` |
| 時計 | 🕐 | `<Clock />` |
| 位置 | 📍 | `<MapPin />` |
| シェア | 🔗 | `<Share2 />` |

---

## ワイヤーフレーム

### 1. ランディングページ（LP）

```
┌────────────────────────────────────────────────────────┐
│ [Logo: 新湯 AI]                 [今すぐ占う（無料）] │
├────────────────────────────────────────────────────────┤
│                                                        │
│        🌌 Hero Section（背景: 星空グラデーション）       │
│                                                        │
│              あなたの全てを知る、                       │
│           統合占いプロファイル                          │
│                                                        │
│     誕生日・名前・兄弟構成から、西洋占星術・動物占い・    │
│         数秘術・兄弟構成診断を統合分析                  │
│                                                        │
│           [今すぐ占う（無料） →]                       │
│         （ボタン: Deep Purple、白文字）                │
│                                                        │
├────────────────────────────────────────────────────────┤
│                                                        │
│   💫 Features Section                                 │
│   ┌──────────┐  ┌──────────┐  ┌──────────┐          │
│   │  ✨      │  │  🐾      │  │  #️⃣     │          │
│   │ 西洋占星術 │  │ 動物占い  │  │ 数秘術   │          │
│   │ 太陽・月・  │  │ 12種類の │  │ 運命数を │          │
│   │ 上昇星座   │  │ 動物診断  │  │ 算出     │          │
│   └──────────┘  └──────────┘  └──────────┘          │
│                                                        │
│   ┌──────────┐  ┌──────────┐                        │
│   │  👥      │  │  🎨      │                        │
│   │ 兄弟構成  │  │ AI画像   │                        │
│   │ 診断      │  │ 生成※    │                        │
│   │ アドラー心理│  │（準備中） │                        │
│   └──────────┘  └──────────┘                        │
│                                                        │
├────────────────────────────────────────────────────────┤
│                                                        │
│   🚀 How It Works                                     │
│                                                        │
│   ┌────────┐     ┌────────┐     ┌────────┐         │
│   │  1️⃣    │ →  │  2️⃣    │ →  │  3️⃣    │         │
│   │ 情報入力 │     │ AI計算  │     │ 結果表示 │         │
│   │  1分   │     │  10秒  │     │  無制限  │         │
│   └────────┘     └────────┘     └────────┘         │
│                                                        │
├────────────────────────────────────────────────────────┤
│                                                        │
│   ❓ FAQ                                              │
│   Q: 無料ですか？                                      │
│   A: はい、現在は完全無料です（将来有料プランあり）      │
│                                                        │
│   Q: データは保存されますか？                          │
│   A: 7日間保存されます。いつでも削除可能です。          │
│                                                        │
│   Q: 当たりますか？                                    │
│   A: 西洋占星術は天文計算ベース、動物占いと数秘術は      │
│      統計的パターンに基づいています。                  │
│                                                        │
├────────────────────────────────────────────────────────┤
│                                                        │
│   📝 CTA Section                                      │
│              今すぐあなたを占う                         │
│           [無料で占いを始める →]                       │
│                                                        │
├────────────────────────────────────────────────────────┤
│ Footer                                                 │
│ © 2025 新湯 AI | Privacy Policy | Terms of Service    │
│ Twitter | GitHub                                       │
└────────────────────────────────────────────────────────┘
```

---

### 2. 入力フォーム画面

```
┌────────────────────────────────────────────────────────┐
│ [Logo: 新湯 AI]                                        │
├────────────────────────────────────────────────────────┤
│                                                        │
│   📝 あなたの情報を入力してください                     │
│   （全て入力すると、より正確な占いができます）          │
│                                                        │
│   ┌──────────────────────────────────────────┐       │
│   │ 📅 誕生日 *（必須）                       │       │
│   │ ┌──────────────────────────────┐        │       │
│   │ │ 1990年 3月 15日  [DatePicker] │        │       │
│   │ └──────────────────────────────┘        │       │
│   └──────────────────────────────────────────┘       │
│                                                        │
│   ┌──────────────────────────────────────────┐       │
│   │ 🕐 出生時刻（任意・西洋占星術の精度向上）  │       │
│   │ ┌──────────────────────────────┐        │       │
│   │ │ 14:30  [TimePicker]            │        │       │
│   │ └──────────────────────────────┘        │       │
│   └──────────────────────────────────────────┘       │
│                                                        │
│   ┌──────────────────────────────────────────┐       │
│   │ 📍 出生地（任意・西洋占星術の精度向上）    │       │
│   │ ┌──────────────────────────────┐        │       │
│   │ │ 東京都 [Autocomplete]          │        │       │
│   │ │ 候補: 東京都、東京都渋谷区...    │        │       │
│   │ └──────────────────────────────┘        │       │
│   └──────────────────────────────────────────┘       │
│                                                        │
│   ┌──────────────────────────────────────────┐       │
│   │ ✍️ フルネーム *（必須・数秘術用）          │       │
│   │ ┌──────────────────────────────┐        │       │
│   │ │ 山田太郎                        │        │       │
│   │ └──────────────────────────────┘        │       │
│   └──────────────────────────────────────────┘       │
│                                                        │
│   ┌──────────────────────────────────────────┐       │
│   │ 👥 兄弟構成 *（必須・性格診断用）          │       │
│   │ ○ 長子（一番上）                          │       │
│   │ ○ 中間子                                  │       │
│   │ ○ 末っ子（一番下）                        │       │
│   │ ○ 一人っ子                                │       │
│   └──────────────────────────────────────────┘       │
│                                                        │
│   ┌──────────────────────────────────────────┐       │
│   │ [占う（無料） →]                           │       │
│   │ （ボタン: Deep Purple、全項目入力で活性化） │       │
│   └──────────────────────────────────────────┘       │
│                                                        │
│   ※ 入力データは7日間保存されます。プライバシーポリシー │
│                                                        │
└────────────────────────────────────────────────────────┘
```

**インタラクション**:
- リアルタイムバリデーション: 必須項目未入力時は赤枠表示
- DatePicker: カレンダーUI（react-datepicker）
- Autocomplete: Google Places API連携（Phase 1は日本の都道府県プリセット）

---

### 3. ローディング画面

```
┌────────────────────────────────────────────────────────┐
│                                                        │
│                                                        │
│                    🔮                                  │
│              占い師が分析中...                          │
│                                                        │
│          ┌────────────────────┐                       │
│          │ ████████░░░░░░░░  │  60%                   │
│          └────────────────────┘                       │
│                                                        │
│    ✨ 西洋占星術を計算中...                             │
│    ⏳ 動物占いを判定中...                               │
│    🔢 数秘術を算出中...                                 │
│                                                        │
│              （3-5秒で完了します）                      │
│                                                        │
└────────────────────────────────────────────────────────┘
```

**アニメーション**:
- プログレスバー: 0%→100%（3秒）
- 占い種類のテキストが順次表示（フェードイン）
- Framer Motion使用

---

### 4. 結果表示画面（メイン）

```
┌────────────────────────────────────────────────────────┐
│ [Logo: 新湯 AI]   [もう一度占う] [シェア 🔗]         │
├────────────────────────────────────────────────────────┤
│                                                        │
│   🌟 山田太郎さんの統合占いプロファイル                 │
│   （1990年3月15日 14:30生まれ・長子）                  │
│                                                        │
├────────────────────────────────────────────────────────┤
│                                                        │
│   ┌──────────────────────────────────────────┐       │
│   │ ✨ 西洋占星術                  [▼展開]    │       │
│   ├──────────────────────────────────────────┤       │
│   │                                          │       │
│   │   ♓ 太陽星座: うお座（Pisces）           │       │
│   │   感受性が豊かで、芸術的センスに優れています。  │
│   │   共感力が高く、他者の気持ちを理解する能力が │
│   │   抜群です。                             │       │
│   │                                          │       │
│   │   ♋ 月星座: かに座（Cancer）            │       │
│   │   感情的で家族思い。安心できる環境を大切に   │
│   │   します。                               │       │
│   │                                          │       │
│   │   ♊ 上昇星座: ふたご座（Gemini）        │       │
│   │   好奇心旺盛で、コミュニケーション能力が高い。│
│   │   多才で器用です。                       │       │
│   │                                          │       │
│   └──────────────────────────────────────────┘       │
│                                                        │
│   ┌──────────────────────────────────────────┐       │
│   │ 🐾 動物占い                    [▼展開]    │       │
│   ├──────────────────────────────────────────┤       │
│   │                                          │       │
│   │   🐺 ゴールドの狼                        │       │
│   │   [イラスト画像: 金色の狼のアニメ風キャラ]    │       │
│   │                                          │       │
│   │   【性格特性】                           │       │
│   │   ✓ リーダーシップが強い                 │       │
│   │   ✓ 独立心が旺盛                         │       │
│   │   ✓ 鋭い洞察力                           │       │
│   │   ✓ 慎重で計画的                         │       │
│   │                                          │       │
│   │   【強み】統率力、決断力、忠誠心         │       │
│   │   【弱み】頑固、孤独を感じやすい         │       │
│   │                                          │       │
│   └──────────────────────────────────────────┘       │
│                                                        │
│   ┌──────────────────────────────────────────┐       │
│   │ #️⃣ 数秘術                     [▼展開]    │       │
│   ├──────────────────────────────────────────┤       │
│   │                                          │       │
│   │   7️⃣ 運命数: 7（探求者）                │       │
│   │   真理を追求する哲学者タイプ。内省的で   │       │
│   │   精神性を重視します。                   │       │
│   │                                          │       │
│   │   3️⃣ 宿命数: 3（表現者）                │       │
│   │   創造力が豊かで、自己表現が得意。       │       │
│   │   人を楽しませるのが好きです。           │       │
│   │                                          │       │
│   │   5️⃣ ソウル数: 5（冒険者）              │       │
│   │   変化と自由を求める心。新しい経験を     │       │
│   │   渇望します。                           │       │
│   │                                          │       │
│   └──────────────────────────────────────────┘       │
│                                                        │
│   ┌──────────────────────────────────────────┐       │
│   │ 👥 兄弟構成診断                [▼展開]    │       │
│   ├──────────────────────────────────────────┤       │
│   │                                          │       │
│   │   🏆 リーダー型（長子）                  │       │
│   │                                          │       │
│   │   【性格特性】                           │       │
│   │   ✓ 責任感が強い                         │       │
│   │   ✓ 完璧主義                             │       │
│   │   ✓ 面倒見が良い                         │       │
│   │   ✓ 保守的                               │       │
│   │                                          │       │
│   │   【強み】統率力、計画性、信頼性         │       │
│   │   【弱み】頑固、プレッシャーに弱い       │       │
│   │                                          │       │
│   │   アドラー心理学によれば、長子は家族の中で │
│   │   責任感を培い、リーダーシップを発揮する  │
│   │   傾向があります。                       │       │
│   │                                          │       │
│   └──────────────────────────────────────────┘       │
│                                                        │
├────────────────────────────────────────────────────────┤
│                                                        │
│   📊 統合分析                                          │
│   ┌──────────────────────────────────────────┐       │
│   │ あなたは「感受性豊かなリーダー」です。     │       │
│   │                                          │       │
│   │ 西洋占星術の「うお座」の感受性と、動物占い │
│   │ の「狼」のリーダーシップが融合。数秘術の  │
│   │ 「7」の探求心と、長子の責任感が加わり、   │
│   │ 深い洞察力で人を導く力があります。       │       │
│   │                                          │       │
│   │ 【適職】カウンセラー、教育者、クリエイター │
│   │ 【恋愛】理解者を求める。深い絆を大切に。  │
│   │ 【金運】計画的な投資で成功する可能性大。  │
│   │                                          │       │
│   └──────────────────────────────────────────┘       │
│                                                        │
├────────────────────────────────────────────────────────┤
│                                                        │
│   🔗 結果をシェア                                      │
│   [Twitter] [LINE] [コピー]                           │
│                                                        │
│   ┌──────────────────────────────────────────┐       │
│   │ [もう一度占う]                            │       │
│   └──────────────────────────────────────────┘       │
│                                                        │
└────────────────────────────────────────────────────────┘
```

**インタラクション**:
- Accordion（折りたたみ）: 各セクションはクリックで開閉
- スクロールアニメーション: Framer Motionでフェードイン
- シェアボタン: Twitter/LINEのシェアダイアログを開く

---

### 5. モバイル版レイアウト（レスポンシブ）

```
┌─────────────────────┐
│ [Logo]     [Menu ☰] │
├─────────────────────┤
│                     │
│   🌌 Hero Section   │
│                     │
│  あなたの全てを知る、 │
│  統合占いプロファイル │
│                     │
│ [今すぐ占う（無料）→]│
│                     │
├─────────────────────┤
│   💫 Features       │
│   ┌───────┐         │
│   │  ✨   │         │
│   │西洋占星術│         │
│   └───────┘         │
│   ┌───────┐         │
│   │  🐾   │         │
│   │動物占い│         │
│   └───────┘         │
│   ┌───────┐         │
│   │  #️⃣  │         │
│   │ 数秘術 │         │
│   └───────┘         │
├─────────────────────┤
│   （以下同様）        │
└─────────────────────┘
```

**ブレークポイント**（Tailwind CSS標準）:
- `sm`: 640px（スマホ縦）
- `md`: 768px（タブレット）
- `lg`: 1024px（PC）

---

## UI/UXデザインガイドライン

### 1. ボタンスタイル

**プライマリボタン**（CTA用）:
```css
.btn-primary {
  background: #6B46C1; /* Deep Purple */
  color: #FFFFFF;
  padding: 16px 32px;
  border-radius: 12px;
  font-weight: 600;
  font-size: 16px;
  box-shadow: 0 4px 14px rgba(107, 70, 193, 0.4);
  transition: all 0.3s ease;
}

.btn-primary:hover {
  background: #553C9A; /* Darker Purple */
  box-shadow: 0 6px 20px rgba(107, 70, 193, 0.6);
  transform: translateY(-2px);
}
```

**セカンダリボタン**（戻る、キャンセル用）:
```css
.btn-secondary {
  background: #FFFFFF;
  color: #6B46C1;
  border: 2px solid #6B46C1;
  padding: 14px 30px;
  border-radius: 12px;
}
```

---

### 2. カードスタイル

**結果表示カード**:
```css
.result-card {
  background: #FFFFFF;
  border-radius: 16px;
  padding: 24px;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
  border: 1px solid #E2E8F0;
  margin-bottom: 16px;
}

.result-card:hover {
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
  transition: box-shadow 0.3s ease;
}
```

---

### 3. インプットフィールド

**テキスト入力**:
```css
.input-field {
  width: 100%;
  padding: 12px 16px;
  border: 2px solid #E2E8F0;
  border-radius: 8px;
  font-size: 16px;
  transition: border-color 0.3s ease;
}

.input-field:focus {
  border-color: #6B46C1;
  outline: none;
  box-shadow: 0 0 0 3px rgba(107, 70, 193, 0.1);
}

.input-field.error {
  border-color: #EF4444; /* Red */
}
```

---

### 4. アニメーション

**フェードイン**（Framer Motion）:
```tsx
import { motion } from 'framer-motion';

<motion.div
  initial={{ opacity: 0, y: 20 }}
  animate={{ opacity: 1, y: 0 }}
  transition={{ duration: 0.5 }}
>
  {/* コンテンツ */}
</motion.div>
```

**ローディングスピナー**:
```tsx
<motion.div
  animate={{ rotate: 360 }}
  transition={{ repeat: Infinity, duration: 1, ease: 'linear' }}
>
  🔮
</motion.div>
```

---

## ユーザーフロー

### 新規ユーザーの初回体験（Happy Path）

```
[1] LP訪問
  ↓
[2] 「今すぐ占う」クリック
  ↓
[3] 入力フォーム表示
  ↓
[4] 誕生日入力（DatePicker）
  ↓
[5] 出生時刻入力（任意スキップ可）
  ↓
[6] 出生地入力（任意スキップ可）
  ↓
[7] フルネーム入力
  ↓
[8] 兄弟構成選択（ラジオボタン）
  ↓
[9] 「占う」ボタンクリック
  ↓
[10] ローディング画面（3-5秒）
  ↓
[11] 結果表示（Accordion展開）
  ↓
[12] 各セクションを閲覧
  ↓
[13] シェアボタンクリック（Twitter/LINE）
  ↓
[14] SNSに投稿
  ↓
[15] 友人が訪問（新規ユーザー獲得）
```

**離脱ポイント**:
- [3]→[4]: 入力が面倒で離脱（対策: 必須項目を4つに限定）
- [9]→[10]: ローディングが長い（対策: 3秒以内に最適化）
- [11]→[13]: 結果が当たってない（対策: 文言の調整）

---

### エラーハンドリング

**ケース1: API障害**
```
[ローディング画面]
  ↓ (APIエラー発生)
[エラーメッセージ表示]
「現在、占いサービスが混雑しています。
 しばらくしてから再度お試しください。」
[もう一度試す] ボタン
```

**ケース2: 入力バリデーションエラー**
```
[入力フォーム]
  ↓ (必須項目未入力)
[該当フィールドに赤枠 + エラーメッセージ]
「誕生日を入力してください」
```

---

## アクセシビリティ（A11y）対策

### 1. WAI-ARIA対応

**例: ボタン**
```tsx
<button
  aria-label="占いを実行する"
  role="button"
>
  占う（無料） →
</button>
```

**例: Accordion**
```tsx
<button
  aria-expanded={isOpen}
  aria-controls="astrology-content"
>
  西洋占星術
</button>
<div id="astrology-content" role="region">
  {/* コンテンツ */}
</div>
```

---

### 2. キーボードナビゲーション

- Tab: 次のフォーカス可能要素へ
- Shift + Tab: 前の要素へ
- Enter: ボタン実行、Accordion開閉
- Esc: モーダル閉じる

---

### 3. カラーコントラスト

**WCAG 2.1 AAレベル準拠**:
- 本文テキスト: 4.5:1以上
- 大きなテキスト（18px以上）: 3:1以上

**確認済み**:
- Deep Purple（#6B46C1）on White（#FFFFFF）: 7.2:1 ✅
- ゴールド（#F59E0B）on ミッドナイトブルー（#1E293B）: 5.8:1 ✅

---

## パフォーマンス最適化

### 1. 画像最適化

**形式**: WebP（フォールバック: PNG/JPG）

**圧縮**: Next.js Image Optimizationを使用
```tsx
import Image from 'next/image';

<Image
  src="/animal-wolf.webp"
  alt="ゴールドの狼"
  width={300}
  height={300}
  loading="lazy"
/>
```

---

### 2. コード分割

**動的インポート**:
```tsx
import dynamic from 'next/dynamic';

const ResultCard = dynamic(() => import('@/components/ResultCard'), {
  loading: () => <p>読み込み中...</p>
});
```

---

### 3. Core Web Vitals目標

| メトリクス | 目標値 | 測定ツール |
|-----------|--------|----------|
| LCP（Largest Contentful Paint） | < 2.5s | Lighthouse |
| FID（First Input Delay） | < 100ms | Chrome DevTools |
| CLS（Cumulative Layout Shift） | < 0.1 | Lighthouse |

---

## デザインシステム参考

### 1. shadcn/ui

**コンポーネント使用予定**:
- `Button`: プライマリ、セカンダリボタン
- `Input`: テキスト入力
- `Calendar`: DatePicker
- `Accordion`: 結果表示の折りたたみ
- `Card`: 結果カード
- `Dialog`: モーダル（将来）

**インストール**:
```bash
npx shadcn-ui@latest init
npx shadcn-ui@latest add button input calendar accordion card
```

---

### 2. Tailwind UIパターン

**参考ページ**:
- Hero Section: https://tailwindui.com/components/marketing/sections/heroes
- Feature Section: https://tailwindui.com/components/marketing/sections/feature-sections
- FAQ: https://tailwindui.com/components/marketing/sections/faq-sections

---

## プロトタイプツール

### Figma（推奨）

**デザインファイル作成予定**:
- ランディングページ（デスクトップ + モバイル）
- 入力フォーム
- 結果表示画面
- コンポーネントライブラリ（ボタン、カード等）

**URL**: https://figma.com/（Phase 2で作成）

---

### 代替案: Penpot（無料・OSS）

**URL**: https://penpot.app/

---

## 開発環境でのプレビュー

### Storybook（コンポーネントカタログ）

**セットアップ**:
```bash
npx storybook@latest init
```

**ストーリー例**:
```tsx
// Button.stories.tsx
export default {
  title: 'Components/Button',
  component: Button,
};

export const Primary = () => <Button variant="primary">占う（無料）</Button>;
export const Secondary = () => <Button variant="secondary">もう一度占う</Button>;
```

---

## 改訂履歴

| バージョン | 日付 | 変更内容 |
|-----------|------|---------|
| 1.0.0 | 2025-10-25 | 初版作成 |

---

**次のドキュメント**: [6ヶ月ロードマップ](./product-detail.md)

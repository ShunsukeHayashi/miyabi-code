# MVP（最小実行可能製品）定義書

**プロジェクト**: 統合占いアプリ（新湯 AI）
**作成日**: 2025-10-25
**バージョン**: 1.0.0

---

## MVP戦略

### コンセプト

**"1ヶ月で検証可能な最小機能セット"**

**目標**:
1. **技術検証**: 占い計算ロジック + AI統合の実現可能性確認
2. **ユーザー検証**: 初期ユーザー50人獲得、フィードバック収集
3. **収益検証**: 無料版の価値提供で将来の有料転換可能性を測定

**MVP期間**: 4週間（Week 1-4）

---

## Phase 1: MVP機能（1ヶ月目）

### ✅ 必須機能リスト

#### 1. ユーザー入力フォーム

**機能**: 占い計算に必要な情報の収集

**入力項目**:
- 誕生日（必須）: `YYYY-MM-DD`形式、DatePicker UI
- 出生時刻（任意）: `HH:MM`形式、TimePicker UI
- 出生地（任意）: Google Places Autocomplete
  - 緯度・経度を自動取得（西洋占星術用）
- フルネーム（必須）: テキスト入力（数秘術用）
- 兄弟構成（必須）: ラジオボタン選択
  - 長子 / 中間子 / 末っ子 / 一人っ子

**UI/UX**:
- 1ページ完結型（ステップなし）
- リアルタイムバリデーション（React Hook Form + Zod）
- 必須項目未入力時は「占う」ボタン非活性

**実装時間**: 3日

**優先度**: 🔴 **最高**

---

#### 2. 西洋占星術計算

**機能**: 太陽星座・月星座・上昇星座の算出

**データソース**: AstrologyAPI

**出力内容**:
- 太陽星座（Sun Sign）
- 月星座（Moon Sign）
- 上昇星座（Ascendant/Rising Sign）
- 各星座の基本特性（3-5文）

**制限事項（MVP）**:
- ❌ 惑星配置の詳細表示なし（Phase 2で実装）
- ❌ ハウス分析なし
- ❌ アスペクト分析なし

**実装時間**: 5日（API連携含む）

**優先度**: 🔴 **最高**

---

#### 3. 動物占い判定

**機能**: 12種類の動物 + 6色の組み合わせから性格診断

**データソース**: 独自実装（生年月日からの計算式）

**出力内容**:
- 動物タイプ（例: 「ゴールドの狼」）
- 性格特性（5-7項目）
- 強み・弱み

**実装時間**: 3日

**優先度**: 🔴 **最高**

---

#### 4. 数秘術計算

**機能**: 運命数・宿命数・ソウル数の算出

**データソース**: 独自実装（名前 + 誕生日からの計算）

**出力内容**:
- 運命数（Life Path Number）: 1-9、11、22、33
- 宿命数（Destiny Number）
- ソウル数（Soul Urge Number）
- 各数字の意味（3-5文）

**実装時間**: 4日

**優先度**: 🔴 **最高**

---

#### 5. 兄弟構成診断

**機能**: 出生順位による性格分析

**データソース**: 独自実装（アドラー心理学ベース）

**出力内容**:
- アーキタイプ（例: 「リーダー型」）
- 性格特性（5項目）
- 強み・弱み（各3項目）

**実装時間**: 2日

**優先度**: 🟡 **高**

---

#### 6. 統合プロファイル表示

**機能**: 全占い結果を1画面にまとめて表示

**表示構成**:
```
┌─────────────────────────────────────┐
│   あなたの統合占いプロファイル         │
├─────────────────────────────────────┤
│ 【西洋占星術】                       │
│ 太陽星座: うお座 ♓                  │
│ 月星座: かに座 ♋                    │
│ 上昇星座: ふたご座 ♊                │
│ （各星座の説明...）                  │
├─────────────────────────────────────┤
│ 【動物占い】                         │
│ タイプ: ゴールドの狼                 │
│ 性格: ...                           │
├─────────────────────────────────────┤
│ 【数秘術】                           │
│ 運命数: 7（探求者）                  │
│ 宿命数: 3（表現者）                  │
├─────────────────────────────────────┤
│ 【兄弟構成診断】                     │
│ タイプ: リーダー型                   │
│ 特性: ...                           │
└─────────────────────────────────────┘
```

**インタラクション**:
- スクロール可能な縦長レイアウト
- 各セクションは折りたたみ可能（Accordion）
- 「結果をシェア」ボタン（Twitter、LINE対応）

**実装時間**: 4日

**優先度**: 🔴 **最高**

---

#### 7. 結果データの保存

**機能**: ユーザーが再訪時に前回の占い結果を閲覧可能

**実装方法**:
- Supabase PostgreSQLに保存
- ユーザーログイン不要（LocalStorageにセッションID保存）
- 占い結果は7日間保存

**実装時間**: 3日

**優先度**: 🟡 **高**

---

#### 8. ランディングページ

**機能**: アプリの価値提案とCTA

**セクション構成**:
1. **Hero Section**
   - キャッチコピー: 「あなたの全てを知る、統合占いプロファイル」
   - サブコピー: 「誕生日・名前・兄弟構成から、西洋占星術・動物占い・数秘術を統合分析」
   - CTA: 「今すぐ占う（無料）」ボタン

2. **Features Section**
   - 「5つの占いを統合」
   - 「AIが生成する画像」（Phase 2で実装）
   - 「過去・現在・未来を分析」（Phase 2で実装）

3. **How It Works**
   - ステップ1: 情報を入力（1分）
   - ステップ2: AI計算（10秒）
   - ステップ3: 結果を表示

4. **FAQ**
   - 「無料ですか？」→「はい、MVPは完全無料」
   - 「データは保存されますか？」→「7日間保存、いつでも削除可能」

**実装時間**: 3日

**優先度**: 🔴 **最高**

---

### ❌ MVP除外機能（Phase 2以降）

#### 1. AI画像生成

**理由**: DALL-E 3のコスト（$0.04/枚）がMVP期間で高額になる可能性
**実装時期**: Phase 2（Week 5-8）
**代替案（MVP）**: プリセット画像を使用（動物イラスト素材サイトから取得）

---

#### 2. ユーモア占い（野菜占い、椎茸占い等）

**理由**: OpenAI API呼び出しのコスト、実装優先度が低い
**実装時期**: Phase 2（Week 5-8）
**代替案（MVP）**: なし（完全に除外）

---

#### 3. 時系列分析（過去10年・未来10年）

**理由**: 実装複雑度が高い、MVPの価値検証には不要
**実装時期**: Phase 3（Week 9-12）
**代替案（MVP）**: 現在の占い結果のみ表示

---

#### 4. 詳細な惑星配置・ハウス分析

**理由**: ユーザーが理解困難、UI複雑化
**実装時期**: Phase 3（Week 9-12）
**代替案（MVP）**: 太陽・月・上昇星座のみ

---

#### 5. ユーザー登録・ログイン機能

**理由**: MVP期間はフリクションを減らす（即座に占える体験優先）
**実装時期**: Phase 2（Week 5-8）
**代替案（MVP）**: LocalStorage + セッションIDで匿名保存

---

#### 6. 有料プラン・決済機能

**理由**: MVP期間は無料提供、ユーザーフィードバック収集優先
**実装時期**: Phase 3（Week 9-12）
**代替案（MVP）**: 「プレミアムプラン準備中」のティーザー表示

---

#### 7. シェア機能の詳細版（画像生成）

**理由**: OGP画像の動的生成は実装複雑
**実装時期**: Phase 2（Week 5-8）
**代替案（MVP）**: テキストリンクのみシェア（Twitter、LINE）

---

## MVP開発ロードマップ（4週間）

### Week 1: 環境構築 + 基盤実装

| Day | タスク | 担当 | 状態 |
|-----|--------|------|------|
| 1 | プロジェクト初期化（Next.js + Supabase） | Frontend | 未着手 |
| 2 | DB設計 + マイグレーション実行 | Backend | 未着手 |
| 3 | 認証なしセッション管理実装 | Backend | 未着手 |
| 4 | ランディングページ基礎実装 | Frontend | 未着手 |
| 5 | 入力フォームUI実装 | Frontend | 未着手 |
| 6-7 | バリデーションロジック実装 | Frontend | 未着手 |

**成果物**: 動作する入力フォーム

---

### Week 2: 占いロジック実装（1/2）

| Day | タスク | 担当 | 状態 |
|-----|--------|------|------|
| 8 | AstrologyAPI統合（テスト環境） | Backend | 未着手 |
| 9 | 西洋占星術計算Edge Function実装 | Backend | 未着手 |
| 10 | 動物占い計算ロジック実装 | Backend | 未着手 |
| 11 | 動物占い性格データ整備（JSON） | Backend | 未着手 |
| 12 | 数秘術計算ロジック実装 | Backend | 未着手 |
| 13 | 数秘術説明文データ整備 | Backend | 未着手 |
| 14 | 週次レビュー + バグ修正 | All | 未着手 |

**成果物**: 3つの占いロジックが動作

---

### Week 3: 占いロジック実装（2/2） + UI統合

| Day | タスク | 担当 | 状態 |
|-----|--------|------|------|
| 15 | 兄弟構成診断ロジック実装 | Backend | 未着手 |
| 16 | 統合計算API実装（全占いを1回で実行） | Backend | 未着手 |
| 17 | 結果表示UI実装（西洋占星術） | Frontend | 未着手 |
| 18 | 結果表示UI実装（動物占い + 数秘術） | Frontend | 未着手 |
| 19 | 結果表示UI実装（兄弟構成 + 統合） | Frontend | 未着手 |
| 20 | Accordion実装 + レスポンシブ対応 | Frontend | 未着手 |
| 21 | 週次レビュー + バグ修正 | All | 未着手 |

**成果物**: エンドツーエンドで占い結果が表示される

---

### Week 4: 仕上げ + テスト + リリース

| Day | タスク | 担当 | 状態 |
|-----|--------|------|------|
| 22 | データ保存機能実装（Supabase） | Backend | 未着手 |
| 23 | シェア機能実装（Twitter、LINE） | Frontend | 未着手 |
| 24 | ランディングページ最終調整 | Frontend | 未着手 |
| 25 | E2Eテスト（手動）: 入力→結果表示 | QA | 未着手 |
| 26 | パフォーマンス最適化（画像圧縮等） | Frontend | 未着手 |
| 27 | 本番環境デプロイ + ドメイン設定 | DevOps | 未着手 |
| 28 | ソフトローンチ（初期ユーザー招待） | All | 未着手 |

**成果物**: 本番環境稼働、初期ユーザー獲得開始

---

## MVP成功指標（KPI）

### 1. ユーザー獲得

**目標**: 初期ユーザー **50人**（4週間で）

**計測方法**: Google Analytics 4のユニークビジター

**達成条件**:
- ランディングページ訪問: 200人
- 占い実行完了: 50人
- **コンバージョン率**: 25%以上

**施策**:
- Twitter投稿（3回/週）
- 友人・家族へのシェア
- Product Hunt投稿（英語版）

---

### 2. ユーザーエンゲージメント

**目標**: 占い完了率 **80%以上**

**計測方法**:
- 入力開始ユーザー数 / 結果表示ユーザー数

**達成条件**:
- 入力フォーム離脱率 < 20%
- 計算エラー率 < 5%

---

### 3. 技術的成功

**目標**: システム稼働率 **99%以上**

**計測方法**:
- Vercel Uptime
- Supabase Health Check

**達成条件**:
- APIレスポンス時間 < 3秒（95パーセンタイル）
- エラー率 < 1%（Sentry）

---

### 4. ユーザーフィードバック

**目標**: 定性フィードバック **20件以上**

**収集方法**:
- 結果画面に「フィードバック」ボタン設置
- Google Form連携
- Twitter DMでのヒアリング

**重視する質問**:
- 「この占い結果は当たっていましたか？」（1-5点）
- 「次に欲しい機能は？」（自由記述）
- 「有料版があれば使いますか？」（Yes/No + 希望価格）

---

## MVP失敗判定基準

以下のいずれかに該当した場合、MVP失敗と判定し、ピボット検討：

🚨 **1. ユーザー獲得不足**
- 4週間でユーザー数 < 20人
- ランディングページ訪問 < 100人

🚨 **2. 完了率低迷**
- 占い完了率 < 50%
- 平均セッション時間 < 1分（興味なし判定）

🚨 **3. 技術的問題**
- APIエラー率 > 10%
- 占い計算失敗率 > 20%

🚨 **4. ネガティブフィードバック多数**
- 5点満点評価の平均 < 2.5点
- 「当たっていない」というコメント > 50%

---

## MVP後の意思決定フロー

### シナリオA: 成功（全KPI達成）

**アクション**:
1. Phase 2開始（Week 5-8）
2. AI画像生成実装
3. ユーザー登録機能追加
4. 有料プラン検討開始

**投資判断**: 追加¥100,000投入（開発リソース強化）

---

### シナリオB: 部分成功（KPIの50%達成）

**アクション**:
1. フィードバック分析
2. 問題点の特定（UI、占い精度、ロード時間等）
3. 2週間の改善スプリント
4. 再評価

**投資判断**: 現状維持（追加投資なし）

---

### シナリオC: 失敗（KPIの30%未満）

**アクション**:
1. ピボット検討会議
2. 代替案の検討
   - 占い特化→タロット占いのみに絞る
   - ターゲット変更→ビジネスパーソン向け適職診断
3. 3日以内に方針決定

**投資判断**: 中止検討（サンクコスト¥50,000で撤退可能）

---

## リスク管理

### リスク1: AstrologyAPIの障害

**対策**:
- フォールバック: 簡易版の星座計算（誕生日のみから判定）
- ユーザー通知: 「詳細版は復旧次第表示」

**影響**: 中

---

### リスク2: OpenAI APIのコスト超過（将来）

**対策**:
- MVP期間はAI画像生成を除外
- Phase 2でキャッシュ戦略導入

**影響**: 低（MVP期間は影響なし）

---

### リスク3: ユーザー流入不足

**対策**:
- 事前にTwitterフォロワー獲得（100人目標）
- 占いコミュニティへの投稿（Reddit、Facebook Groups）
- SEO対策（ブログ記事3本作成）

**影響**: 高

---

### リスク4: 開発遅延

**対策**:
- 週次進捗会議（毎週日曜夜）
- タスク優先度の見直し（毎週）
- 外部委託検討（デザイン、イラスト）

**影響**: 中

---

## 開発体制

### チーム構成（1人体制想定）

**役割分担**:
- **フロントエンド開発**: 40%（Week 1, 3, 4）
- **バックエンド開発**: 40%（Week 2, 3）
- **デザイン**: 10%（Week 1, 4）
- **QA・テスト**: 10%（Week 4）

**1日の開発時間**: 4-6時間

**週間開発時間**: 28-42時間

---

## コスト内訳（MVP期間: 4週間）

| 項目 | サービス | 単価 | 数量 | 合計 |
|------|---------|------|------|------|
| ホスティング | Vercel Hobby | ¥0/月 | 1ヶ月 | ¥0 |
| バックエンド | Supabase Free | ¥0/月 | 1ヶ月 | ¥0 |
| 占星術API | AstrologyAPI | ¥5,850/月 | 1ヶ月 | ¥5,850 |
| ドメイン | お名前.com | ¥1,500/年 | 1年 | ¥125（月割） |
| デザイン素材 | Unsplash/Pexels | ¥0 | - | ¥0 |
| イラスト素材 | いらすとや | ¥0 | - | ¥0 |
| **合計** | - | - | - | **¥5,975** |

**開発者時給換算**: ¥0（自己開発）

**総投資額**: **¥5,975**（MVP期間）

---

## 次フェーズへの引き継ぎ事項

### Phase 2（Week 5-8）への要求事項

**必須実装**:
1. AI画像生成（DALL-E 3）
2. ユーザー登録・ログイン機能
3. 過去の占い履歴表示
4. ユーモア占い（野菜占い、椎茸占い）

**検討事項**:
1. 有料プランの価格設定（¥500-¥1,500/月）
2. サブスクリプション決済（Stripe導入）
3. 時系列分析のプロトタイプ

---

## 改訂履歴

| バージョン | 日付 | 変更内容 |
|-----------|------|---------|
| 1.0.0 | 2025-10-25 | 初版作成 |

---

**次のドキュメント**: [プロトタイプ設計書](./prototype-design.md)
